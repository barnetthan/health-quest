(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Ll(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dg={exports:{}},ic={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function Vx(){if(yb)return ic;yb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ic.Fragment=e,ic.jsx=t,ic.jsxs=t,ic}var _b;function Lx(){return _b||(_b=1,Dg.exports=Vx()),Dg.exports}var b=Lx(),Mg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function Ux(){if(vb)return De;vb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,L={};function P(U,ie,fe){this.props=U,this.context=ie,this.refs=L,this.updater=fe||R}P.prototype.isReactComponent={},P.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},P.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function $(){}$.prototype=P.prototype;function B(U,ie,fe){this.props=U,this.context=ie,this.refs=L,this.updater=fe||R}var G=B.prototype=new $;G.constructor=B,O(G,P.prototype),G.isPureReactComponent=!0;var X=Array.isArray,Y={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function M(U,ie,fe,ce,oe,be){return fe=be.ref,{$$typeof:n,type:U,key:ie,ref:fe!==void 0?fe:null,props:be}}function x(U,ie){return M(U.type,ie,void 0,void 0,void 0,U.props)}function C(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function D(U){var ie={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(fe){return ie[fe]})}var V=/\/+/g;function j(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):ie.toString(36)}function N(){}function Ie(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(N,N):(U.status="pending",U.then(function(ie){U.status==="pending"&&(U.status="fulfilled",U.value=ie)},function(ie){U.status==="pending"&&(U.status="rejected",U.reason=ie)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function we(U,ie,fe,ce,oe){var be=typeof U;(be==="undefined"||be==="boolean")&&(U=null);var Re=!1;if(U===null)Re=!0;else switch(be){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(U.$$typeof){case n:case e:Re=!0;break;case _:return Re=U._init,we(Re(U._payload),ie,fe,ce,oe)}}if(Re)return oe=oe(U),Re=ce===""?"."+j(U,0):ce,X(oe)?(fe="",Re!=null&&(fe=Re.replace(V,"$&/")+"/"),we(oe,ie,fe,"",function(Ze){return Ze})):oe!=null&&(C(oe)&&(oe=x(oe,fe+(oe.key==null||U&&U.key===oe.key?"":(""+oe.key).replace(V,"$&/")+"/")+Re)),ie.push(oe)),1;Re=0;var it=ce===""?".":ce+":";if(X(U))for(var Le=0;Le<U.length;Le++)ce=U[Le],be=it+j(ce,Le),Re+=we(ce,ie,fe,be,oe);else if(Le=T(U),typeof Le=="function")for(U=Le.call(U),Le=0;!(ce=U.next()).done;)ce=ce.value,be=it+j(ce,Le++),Re+=we(ce,ie,fe,be,oe);else if(be==="object"){if(typeof U.then=="function")return we(Ie(U),ie,fe,ce,oe);throw ie=String(U),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Re}function J(U,ie,fe){if(U==null)return U;var ce=[],oe=0;return we(U,ce,"","",function(be){return ie.call(fe,be,oe++)}),ce}function ue(U){if(U._status===-1){var ie=U._result;ie=ie(),ie.then(function(fe){(U._status===0||U._status===-1)&&(U._status=1,U._result=fe)},function(fe){(U._status===0||U._status===-1)&&(U._status=2,U._result=fe)}),U._status===-1&&(U._status=0,U._result=ie)}if(U._status===1)return U._result.default;throw U._result}var he=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Be(){}return De.Children={map:J,forEach:function(U,ie,fe){J(U,function(){ie.apply(this,arguments)},fe)},count:function(U){var ie=0;return J(U,function(){ie++}),ie},toArray:function(U){return J(U,function(ie){return ie})||[]},only:function(U){if(!C(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},De.Component=P,De.Fragment=t,De.Profiler=a,De.PureComponent=B,De.StrictMode=r,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,De.act=function(){throw Error("act(...) is not supported in production builds of React.")},De.cache=function(U){return function(){return U.apply(null,arguments)}},De.cloneElement=function(U,ie,fe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ce=O({},U.props),oe=U.key,be=void 0;if(ie!=null)for(Re in ie.ref!==void 0&&(be=void 0),ie.key!==void 0&&(oe=""+ie.key),ie)!te.call(ie,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ie.ref===void 0||(ce[Re]=ie[Re]);var Re=arguments.length-2;if(Re===1)ce.children=fe;else if(1<Re){for(var it=Array(Re),Le=0;Le<Re;Le++)it[Le]=arguments[Le+2];ce.children=it}return M(U.type,oe,void 0,void 0,be,ce)},De.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},De.createElement=function(U,ie,fe){var ce,oe={},be=null;if(ie!=null)for(ce in ie.key!==void 0&&(be=""+ie.key),ie)te.call(ie,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(oe[ce]=ie[ce]);var Re=arguments.length-2;if(Re===1)oe.children=fe;else if(1<Re){for(var it=Array(Re),Le=0;Le<Re;Le++)it[Le]=arguments[Le+2];oe.children=it}if(U&&U.defaultProps)for(ce in Re=U.defaultProps,Re)oe[ce]===void 0&&(oe[ce]=Re[ce]);return M(U,be,void 0,void 0,null,oe)},De.createRef=function(){return{current:null}},De.forwardRef=function(U){return{$$typeof:d,render:U}},De.isValidElement=C,De.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:ue}},De.memo=function(U,ie){return{$$typeof:g,type:U,compare:ie===void 0?null:ie}},De.startTransition=function(U){var ie=Y.T,fe={};Y.T=fe;try{var ce=U(),oe=Y.S;oe!==null&&oe(fe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Be,he)}catch(be){he(be)}finally{Y.T=ie}},De.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},De.use=function(U){return Y.H.use(U)},De.useActionState=function(U,ie,fe){return Y.H.useActionState(U,ie,fe)},De.useCallback=function(U,ie){return Y.H.useCallback(U,ie)},De.useContext=function(U){return Y.H.useContext(U)},De.useDebugValue=function(){},De.useDeferredValue=function(U,ie){return Y.H.useDeferredValue(U,ie)},De.useEffect=function(U,ie){return Y.H.useEffect(U,ie)},De.useId=function(){return Y.H.useId()},De.useImperativeHandle=function(U,ie,fe){return Y.H.useImperativeHandle(U,ie,fe)},De.useInsertionEffect=function(U,ie){return Y.H.useInsertionEffect(U,ie)},De.useLayoutEffect=function(U,ie){return Y.H.useLayoutEffect(U,ie)},De.useMemo=function(U,ie){return Y.H.useMemo(U,ie)},De.useOptimistic=function(U,ie){return Y.H.useOptimistic(U,ie)},De.useReducer=function(U,ie,fe){return Y.H.useReducer(U,ie,fe)},De.useRef=function(U){return Y.H.useRef(U)},De.useState=function(U){return Y.H.useState(U)},De.useSyncExternalStore=function(U,ie,fe){return Y.H.useSyncExternalStore(U,ie,fe)},De.useTransition=function(){return Y.H.useTransition()},De.version="19.0.0",De}var Eb;function $d(){return Eb||(Eb=1,Mg.exports=Ux()),Mg.exports}var I=$d();const Nn=Ll(I);var kg={exports:{}},ac={},Pg={exports:{}},Vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb;function jx(){return wb||(wb=1,function(n){function e(J,ue){var he=J.length;J.push(ue);e:for(;0<he;){var Be=he-1>>>1,U=J[Be];if(0<a(U,ue))J[Be]=ue,J[he]=U,he=Be;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ue=J[0],he=J.pop();if(he!==ue){J[0]=he;e:for(var Be=0,U=J.length,ie=U>>>1;Be<ie;){var fe=2*(Be+1)-1,ce=J[fe],oe=fe+1,be=J[oe];if(0>a(ce,he))oe<U&&0>a(be,ce)?(J[Be]=be,J[oe]=he,Be=oe):(J[Be]=ce,J[fe]=he,Be=fe);else if(oe<U&&0>a(be,he))J[Be]=be,J[oe]=he,Be=oe;else break e}}return ue}function a(J,ue){var he=J.sortIndex-ue.sortIndex;return he!==0?he:J.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,w=null,T=3,R=!1,O=!1,L=!1,P=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function G(J){for(var ue=t(g);ue!==null;){if(ue.callback===null)r(g);else if(ue.startTime<=J)r(g),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(g)}}function X(J){if(L=!1,G(J),!O)if(t(m)!==null)O=!0,Ie();else{var ue=t(g);ue!==null&&we(X,ue.startTime-J)}}var Y=!1,te=-1,M=5,x=-1;function C(){return!(n.unstable_now()-x<M)}function D(){if(Y){var J=n.unstable_now();x=J;var ue=!0;try{e:{O=!1,L&&(L=!1,$(te),te=-1),R=!0;var he=T;try{t:{for(G(J),w=t(m);w!==null&&!(w.expirationTime>J&&C());){var Be=w.callback;if(typeof Be=="function"){w.callback=null,T=w.priorityLevel;var U=Be(w.expirationTime<=J);if(J=n.unstable_now(),typeof U=="function"){w.callback=U,G(J),ue=!0;break t}w===t(m)&&r(m),G(J)}else r(m);w=t(m)}if(w!==null)ue=!0;else{var ie=t(g);ie!==null&&we(X,ie.startTime-J),ue=!1}}break e}finally{w=null,T=he,R=!1}ue=void 0}}finally{ue?V():Y=!1}}}var V;if(typeof B=="function")V=function(){B(D)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,N=j.port2;j.port1.onmessage=D,V=function(){N.postMessage(null)}}else V=function(){P(D,0)};function Ie(){Y||(Y=!0,V())}function we(J,ue){te=P(function(){J(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){O||R||(O=!0,Ie())},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var he=T;T=ue;try{return J()}finally{T=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=T;T=J;try{return ue()}finally{T=he}},n.unstable_scheduleCallback=function(J,ue,he){var Be=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Be+he:Be):he=Be,J){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=he+U,J={id:_++,callback:ue,priorityLevel:J,startTime:he,expirationTime:U,sortIndex:-1},he>Be?(J.sortIndex=he,e(g,J),t(m)===null&&J===t(g)&&(L?($(te),te=-1):L=!0,we(X,he-Be))):(J.sortIndex=U,e(m,J),O||R||(O=!0,Ie())),J},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(J){var ue=T;return function(){var he=T;T=ue;try{return J.apply(this,arguments)}finally{T=he}}}}(Vg)),Vg}var bb;function Fx(){return bb||(bb=1,Pg.exports=jx()),Pg.exports}var Lg={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function Bx(){if(Tb)return vn;Tb=1;var n=$d();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},vn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},vn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},vn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},vn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,w=d(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:R}):_==="script"&&r.d.X(m,{crossOrigin:w,integrity:T,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},vn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=d(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},vn.requestFormReset=function(m){r.d.r(m)},vn.unstable_batchedUpdates=function(m,g){return m(g)},vn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},vn.version="19.0.0",vn}var Ab;function oA(){if(Ab)return Lg.exports;Ab=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lg.exports=Bx(),Lg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function zx(){if(Sb)return ac;Sb=1;var n=Fx(),e=$d(),t=oA();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),X=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function x(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case m:return"Fragment";case d:return"Portal";case _:return"Profiler";case g:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case R:return(s.displayName||"Context")+".Provider";case T:return(s._context.displayName||"Context")+".Consumer";case O:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return i=s.displayName||null,i!==null?i:x(s.type)||"Memo";case B:i=s._payload,s=s._init;try{return x(s(i))}catch{}}return null}var C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,V,j;function N(s){if(V===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||"",j=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+s+j}var Ie=!1;function we(s,i){if(!s||Ie)return"";Ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var Q=Z}Reflect.construct(s,[],ae)}else{try{ae.call()}catch(Z){Q=Z}s.call(ae.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ae=s())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],A=p[1];if(E&&A){var k=E.split(`
`),z=A.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===z.length)for(u=k.length-1,f=z.length-1;1<=u&&0<=f&&k[u]!==z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==z[f]){var ee=`
`+k[u].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=u&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?N(o):""}function J(s){switch(s.tag){case 26:case 27:case 5:return N(s.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return s=we(s.type,!1),s;case 11:return s=we(s.type.render,!1),s;case 1:return s=we(s.type,!0),s;default:return""}}function ue(s){try{var i="";do i+=J(s),s=s.return;while(s);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function he(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function Be(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function U(s){if(he(s)!==s)throw Error(r(188))}function ie(s){var i=s.alternate;if(!i){if(i=he(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return U(f),s;if(p===u)return U(f),i;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=p;break}if(A===u){E=!0,u=f,o=p;break}A=A.sibling}if(!E){for(A=p.child;A;){if(A===o){E=!0,o=p,u=f;break}if(A===u){E=!0,u=p,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function fe(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=fe(s),i!==null)return i;s=s.sibling}return null}var ce=Array.isArray,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Re=[],it=-1;function Le(s){return{current:s}}function Ze(s){0>it||(s.current=Re[it],Re[it]=null,it--)}function Ue(s,i){it++,Re[it]=s.current,s.current=i}var dt=Le(null),Lt=Le(null),Rt=Le(null),Wt=Le(null);function je(s,i){switch(Ue(Rt,i),Ue(Lt,s),Ue(dt,null),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Gw(i):0;break;default:if(s=s===8?i.parentNode:i,i=s.tagName,s=s.namespaceURI)s=Gw(s),i=Kw(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Ze(dt),Ue(dt,i)}function gn(){Ze(dt),Ze(Lt),Ze(Rt)}function Dn(s){s.memoizedState!==null&&Ue(Wt,s);var i=dt.current,o=Kw(i,s.type);i!==o&&(Ue(Lt,s),Ue(dt,o))}function wr(s){Lt.current===s&&(Ze(dt),Ze(Lt)),Wt.current===s&&(Ze(Wt),ec._currentValue=be)}var Fr=Object.prototype.hasOwnProperty,Bn=n.unstable_scheduleCallback,br=n.unstable_cancelCallback,ya=n.unstable_shouldYield,_s=n.unstable_requestPaint,Ut=n.unstable_now,ui=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,at=n.unstable_UserBlockingPriority,Mn=n.unstable_NormalPriority,vs=n.unstable_LowPriority,er=n.unstable_IdlePriority,nu=n.log,Br=n.unstable_setDisableYieldValue,ci=null,yn=null;function ru(s){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ci,s,void 0,(s.current.flags&128)===128)}catch{}}function zr(s){if(typeof nu=="function"&&Br(s),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(ci,s)}catch{}}var Sn=Math.clz32?Math.clz32:lh,su=Math.log,oh=Math.LN2;function lh(s){return s>>>=0,s===0?32:31-(su(s)/oh|0)|0}var Hr=128,hi=4194304;function Tr(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function tr(s,i){var o=s.pendingLanes;if(o===0)return 0;var u=0,f=s.suspendedLanes,p=s.pingedLanes,E=s.warmLanes;s=s.finishedLanes!==0;var A=o&134217727;return A!==0?(o=A&~f,o!==0?u=Tr(o):(p&=A,p!==0?u=Tr(p):s||(E=A&~E,E!==0&&(u=Tr(E))))):(A=o&~f,A!==0?u=Tr(A):p!==0?u=Tr(p):s||(E=o&~E,E!==0&&(u=Tr(E)))),u===0?0:i!==0&&i!==u&&(i&f)===0&&(f=u&-u,E=i&-i,f>=E||f===32&&(E&4194176)!==0)?i:u}function fi(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function _o(s,i){switch(s){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var s=Hr;return Hr<<=1,(Hr&4194176)===0&&(Hr=128),s}function di(){var s=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),s}function vo(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function Ct(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function uh(s,i,o,u,f,p){var E=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var A=s.entanglements,k=s.expirationTimes,z=s.hiddenUpdates;for(o=E&~o;0<o;){var ee=31-Sn(o),ae=1<<ee;A[ee]=0,k[ee]=-1;var Q=z[ee];if(Q!==null)for(z[ee]=null,ee=0;ee<Q.length;ee++){var Z=Q[ee];Z!==null&&(Z.lane&=-536870913)}o&=~ae}u!==0&&mi(s,u,0),p!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=p&~(E&~i))}function mi(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Sn(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&4194218}function pi(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Sn(o),f=1<<u;f&i|s[u]&i&&(s[u]|=i),o&=~f}}function ch(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function hh(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:hb(s.type))}function gi(s,i){var o=oe.p;try{return oe.p=s,i()}finally{oe.p=o}}var $r=Math.random().toString(36).slice(2),Xt="__reactFiber$"+$r,jt="__reactProps$"+$r,Es="__reactContainer$"+$r,_a="__reactEvents$"+$r,Eo="__reactListeners$"+$r,qr="__reactHandles$"+$r,au="__reactResources$"+$r,yi="__reactMarker$"+$r;function va(s){delete s[Xt],delete s[jt],delete s[_a],delete s[Eo],delete s[qr]}function Ar(s){var i=s[Xt];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Es]||o[Xt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=Xw(s);s!==null;){if(o=s[Xt])return o;s=Xw(s)}return i}s=o,o=s.parentNode}return null}function ws(s){if(s=s[Xt]||s[Es]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function _i(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function vi(s){var i=s[au];return i||(i=s[au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(s){s[yi]=!0}var ou=new Set,wo={};function zn(s,i){kn(s,i),kn(s+"Capture",i)}function kn(s,i){for(wo[s]=i,s=0;s<i.length;s++)ou.add(i[s])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},uu={};function fh(s){return Fr.call(uu,s)?!0:Fr.call(lu,s)?!1:Vm.test(s)?uu[s]=!0:(lu[s]=!0,!1)}function Ei(s,i,o){if(fh(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function wi(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function nr(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function Rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function dh(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Lm(s){var i=dh(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(s,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Ea(s){s._valueTracker||(s._valueTracker=Lm(s))}function cu(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=dh(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function bo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var bs=/[\n"\\]/g;function Et(s){return s.replace(bs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function bi(s,i,o,u,f,p,E,A){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),i!=null?E==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Rn(i)):s.value!==""+Rn(i)&&(s.value=""+Rn(i)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),i!=null?To(s,E,Rn(i)):o!=null?To(s,E,Rn(o)):u!=null&&s.removeAttribute("value"),f==null&&p!=null&&(s.defaultChecked=!!p),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+Rn(A):s.removeAttribute("name")}function wa(s,i,o,u,f,p,E,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;o=o!=null?""+Rn(o):"",i=i!=null?""+Rn(i):o,A||i===s.value||(s.value=i),s.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=A?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function To(s,i,o){i==="number"&&bo(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Xe(s,i,o,u){if(s=s.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<s.length;o++)f=i.hasOwnProperty("$"+s[o].value),s[o].selected!==f&&(s[o].selected=f),f&&u&&(s[o].defaultSelected=!0)}else{for(o=""+Rn(o),i=null,f=0;f<s.length;f++){if(s[f].value===o){s[f].selected=!0,u&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function ba(s,i,o){if(i!=null&&(i=""+Rn(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Rn(o):""}function Ti(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(ce(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Rn(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u)}function rr(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Um=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hu(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||Um.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function mh(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&hu(s,f,u)}else for(var p in i)i.hasOwnProperty(p)&&hu(s,p,i[p])}function fu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(s){return Fm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var sr=null;function Ao(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ts=null,As=null;function Ss(s){var i=ws(s);if(i&&(s=i.stateNode)){var o=s[jt]||null;e:switch(s=i.stateNode,i.type){case"input":if(bi(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Et(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var f=u[jt]||null;if(!f)throw Error(r(90));bi(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&cu(u)}break e;case"textarea":ba(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Xe(s,!!o.multiple,i,!1)}}}var du=!1;function ph(s,i,o){if(du)return s(i,o);du=!0;try{var u=s(i);return u}finally{if(du=!1,(Ts!==null||As!==null)&&(of(),Ts&&(i=Ts,s=As,As=Ts=null,Ss(i),s)))for(i=0;i<s.length;i++)Ss(s[i])}}function Ta(s,i){var o=s.stateNode;if(o===null)return null;var u=o[jt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var ir=!1;if(Hn)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){ir=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{ir=!1}var Kr=null,Ai=null,Rs=null;function mu(){if(Rs)return Rs;var s,i=Ai,o=i.length,u,f="value"in Kr?Kr.value:Kr.textContent,p=f.length;for(s=0;s<o&&i[s]===f[s];s++);var E=o-s;for(u=1;u<=E&&i[o-u]===f[p-u];u++);return Rs=f.slice(s,1<u?1-u:void 0)}function Qr(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Wr(){return!0}function pu(){return!1}function Yt(s){function i(o,u,f,p,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(o=s[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Wr:pu,this.isPropagationStopped=pu,this}return D(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),i}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},So=Yt(et),Sa=D({},et,{view:0,detail:0}),gh=Yt(Sa),Ro,Co,Xr,Ra=D({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Xr&&(Xr&&s.type==="mousemove"?(Ro=s.screenX-Xr.screenX,Co=s.screenY-Xr.screenY):Co=Ro=0,Xr=s),Ro)},movementY:function(s){return"movementY"in s?s.movementY:Co}}),ar=Yt(Ra),yh=D({},Ra,{dataTransfer:0}),Bm=Yt(yh),Ca=D({},Sa,{relatedTarget:0}),Io=Yt(Ca),gu=D({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),xo=Yt(gu),_h=D({},et,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),No=Yt(_h),zm=D({},et,{data:0}),yu=Yt(zm),Ia={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Eh[s])?!!i[s]:!1}function xa(){return _u}var wh=D({},Sa,{key:function(s){if(s.key){var i=Ia[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Qr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(s){return s.type==="keypress"?Qr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Qr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Oo=Yt(wh),bh=D({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vu=Yt(bh),Cs=D({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa}),Th=Yt(Cs),Ah=D({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sh=Yt(Ah),Rh=D({},Ra,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Do=Yt(Rh),Cn=D({},et,{newState:0,oldState:0}),Ch=Yt(Cn),Ih=[9,13,27,32],Yr=Hn&&"CompositionEvent"in window,h=null;Hn&&"documentMode"in document&&(h=document.documentMode);var y=Hn&&"TextEvent"in window&&!h,v=Hn&&(!Yr||h&&8<h&&11>=h),S=" ",q=!1;function W(s,i){switch(s){case"keyup":return Ih.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ge=!1;function Ft(s,i){switch(s){case"compositionend":return le(i);case"keypress":return i.which!==32?null:(q=!0,S);case"textInput":return s=i.data,s===S&&q?null:s;default:return null}}function Ke(s,i){if(Ge)return s==="compositionend"||!Yr&&W(s,i)?(s=mu(),Rs=Ai=Kr=null,Ge=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Jt[s.type]:i==="textarea"}function Is(s,i,o,u){Ts?As?As.push(u):As=[u]:Ts=u,i=ff(i,"onChange"),0<i.length&&(o=new So("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var an=null,Jr=null;function Eu(s){Bw(s,0)}function xh(s){var i=_i(s);if(cu(i))return s}function g0(s,i){if(s==="change")return i}var y0=!1;if(Hn){var Hm;if(Hn){var $m="oninput"in document;if(!$m){var _0=document.createElement("div");_0.setAttribute("oninput","return;"),$m=typeof _0.oninput=="function"}Hm=$m}else Hm=!1;y0=Hm&&(!document.documentMode||9<document.documentMode)}function v0(){an&&(an.detachEvent("onpropertychange",E0),Jr=an=null)}function E0(s){if(s.propertyName==="value"&&xh(Jr)){var i=[];Is(i,Jr,s,Ao(s)),ph(Eu,i)}}function fI(s,i,o){s==="focusin"?(v0(),an=i,Jr=o,an.attachEvent("onpropertychange",E0)):s==="focusout"&&v0()}function dI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return xh(Jr)}function mI(s,i){if(s==="click")return xh(i)}function pI(s,i){if(s==="input"||s==="change")return xh(i)}function gI(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var $n=typeof Object.is=="function"?Object.is:gI;function wu(s,i){if($n(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Fr.call(i,f)||!$n(s[f],i[f]))return!1}return!0}function w0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function b0(s,i){var o=w0(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=w0(o)}}function T0(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?T0(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function A0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=bo(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=bo(s.document)}return i}function qm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function yI(s,i){var o=A0(i);i=s.focusedElem;var u=s.selectionRange;if(o!==i&&i&&i.ownerDocument&&T0(i.ownerDocument.documentElement,i)){if(u!==null&&qm(i)){if(s=u.start,o=u.end,o===void 0&&(o=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(o,i.value.length);else if(o=(s=i.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var f=i.textContent.length,p=Math.min(u.start,f);u=u.end===void 0?p:Math.min(u.end,f),!o.extend&&p>u&&(f=u,u=p,p=f),f=b0(i,p);var E=b0(i,u);f&&E&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==E.node||o.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),o.removeAllRanges(),p>u?(o.addRange(s),o.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),o.addRange(s)))}}for(s=[],o=i;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)o=s[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var _I=Hn&&"documentMode"in document&&11>=document.documentMode,Mo=null,Gm=null,bu=null,Km=!1;function S0(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Km||Mo==null||Mo!==bo(u)||(u=Mo,"selectionStart"in u&&qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),bu&&wu(bu,u)||(bu=u,u=ff(Gm,"onSelect"),0<u.length&&(i=new So("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Mo)))}function Na(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var ko={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionrun:Na("Transition","TransitionRun"),transitionstart:Na("Transition","TransitionStart"),transitioncancel:Na("Transition","TransitionCancel"),transitionend:Na("Transition","TransitionEnd")},Qm={},R0={};Hn&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Oa(s){if(Qm[s])return Qm[s];if(!ko[s])return s;var i=ko[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in R0)return Qm[s]=i[o];return s}var C0=Oa("animationend"),I0=Oa("animationiteration"),x0=Oa("animationstart"),vI=Oa("transitionrun"),EI=Oa("transitionstart"),wI=Oa("transitioncancel"),N0=Oa("transitionend"),O0=new Map,D0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Sr(s,i){O0.set(s,i),zn(i,[s])}var or=[],Po=0,Wm=0;function Nh(){for(var s=Po,i=Wm=Po=0;i<s;){var o=or[i];or[i++]=null;var u=or[i];or[i++]=null;var f=or[i];or[i++]=null;var p=or[i];if(or[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&M0(o,f,p)}}function Oh(s,i,o,u){or[Po++]=s,or[Po++]=i,or[Po++]=o,or[Po++]=u,Wm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Xm(s,i,o,u){return Oh(s,i,o,u),Dh(s)}function Si(s,i){return Oh(s,null,null,i),Dh(s)}function M0(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=s.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(f=!0)),s=p,p=p.return;f&&i!==null&&s.tag===3&&(p=s.stateNode,f=31-Sn(o),p=p.hiddenUpdates,s=p[f],s===null?p[f]=[i]:s.push(i),i.lane=o|536870912)}function Dh(s){if(50<Ku)throw Ku=0,ng=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Vo={},k0=new WeakMap;function lr(s,i){if(typeof s=="object"&&s!==null){var o=k0.get(s);return o!==void 0?o:(i={value:s,source:i,stack:ue(i)},k0.set(s,i),i)}return{value:s,source:i,stack:ue(i)}}var Lo=[],Uo=0,Mh=null,kh=0,ur=[],cr=0,Da=null,xs=1,Ns="";function Ma(s,i){Lo[Uo++]=kh,Lo[Uo++]=Mh,Mh=s,kh=i}function P0(s,i,o){ur[cr++]=xs,ur[cr++]=Ns,ur[cr++]=Da,Da=s;var u=xs;s=Ns;var f=32-Sn(u)-1;u&=~(1<<f),o+=1;var p=32-Sn(i)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,xs=1<<32-Sn(i)+f|o<<f|u,Ns=p+s}else xs=1<<p|o<<f|u,Ns=s}function Ym(s){s.return!==null&&(Ma(s,1),P0(s,1,0))}function Jm(s){for(;s===Mh;)Mh=Lo[--Uo],Lo[Uo]=null,kh=Lo[--Uo],Lo[Uo]=null;for(;s===Da;)Da=ur[--cr],ur[cr]=null,Ns=ur[--cr],ur[cr]=null,xs=ur[--cr],ur[cr]=null}var In=null,on=null,Ye=!1,Rr=null,Zr=!1,Zm=Error(r(519));function ka(s){var i=Error(r(418,""));throw Su(lr(i,s)),Zm}function V0(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Xt]=s,i[jt]=u,o){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(o=0;o<Wu.length;o++)qe(Wu[o],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":qe("invalid",i),wa(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ea(i);break;case"select":qe("invalid",i);break;case"textarea":qe("invalid",i),Ti(i,u.value,u.defaultValue,u.children),Ea(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||qw(i.textContent,o)?(u.popover!=null&&(qe("beforetoggle",i),qe("toggle",i)),u.onScroll!=null&&qe("scroll",i),u.onScrollEnd!=null&&qe("scrollend",i),u.onClick!=null&&(i.onclick=df),i=!0):i=!1,i||ka(s)}function L0(s){for(In=s.return;In;)switch(In.tag){case 3:case 27:Zr=!0;return;case 5:case 13:Zr=!1;return;default:In=In.return}}function Tu(s){if(s!==In)return!1;if(!Ye)return L0(s),Ye=!0,!1;var i=!1,o;if((o=s.tag!==3&&s.tag!==27)&&((o=s.tag===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||vg(s.type,s.memoizedProps)),o=!o),o&&(i=!0),i&&on&&ka(s),L0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(i===0){on=Ir(s.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;s=s.nextSibling}on=null}}else on=In?Ir(s.stateNode.nextSibling):null;return!0}function Au(){on=In=null,Ye=!1}function Su(s){Rr===null?Rr=[s]:Rr.push(s)}var Ru=Error(r(460)),U0=Error(r(474)),ep={then:function(){}};function j0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ph(){}function F0(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Ph,Ph),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,s===Ru?Error(r(483)):s;default:if(typeof i.status=="string")i.then(Ph,Ph);else{if(s=lt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,s===Ru?Error(r(483)):s}throw Cu=i,Ru}}var Cu=null;function B0(){if(Cu===null)throw Error(r(459));var s=Cu;return Cu=null,s}var jo=null,Iu=0;function Vh(s){var i=Iu;return Iu+=1,jo===null&&(jo=[]),F0(jo,s,i)}function xu(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Lh(s,i){throw i.$$typeof===l?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function z0(s){var i=s._init;return i(s._payload)}function H0(s){function i(H,F){if(s){var K=H.deletions;K===null?(H.deletions=[F],H.flags|=16):K.push(F)}}function o(H,F){if(!s)return null;for(;F!==null;)i(H,F),F=F.sibling;return null}function u(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function f(H,F){return H=Li(H,F),H.index=0,H.sibling=null,H}function p(H,F,K){return H.index=K,s?(K=H.alternate,K!==null?(K=K.index,K<F?(H.flags|=33554434,F):K):(H.flags|=33554434,F)):(H.flags|=1048576,F)}function E(H){return s&&H.alternate===null&&(H.flags|=33554434),H}function A(H,F,K,ne){return F===null||F.tag!==6?(F=Qp(K,H.mode,ne),F.return=H,F):(F=f(F,K),F.return=H,F)}function k(H,F,K,ne){var pe=K.type;return pe===m?ee(H,F,K.props.children,ne,K.key):F!==null&&(F.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===B&&z0(pe)===F.type)?(F=f(F,K.props),xu(F,K),F.return=H,F):(F=tf(K.type,K.key,K.props,null,H.mode,ne),xu(F,K),F.return=H,F)}function z(H,F,K,ne){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=Wp(K,H.mode,ne),F.return=H,F):(F=f(F,K.children||[]),F.return=H,F)}function ee(H,F,K,ne,pe){return F===null||F.tag!==7?(F=$a(K,H.mode,ne,pe),F.return=H,F):(F=f(F,K),F.return=H,F)}function ae(H,F,K){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Qp(""+F,H.mode,K),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case c:return K=tf(F.type,F.key,F.props,null,H.mode,K),xu(K,F),K.return=H,K;case d:return F=Wp(F,H.mode,K),F.return=H,F;case B:var ne=F._init;return F=ne(F._payload),ae(H,F,K)}if(ce(F)||te(F))return F=$a(F,H.mode,K,null),F.return=H,F;if(typeof F.then=="function")return ae(H,Vh(F),K);if(F.$$typeof===R)return ae(H,Jh(H,F),K);Lh(H,F)}return null}function Q(H,F,K,ne){var pe=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return pe!==null?null:A(H,F,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case c:return K.key===pe?k(H,F,K,ne):null;case d:return K.key===pe?z(H,F,K,ne):null;case B:return pe=K._init,K=pe(K._payload),Q(H,F,K,ne)}if(ce(K)||te(K))return pe!==null?null:ee(H,F,K,ne,null);if(typeof K.then=="function")return Q(H,F,Vh(K),ne);if(K.$$typeof===R)return Q(H,F,Jh(H,K),ne);Lh(H,K)}return null}function Z(H,F,K,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return H=H.get(K)||null,A(F,H,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case c:return H=H.get(ne.key===null?K:ne.key)||null,k(F,H,ne,pe);case d:return H=H.get(ne.key===null?K:ne.key)||null,z(F,H,ne,pe);case B:var Fe=ne._init;return ne=Fe(ne._payload),Z(H,F,K,ne,pe)}if(ce(ne)||te(ne))return H=H.get(K)||null,ee(F,H,ne,pe,null);if(typeof ne.then=="function")return Z(H,F,K,Vh(ne),pe);if(ne.$$typeof===R)return Z(H,F,K,Jh(F,ne),pe);Lh(F,ne)}return null}function ge(H,F,K,ne){for(var pe=null,Fe=null,ye=F,Te=F=0,tn=null;ye!==null&&Te<K.length;Te++){ye.index>Te?(tn=ye,ye=null):tn=ye.sibling;var Je=Q(H,ye,K[Te],ne);if(Je===null){ye===null&&(ye=tn);break}s&&ye&&Je.alternate===null&&i(H,ye),F=p(Je,F,Te),Fe===null?pe=Je:Fe.sibling=Je,Fe=Je,ye=tn}if(Te===K.length)return o(H,ye),Ye&&Ma(H,Te),pe;if(ye===null){for(;Te<K.length;Te++)ye=ae(H,K[Te],ne),ye!==null&&(F=p(ye,F,Te),Fe===null?pe=ye:Fe.sibling=ye,Fe=ye);return Ye&&Ma(H,Te),pe}for(ye=u(ye);Te<K.length;Te++)tn=Z(ye,H,Te,K[Te],ne),tn!==null&&(s&&tn.alternate!==null&&ye.delete(tn.key===null?Te:tn.key),F=p(tn,F,Te),Fe===null?pe=tn:Fe.sibling=tn,Fe=tn);return s&&ye.forEach(function($i){return i(H,$i)}),Ye&&Ma(H,Te),pe}function Ne(H,F,K,ne){if(K==null)throw Error(r(151));for(var pe=null,Fe=null,ye=F,Te=F=0,tn=null,Je=K.next();ye!==null&&!Je.done;Te++,Je=K.next()){ye.index>Te?(tn=ye,ye=null):tn=ye.sibling;var $i=Q(H,ye,Je.value,ne);if($i===null){ye===null&&(ye=tn);break}s&&ye&&$i.alternate===null&&i(H,ye),F=p($i,F,Te),Fe===null?pe=$i:Fe.sibling=$i,Fe=$i,ye=tn}if(Je.done)return o(H,ye),Ye&&Ma(H,Te),pe;if(ye===null){for(;!Je.done;Te++,Je=K.next())Je=ae(H,Je.value,ne),Je!==null&&(F=p(Je,F,Te),Fe===null?pe=Je:Fe.sibling=Je,Fe=Je);return Ye&&Ma(H,Te),pe}for(ye=u(ye);!Je.done;Te++,Je=K.next())Je=Z(ye,H,Te,Je.value,ne),Je!==null&&(s&&Je.alternate!==null&&ye.delete(Je.key===null?Te:Je.key),F=p(Je,F,Te),Fe===null?pe=Je:Fe.sibling=Je,Fe=Je);return s&&ye.forEach(function(Px){return i(H,Px)}),Ye&&Ma(H,Te),pe}function Tt(H,F,K,ne){if(typeof K=="object"&&K!==null&&K.type===m&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case c:e:{for(var pe=K.key;F!==null;){if(F.key===pe){if(pe=K.type,pe===m){if(F.tag===7){o(H,F.sibling),ne=f(F,K.props.children),ne.return=H,H=ne;break e}}else if(F.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===B&&z0(pe)===F.type){o(H,F.sibling),ne=f(F,K.props),xu(ne,K),ne.return=H,H=ne;break e}o(H,F);break}else i(H,F);F=F.sibling}K.type===m?(ne=$a(K.props.children,H.mode,ne,K.key),ne.return=H,H=ne):(ne=tf(K.type,K.key,K.props,null,H.mode,ne),xu(ne,K),ne.return=H,H=ne)}return E(H);case d:e:{for(pe=K.key;F!==null;){if(F.key===pe)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){o(H,F.sibling),ne=f(F,K.children||[]),ne.return=H,H=ne;break e}else{o(H,F);break}else i(H,F);F=F.sibling}ne=Wp(K,H.mode,ne),ne.return=H,H=ne}return E(H);case B:return pe=K._init,K=pe(K._payload),Tt(H,F,K,ne)}if(ce(K))return ge(H,F,K,ne);if(te(K)){if(pe=te(K),typeof pe!="function")throw Error(r(150));return K=pe.call(K),Ne(H,F,K,ne)}if(typeof K.then=="function")return Tt(H,F,Vh(K),ne);if(K.$$typeof===R)return Tt(H,F,Jh(H,K),ne);Lh(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,F!==null&&F.tag===6?(o(H,F.sibling),ne=f(F,K),ne.return=H,H=ne):(o(H,F),ne=Qp(K,H.mode,ne),ne.return=H,H=ne),E(H)):o(H,F)}return function(H,F,K,ne){try{Iu=0;var pe=Tt(H,F,K,ne);return jo=null,pe}catch(ye){if(ye===Ru)throw ye;var Fe=mr(29,ye,null,H.mode);return Fe.lanes=ne,Fe.return=H,Fe}finally{}}}var Pa=H0(!0),$0=H0(!1),Fo=Le(null),Uh=Le(0);function q0(s,i){s=Bs,Ue(Uh,s),Ue(Fo,i),Bs=s|i.baseLanes}function tp(){Ue(Uh,Bs),Ue(Fo,Fo.current)}function np(){Bs=Uh.current,Ze(Fo),Ze(Uh)}var hr=Le(null),es=null;function Ri(s){var i=s.alternate;Ue(zt,zt.current&1),Ue(hr,s),es===null&&(i===null||Fo.current!==null||i.memoizedState!==null)&&(es=s)}function G0(s){if(s.tag===22){if(Ue(zt,zt.current),Ue(hr,s),es===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(es=s)}}else Ci()}function Ci(){Ue(zt,zt.current),Ue(hr,hr.current)}function Os(s){Ze(hr),es===s&&(es=null),Ze(zt)}var zt=Le(0);function jh(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var bI=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},TI=n.unstable_scheduleCallback,AI=n.unstable_NormalPriority,Ht={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rp(){return{controller:new bI,data:new Map,refCount:0}}function Nu(s){s.refCount--,s.refCount===0&&TI(AI,function(){s.controller.abort()})}var Ou=null,sp=0,Bo=0,zo=null;function SI(s,i){if(Ou===null){var o=Ou=[];sp=0,Bo=cg(),zo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return sp++,i.then(K0,K0),i}function K0(){if(--sp===0&&Ou!==null){zo!==null&&(zo.status="fulfilled");var s=Ou;Ou=null,Bo=0,zo=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function RI(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Q0=C.S;C.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&SI(s,i),Q0!==null&&Q0(s,i)};var Va=Le(null);function ip(){var s=Va.current;return s!==null?s:lt.pooledCache}function Fh(s,i){i===null?Ue(Va,Va.current):Ue(Va,i.pool)}function W0(){var s=ip();return s===null?null:{parent:Ht._currentValue,pool:s}}var Ii=0,Pe=null,nt=null,Dt=null,Bh=!1,Ho=!1,La=!1,zh=0,Du=0,$o=null,CI=0;function It(){throw Error(r(321))}function ap(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!$n(s[o],i[o]))return!1;return!0}function op(s,i,o,u,f,p){return Ii=p,Pe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,C.H=s===null||s.memoizedState===null?Ua:xi,La=!1,p=o(u,f),La=!1,Ho&&(p=Y0(i,o,u,f)),X0(s),p}function X0(s){C.H=ts;var i=nt!==null&&nt.next!==null;if(Ii=0,Dt=nt=Pe=null,Bh=!1,Du=0,$o=null,i)throw Error(r(300));s===null||Zt||(s=s.dependencies,s!==null&&Yh(s)&&(Zt=!0))}function Y0(s,i,o,u){Pe=s;var f=0;do{if(Ho&&($o=null),Du=0,Ho=!1,25<=f)throw Error(r(301));if(f+=1,Dt=nt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}C.H=ja,p=i(o,u)}while(Ho);return p}function II(){var s=C.H,i=s.useState()[0];return i=typeof i.then=="function"?Mu(i):i,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Pe.flags|=1024),i}function lp(){var s=zh!==0;return zh=0,s}function up(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function cp(s){if(Bh){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Bh=!1}Ii=0,Dt=nt=Pe=null,Ho=!1,Du=zh=0,$o=null}function Pn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Pe.memoizedState=Dt=s:Dt=Dt.next=s,Dt}function Mt(){if(nt===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var i=Dt===null?Pe.memoizedState:Dt.next;if(i!==null)Dt=i,nt=s;else{if(s===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Dt===null?Pe.memoizedState=Dt=s:Dt=Dt.next=s}return Dt}var Hh;Hh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Mu(s){var i=Du;return Du+=1,$o===null&&($o=[]),s=F0($o,s,i),i=Pe,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,C.H=i===null||i.memoizedState===null?Ua:xi),s}function $h(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Mu(s);if(s.$$typeof===R)return _n(s)}throw Error(r(438,String(s)))}function hp(s){var i=null,o=Pe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Hh(),Pe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=X;return i.index++,o}function Ds(s,i){return typeof i=="function"?i(s):i}function qh(s){var i=Mt();return fp(i,nt,s)}function fp(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=s.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}i.baseQueue=f=p,u.pending=null}if(p=s.baseState,f===null)s.memoizedState=p;else{i=f.next;var A=E=null,k=null,z=i,ee=!1;do{var ae=z.lane&-536870913;if(ae!==z.lane?(Qe&ae)===ae:(Ii&ae)===ae){var Q=z.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ae===Bo&&(ee=!0);else if((Ii&Q)===Q){z=z.next,Q===Bo&&(ee=!0);continue}else ae={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},k===null?(A=k=ae,E=p):k=k.next=ae,Pe.lanes|=Q,Ui|=Q;ae=z.action,La&&o(p,ae),p=z.hasEagerState?z.eagerState:o(p,ae)}else Q={lane:ae,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},k===null?(A=k=Q,E=p):k=k.next=Q,Pe.lanes|=ae,Ui|=ae;z=z.next}while(z!==null&&z!==i);if(k===null?E=p:k.next=A,!$n(p,s.memoizedState)&&(Zt=!0,ee&&(o=zo,o!==null)))throw o;s.memoizedState=p,s.baseState=E,s.baseQueue=k,u.lastRenderedState=p}return f===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function dp(s){var i=Mt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=s(p,E.action),E=E.next;while(E!==f);$n(p,i.memoizedState)||(Zt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function J0(s,i,o){var u=Pe,f=Mt(),p=Ye;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!$n((nt||f).memoizedState,o);if(E&&(f.memoizedState=o,Zt=!0),f=f.queue,gp(tE.bind(null,u,f,s),[s]),f.getSnapshot!==i||E||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,qo(9,eE.bind(null,u,f,o,i),{destroy:void 0},null),lt===null)throw Error(r(349));p||(Ii&60)!==0||Z0(u,i,o)}return o}function Z0(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Pe.updateQueue,i===null?(i=Hh(),Pe.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function eE(s,i,o,u){i.value=o,i.getSnapshot=u,nE(i)&&rE(s)}function tE(s,i,o){return o(function(){nE(i)&&rE(s)})}function nE(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!$n(s,o)}catch{return!0}}function rE(s){var i=Si(s,2);i!==null&&xn(i,s,2)}function mp(s){var i=Pn();if(typeof s=="function"){var o=s;if(s=o(),La){zr(!0);try{o()}finally{zr(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:s},i}function sE(s,i,o,u){return s.baseState=o,fp(s,nt,typeof u=="function"?u:Ds)}function xI(s,i,o,u,f){if(Qh(s))throw Error(r(485));if(s=i.action,s!==null){var p={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};C.T!==null?o(!0):p.isTransition=!1,u(p),o=i.pending,o===null?(p.next=i.pending=p,iE(i,p)):(p.next=o.next,i.pending=o.next=p)}}function iE(s,i){var o=i.action,u=i.payload,f=s.state;if(i.isTransition){var p=C.T,E={};C.T=E;try{var A=o(f,u),k=C.S;k!==null&&k(E,A),aE(s,i,A)}catch(z){pp(s,i,z)}finally{C.T=p}}else try{p=o(f,u),aE(s,i,p)}catch(z){pp(s,i,z)}}function aE(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){oE(s,i,u)},function(u){return pp(s,i,u)}):oE(s,i,o)}function oE(s,i,o){i.status="fulfilled",i.value=o,lE(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,iE(s,o)))}function pp(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,lE(i),i=i.next;while(i!==u)}s.action=null}function lE(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function uE(s,i){return i}function cE(s,i){if(Ye){var o=lt.formState;if(o!==null){e:{var u=Pe;if(Ye){if(on){t:{for(var f=on,p=Zr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Ir(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){on=Ir(f.nextSibling),u=f.data==="F!";break e}}ka(u)}u=!1}u&&(i=o[0])}}return o=Pn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uE,lastRenderedState:i},o.queue=u,o=IE.bind(null,Pe,u),u.dispatch=o,u=mp(!1),p=wp.bind(null,Pe,!1,u.queue),u=Pn(),f={state:i,dispatch:null,action:s,pending:null},u.queue=f,o=xI.bind(null,Pe,f,p,o),f.dispatch=o,u.memoizedState=s,[i,o,!1]}function hE(s){var i=Mt();return fE(i,nt,s)}function fE(s,i,o){i=fp(s,i,uE)[0],s=qh(Ds)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Mu(i):i;var u=Mt(),f=u.queue,p=f.dispatch;return o!==u.memoizedState&&(Pe.flags|=2048,qo(9,NI.bind(null,f,o),{destroy:void 0},null)),[i,p,s]}function NI(s,i){s.action=i}function dE(s){var i=Mt(),o=nt;if(o!==null)return fE(i,o,s);Mt(),i=i.memoizedState,o=Mt();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function qo(s,i,o,u){return s={tag:s,create:i,inst:o,deps:u,next:null},i=Pe.updateQueue,i===null&&(i=Hh(),Pe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function mE(){return Mt().memoizedState}function Gh(s,i,o,u){var f=Pn();Pe.flags|=s,f.memoizedState=qo(1|i,o,{destroy:void 0},u===void 0?null:u)}function Kh(s,i,o,u){var f=Mt();u=u===void 0?null:u;var p=f.memoizedState.inst;nt!==null&&u!==null&&ap(u,nt.memoizedState.deps)?f.memoizedState=qo(i,o,p,u):(Pe.flags|=s,f.memoizedState=qo(1|i,o,p,u))}function pE(s,i){Gh(8390656,8,s,i)}function gp(s,i){Kh(2048,8,s,i)}function gE(s,i){return Kh(4,2,s,i)}function yE(s,i){return Kh(4,4,s,i)}function _E(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function vE(s,i,o){o=o!=null?o.concat([s]):null,Kh(4,4,_E.bind(null,i,s),o)}function yp(){}function EE(s,i){var o=Mt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&ap(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function wE(s,i){var o=Mt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&ap(i,u[1]))return u[0];if(u=s(),La){zr(!0);try{s()}finally{zr(!1)}}return o.memoizedState=[u,i],u}function _p(s,i,o){return o===void 0||(Ii&1073741824)!==0?s.memoizedState=i:(s.memoizedState=o,s=Tw(),Pe.lanes|=s,Ui|=s,o)}function bE(s,i,o,u){return $n(o,i)?o:Fo.current!==null?(s=_p(s,o,u),$n(s,i)||(Zt=!0),s):(Ii&42)===0?(Zt=!0,s.memoizedState=o):(s=Tw(),Pe.lanes|=s,Ui|=s,i)}function TE(s,i,o,u,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var E=C.T,A={};C.T=A,wp(s,!1,i,o);try{var k=f(),z=C.S;if(z!==null&&z(A,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=RI(k,u);ku(s,i,ee,Qn(s))}else ku(s,i,u,Qn(s))}catch(ae){ku(s,i,{then:function(){},status:"rejected",reason:ae},Qn())}finally{oe.p=p,C.T=E}}function OI(){}function vp(s,i,o,u){if(s.tag!==5)throw Error(r(476));var f=AE(s).queue;TE(s,f,i,be,o===null?OI:function(){return SE(s),o(u)})}function AE(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:be},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function SE(s){var i=AE(s).next.queue;ku(s,i,{},Qn())}function Ep(){return _n(ec)}function RE(){return Mt().memoizedState}function CE(){return Mt().memoizedState}function DI(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=Qn();s=Di(o);var u=Mi(i,s,o);u!==null&&(xn(u,i,o),Lu(u,i,o)),i={cache:rp()},s.payload=i;return}i=i.return}}function MI(s,i,o){var u=Qn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qh(s)?xE(i,o):(o=Xm(s,i,o,u),o!==null&&(xn(o,s,u),NE(o,i,u)))}function IE(s,i,o){var u=Qn();ku(s,i,o,u)}function ku(s,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qh(s))xE(i,f);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,A=p(E,o);if(f.hasEagerState=!0,f.eagerState=A,$n(A,E))return Oh(s,i,f,0),lt===null&&Nh(),!1}catch{}finally{}if(o=Xm(s,i,f,u),o!==null)return xn(o,s,u),NE(o,i,u),!0}return!1}function wp(s,i,o,u){if(u={lane:2,revertLane:cg(),action:u,hasEagerState:!1,eagerState:null,next:null},Qh(s)){if(i)throw Error(r(479))}else i=Xm(s,o,u,2),i!==null&&xn(i,s,2)}function Qh(s){var i=s.alternate;return s===Pe||i!==null&&i===Pe}function xE(s,i){Ho=Bh=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function NE(s,i,o){if((o&4194176)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,pi(s,o)}}var ts={readContext:_n,use:$h,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It};ts.useCacheRefresh=It,ts.useMemoCache=It,ts.useHostTransitionStatus=It,ts.useFormState=It,ts.useActionState=It,ts.useOptimistic=It;var Ua={readContext:_n,use:$h,useCallback:function(s,i){return Pn().memoizedState=[s,i===void 0?null:i],s},useContext:_n,useEffect:pE,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,Gh(4194308,4,_E.bind(null,i,s),o)},useLayoutEffect:function(s,i){return Gh(4194308,4,s,i)},useInsertionEffect:function(s,i){Gh(4,2,s,i)},useMemo:function(s,i){var o=Pn();i=i===void 0?null:i;var u=s();if(La){zr(!0);try{s()}finally{zr(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=Pn();if(o!==void 0){var f=o(i);if(La){zr(!0);try{o(i)}finally{zr(!1)}}}else f=i;return u.memoizedState=u.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},u.queue=s,s=s.dispatch=MI.bind(null,Pe,s),[u.memoizedState,s]},useRef:function(s){var i=Pn();return s={current:s},i.memoizedState=s},useState:function(s){s=mp(s);var i=s.queue,o=IE.bind(null,Pe,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:yp,useDeferredValue:function(s,i){var o=Pn();return _p(o,s,i)},useTransition:function(){var s=mp(!1);return s=TE.bind(null,Pe,s.queue,!0,!1),Pn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Pe,f=Pn();if(Ye){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),lt===null)throw Error(r(349));(Qe&60)!==0||Z0(u,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,pE(tE.bind(null,u,p,s),[s]),u.flags|=2048,qo(9,eE.bind(null,u,p,o,i),{destroy:void 0},null),o},useId:function(){var s=Pn(),i=lt.identifierPrefix;if(Ye){var o=Ns,u=xs;o=(u&~(1<<32-Sn(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=zh++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=CI++,i=":"+i+"r"+o.toString(32)+":";return s.memoizedState=i},useCacheRefresh:function(){return Pn().memoizedState=DI.bind(null,Pe)}};Ua.useMemoCache=hp,Ua.useHostTransitionStatus=Ep,Ua.useFormState=cE,Ua.useActionState=cE,Ua.useOptimistic=function(s){var i=Pn();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=wp.bind(null,Pe,!0,o),o.dispatch=i,[s,i]};var xi={readContext:_n,use:$h,useCallback:EE,useContext:_n,useEffect:gp,useImperativeHandle:vE,useInsertionEffect:gE,useLayoutEffect:yE,useMemo:wE,useReducer:qh,useRef:mE,useState:function(){return qh(Ds)},useDebugValue:yp,useDeferredValue:function(s,i){var o=Mt();return bE(o,nt.memoizedState,s,i)},useTransition:function(){var s=qh(Ds)[0],i=Mt().memoizedState;return[typeof s=="boolean"?s:Mu(s),i]},useSyncExternalStore:J0,useId:RE};xi.useCacheRefresh=CE,xi.useMemoCache=hp,xi.useHostTransitionStatus=Ep,xi.useFormState=hE,xi.useActionState=hE,xi.useOptimistic=function(s,i){var o=Mt();return sE(o,nt,s,i)};var ja={readContext:_n,use:$h,useCallback:EE,useContext:_n,useEffect:gp,useImperativeHandle:vE,useInsertionEffect:gE,useLayoutEffect:yE,useMemo:wE,useReducer:dp,useRef:mE,useState:function(){return dp(Ds)},useDebugValue:yp,useDeferredValue:function(s,i){var o=Mt();return nt===null?_p(o,s,i):bE(o,nt.memoizedState,s,i)},useTransition:function(){var s=dp(Ds)[0],i=Mt().memoizedState;return[typeof s=="boolean"?s:Mu(s),i]},useSyncExternalStore:J0,useId:RE};ja.useCacheRefresh=CE,ja.useMemoCache=hp,ja.useHostTransitionStatus=Ep,ja.useFormState=dE,ja.useActionState=dE,ja.useOptimistic=function(s,i){var o=Mt();return nt!==null?sE(o,nt,s,i):(o.baseState=s,[s,o.queue.dispatch])};function bp(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:D({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Tp={isMounted:function(s){return(s=s._reactInternals)?he(s)===s:!1},enqueueSetState:function(s,i,o){s=s._reactInternals;var u=Qn(),f=Di(u);f.payload=i,o!=null&&(f.callback=o),i=Mi(s,f,u),i!==null&&(xn(i,s,u),Lu(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=Qn(),f=Di(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Mi(s,f,u),i!==null&&(xn(i,s,u),Lu(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=Qn(),u=Di(o);u.tag=2,i!=null&&(u.callback=i),i=Mi(s,u,o),i!==null&&(xn(i,s,o),Lu(i,s,o))}};function OE(s,i,o,u,f,p,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,E):i.prototype&&i.prototype.isPureReactComponent?!wu(o,u)||!wu(f,p):!0}function DE(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Tp.enqueueReplaceState(i,i.state,null)}function Fa(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=D({},o));for(var f in s)o[f]===void 0&&(o[f]=s[f])}return o}var Wh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ME(s){Wh(s)}function kE(s){console.error(s)}function PE(s){Wh(s)}function Xh(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function VE(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ap(s,i,o){return o=Di(o),o.tag=3,o.payload={element:null},o.callback=function(){Xh(s,i)},o}function LE(s){return s=Di(s),s.tag=3,s}function UE(s,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;s.payload=function(){return f(p)},s.callback=function(){VE(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){VE(i,o,u),typeof f!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function kI(s,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Vu(i,o,f,!0),o=hr.current,o!==null){switch(o.tag){case 13:return es===null?ig():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===ep?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),og(s,u,f)),!1;case 22:return o.flags|=65536,u===ep?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),og(s,u,f)),!1}throw Error(r(435,o.tag))}return og(s,u,f),ig(),!1}if(Ye)return i=hr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Zm&&(s=Error(r(422),{cause:u}),Su(lr(s,o)))):(u!==Zm&&(i=Error(r(423),{cause:u}),Su(lr(i,o))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,u=lr(u,o),f=Ap(s.stateNode,u,f),jp(s,f),bt!==4&&(bt=2)),!1;var p=Error(r(520),{cause:u});if(p=lr(p,o),qu===null?qu=[p]:qu.push(p),bt!==4&&(bt=2),i===null)return!0;u=lr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=f&-f,o.lanes|=s,s=Ap(o.stateNode,u,s),jp(o,s),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ji===null||!ji.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=LE(f),UE(f,s,o,u),jp(o,f),!1}o=o.return}while(o!==null);return!1}var jE=Error(r(461)),Zt=!1;function ln(s,i,o,u){i.child=s===null?$0(i,null,o,u):Pa(i,s.child,o,u)}function FE(s,i,o,u,f){o=o.render;var p=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return za(i),u=op(s,i,o,E,p,f),A=lp(),s!==null&&!Zt?(up(s,i,f),Ms(s,i,f)):(Ye&&A&&Ym(i),i.flags|=1,ln(s,i,u,f),i.child)}function BE(s,i,o,u,f){if(s===null){var p=o.type;return typeof p=="function"&&!Kp(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,zE(s,i,p,u,f)):(s=tf(o.type,null,u,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(p=s.child,!Mp(s,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:wu,o(E,u)&&s.ref===i.ref)return Ms(s,i,f)}return i.flags|=1,s=Li(p,u),s.ref=i.ref,s.return=i,i.child=s}function zE(s,i,o,u,f){if(s!==null){var p=s.memoizedProps;if(wu(p,u)&&s.ref===i.ref)if(Zt=!1,i.pendingProps=u=p,Mp(s,f))(s.flags&131072)!==0&&(Zt=!0);else return i.lanes=s.lanes,Ms(s,i,f)}return Sp(s,i,o,u,f)}function HE(s,i,o){var u=i.pendingProps,f=u.children,p=(i.stateNode._pendingVisibility&2)!==0,E=s!==null?s.memoizedState:null;if(Pu(s,i),u.mode==="hidden"||p){if((i.flags&128)!==0){if(u=E!==null?E.baseLanes|o:o,s!==null){for(f=i.child=s.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~u}else i.childLanes=0,i.child=null;return $E(s,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Fh(i,E!==null?E.cachePool:null),E!==null?q0(i,E):tp(),G0(i);else return i.lanes=i.childLanes=536870912,$E(s,i,E!==null?E.baseLanes|o:o,o)}else E!==null?(Fh(i,E.cachePool),q0(i,E),Ci(),i.memoizedState=null):(s!==null&&Fh(i,null),tp(),Ci());return ln(s,i,f,o),i.child}function $E(s,i,o,u){var f=ip();return f=f===null?null:{parent:Ht._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},s!==null&&Fh(i,null),tp(),G0(i),s!==null&&Vu(s,i,u,!0),null}function Pu(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=2097664)}}function Sp(s,i,o,u,f){return za(i),o=op(s,i,o,u,void 0,f),u=lp(),s!==null&&!Zt?(up(s,i,f),Ms(s,i,f)):(Ye&&u&&Ym(i),i.flags|=1,ln(s,i,o,f),i.child)}function qE(s,i,o,u,f,p){return za(i),i.updateQueue=null,o=Y0(i,u,o,f),X0(s),u=lp(),s!==null&&!Zt?(up(s,i,p),Ms(s,i,p)):(Ye&&u&&Ym(i),i.flags|=1,ln(s,i,o,p),i.child)}function GE(s,i,o,u,f){if(za(i),i.stateNode===null){var p=Vo,E=o.contextType;typeof E=="object"&&E!==null&&(p=_n(E)),p=new o(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Tp,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},Lp(i),E=o.contextType,p.context=typeof E=="object"&&E!==null?_n(E):Vo,p.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(bp(i,o,E,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Tp.enqueueReplaceState(p,p.state,null),ju(i,u,p,f),Uu(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){p=i.stateNode;var A=i.memoizedProps,k=Fa(o,A);p.props=k;var z=p.context,ee=o.contextType;E=Vo,typeof ee=="object"&&ee!==null&&(E=_n(ee));var ae=o.getDerivedStateFromProps;ee=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||z!==E)&&DE(i,p,u,E),Oi=!1;var Q=i.memoizedState;p.state=Q,ju(i,u,p,f),Uu(),z=i.memoizedState,A||Q!==z||Oi?(typeof ae=="function"&&(bp(i,o,ae,u),z=i.memoizedState),(k=Oi||OE(i,o,k,u,Q,z,E))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=z),p.props=u,p.state=z,p.context=E,u=k):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,Up(s,i),E=i.memoizedProps,ee=Fa(o,E),p.props=ee,ae=i.pendingProps,Q=p.context,z=o.contextType,k=Vo,typeof z=="object"&&z!==null&&(k=_n(z)),A=o.getDerivedStateFromProps,(z=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ae||Q!==k)&&DE(i,p,u,k),Oi=!1,Q=i.memoizedState,p.state=Q,ju(i,u,p,f),Uu();var Z=i.memoizedState;E!==ae||Q!==Z||Oi||s!==null&&s.dependencies!==null&&Yh(s.dependencies)?(typeof A=="function"&&(bp(i,o,A,u),Z=i.memoizedState),(ee=Oi||OE(i,o,ee,u,Q,Z,k)||s!==null&&s.dependencies!==null&&Yh(s.dependencies))?(z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Z,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Z,k)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Z),p.props=u,p.state=Z,p.context=k,u=ee):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=1024),u=!1)}return p=u,Pu(s,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,s!==null&&u?(i.child=Pa(i,s.child,null,f),i.child=Pa(i,null,o,f)):ln(s,i,o,f),i.memoizedState=p.state,s=i.child):s=Ms(s,i,f),s}function KE(s,i,o,u){return Au(),i.flags|=256,ln(s,i,o,u),i.child}var Rp={dehydrated:null,treeContext:null,retryLane:0};function Cp(s){return{baseLanes:s,cachePool:W0()}}function Ip(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=pr),s}function QE(s,i,o){var u=i.pendingProps,f=!1,p=(i.flags&128)!==0,E;if((E=p)||(E=s!==null&&s.memoizedState===null?!1:(zt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,s===null){if(Ye){if(f?Ri(i):Ci(),Ye){var A=on,k;if(k=A){e:{for(k=A,A=Zr;k.nodeType!==8;){if(!A){A=null;break e}if(k=Ir(k.nextSibling),k===null){A=null;break e}}A=k}A!==null?(i.memoizedState={dehydrated:A,treeContext:Da!==null?{id:xs,overflow:Ns}:null,retryLane:536870912},k=mr(18,null,null,0),k.stateNode=A,k.return=i,i.child=k,In=i,on=null,k=!0):k=!1}k||ka(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?i.lanes=16:i.lanes=536870912,null;Os(i)}return A=u.children,u=u.fallback,f?(Ci(),f=i.mode,A=Np({mode:"hidden",children:A},f),u=$a(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=Cp(o),f.childLanes=Ip(s,E,o),i.memoizedState=Rp,u):(Ri(i),xp(i,A))}if(k=s.memoizedState,k!==null&&(A=k.dehydrated,A!==null)){if(p)i.flags&256?(Ri(i),i.flags&=-257,i=Op(s,i,o)):i.memoizedState!==null?(Ci(),i.child=s.child,i.flags|=128,i=null):(Ci(),f=u.fallback,A=i.mode,u=Np({mode:"visible",children:u.children},A),f=$a(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Pa(i,s.child,null,o),u=i.child,u.memoizedState=Cp(o),u.childLanes=Ip(s,E,o),i.memoizedState=Rp,i=f);else if(Ri(i),A.data==="$!"){if(E=A.nextSibling&&A.nextSibling.dataset,E)var z=E.dgst;E=z,u=Error(r(419)),u.stack="",u.digest=E,Su({value:u,source:null,stack:null}),i=Op(s,i,o)}else if(Zt||Vu(s,i,o,!1),E=(o&s.childLanes)!==0,Zt||E){if(E=lt,E!==null){if(u=o&-o,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==k.retryLane)throw k.retryLane=u,Si(s,u),xn(E,s,u),jE}A.data==="$?"||ig(),i=Op(s,i,o)}else A.data==="$?"?(i.flags|=128,i.child=s.child,i=WI.bind(null,s),A._reactRetry=i,i=null):(s=k.treeContext,on=Ir(A.nextSibling),In=i,Ye=!0,Rr=null,Zr=!1,s!==null&&(ur[cr++]=xs,ur[cr++]=Ns,ur[cr++]=Da,xs=s.id,Ns=s.overflow,Da=i),i=xp(i,u.children),i.flags|=4096);return i}return f?(Ci(),f=u.fallback,A=i.mode,k=s.child,z=k.sibling,u=Li(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&31457280,z!==null?f=Li(z,f):(f=$a(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=s.child.memoizedState,A===null?A=Cp(o):(k=A.cachePool,k!==null?(z=Ht._currentValue,k=k.parent!==z?{parent:z,pool:z}:k):k=W0(),A={baseLanes:A.baseLanes|o,cachePool:k}),f.memoizedState=A,f.childLanes=Ip(s,E,o),i.memoizedState=Rp,u):(Ri(i),o=s.child,s=o.sibling,o=Li(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(E=i.deletions,E===null?(i.deletions=[s],i.flags|=16):E.push(s)),i.child=o,i.memoizedState=null,o)}function xp(s,i){return i=Np({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Np(s,i){return Ew(s,i,0,null)}function Op(s,i,o){return Pa(i,s.child,null,o),s=xp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function WE(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Pp(s.return,i,o)}function Dp(s,i,o,u,f){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function XE(s,i,o){var u=i.pendingProps,f=u.revealOrder,p=u.tail;if(ln(s,i,u.children,o),u=zt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&WE(s,o,i);else if(s.tag===19)WE(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(Ue(zt,u),f){case"forwards":for(o=i.child,f=null;o!==null;)s=o.alternate,s!==null&&jh(s)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Dp(i,!1,f,o,p);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&jh(s)===null){i.child=f;break}s=f.sibling,f.sibling=o,o=f,f=s}Dp(i,!0,o,null,p);break;case"together":Dp(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ms(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Ui|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(Vu(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=Li(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=Li(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Mp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Yh(s)))}function PI(s,i,o){switch(i.tag){case 3:je(i,i.stateNode.containerInfo),Ni(i,Ht,s.memoizedState.cache),Au();break;case 27:case 5:Dn(i);break;case 4:je(i,i.stateNode.containerInfo);break;case 10:Ni(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ri(i),i.flags|=128,null):(o&i.child.childLanes)!==0?QE(s,i,o):(Ri(i),s=Ms(s,i,o),s!==null?s.sibling:null);Ri(i);break;case 19:var f=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Vu(s,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return XE(s,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ue(zt,zt.current),u)break;return null;case 22:case 23:return i.lanes=0,HE(s,i,o);case 24:Ni(i,Ht,s.memoizedState.cache)}return Ms(s,i,o)}function YE(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)Zt=!0;else{if(!Mp(s,o)&&(i.flags&128)===0)return Zt=!1,PI(s,i,o);Zt=(s.flags&131072)!==0}else Zt=!1,Ye&&(i.flags&1048576)!==0&&P0(i,kh,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Kp(u)?(s=Fa(u,s),i.tag=1,i=GE(null,i,u,s,o)):(i.tag=0,i=Sp(null,i,u,s,o));else{if(u!=null){if(f=u.$$typeof,f===O){i.tag=11,i=FE(null,i,u,s,o);break e}else if(f===$){i.tag=14,i=BE(null,i,u,s,o);break e}}throw i=x(u)||u,Error(r(306,i,""))}}return i;case 0:return Sp(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Fa(u,i.pendingProps),GE(s,i,u,f,o);case 3:e:{if(je(i,i.stateNode.containerInfo),s===null)throw Error(r(387));var p=i.pendingProps;f=i.memoizedState,u=f.element,Up(s,i),ju(i,p,null,o);var E=i.memoizedState;if(p=E.cache,Ni(i,Ht,p),p!==f.cache&&Vp(i,[Ht],o,!0),Uu(),p=E.element,f.isDehydrated)if(f={element:p,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=KE(s,i,p,o);break e}else if(p!==u){u=lr(Error(r(424)),i),Su(u),i=KE(s,i,p,o);break e}else for(on=Ir(i.stateNode.containerInfo.firstChild),In=i,Ye=!0,Rr=null,Zr=!0,o=$0(i,null,p,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Au(),p===u){i=Ms(s,i,o);break e}ln(s,i,p,o)}i=i.child}return i;case 26:return Pu(s,i),s===null?(o=eb(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ye||(o=i.type,s=i.pendingProps,u=mf(Rt.current).createElement(o),u[Xt]=i,u[jt]=s,un(u,o,s),mt(u),i.stateNode=u):i.memoizedState=eb(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Dn(i),s===null&&Ye&&(u=i.stateNode=Yw(i.type,i.pendingProps,Rt.current),In=i,Zr=!0,on=Ir(u.firstChild)),u=i.pendingProps.children,s!==null||Ye?ln(s,i,u,o):i.child=Pa(i,null,u,o),Pu(s,i),i.child;case 5:return s===null&&Ye&&((f=u=on)&&(u=hx(u,i.type,i.pendingProps,Zr),u!==null?(i.stateNode=u,In=i,on=Ir(u.firstChild),Zr=!1,f=!0):f=!1),f||ka(i)),Dn(i),f=i.type,p=i.pendingProps,E=s!==null?s.memoizedProps:null,u=p.children,vg(f,p)?u=null:E!==null&&vg(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=op(s,i,II,null,null,o),ec._currentValue=f),Pu(s,i),ln(s,i,u,o),i.child;case 6:return s===null&&Ye&&((s=o=on)&&(o=fx(o,i.pendingProps,Zr),o!==null?(i.stateNode=o,In=i,on=null,s=!0):s=!1),s||ka(i)),null;case 13:return QE(s,i,o);case 4:return je(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Pa(i,null,u,o):ln(s,i,u,o),i.child;case 11:return FE(s,i,i.type,i.pendingProps,o);case 7:return ln(s,i,i.pendingProps,o),i.child;case 8:return ln(s,i,i.pendingProps.children,o),i.child;case 12:return ln(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ni(i,i.type,u.value),ln(s,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,za(i),f=_n(f),u=u(f),i.flags|=1,ln(s,i,u,o),i.child;case 14:return BE(s,i,i.type,i.pendingProps,o);case 15:return zE(s,i,i.type,i.pendingProps,o);case 19:return XE(s,i,o);case 22:return HE(s,i,o);case 24:return za(i),u=_n(Ht),s===null?(f=ip(),f===null&&(f=lt,p=rp(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:u,cache:f},Lp(i),Ni(i,Ht,f)):((s.lanes&o)!==0&&(Up(s,i),ju(i,null,null,o),Uu()),f=s.memoizedState,p=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ni(i,Ht,u)):(u=p.cache,Ni(i,Ht,u),u!==f.cache&&Vp(i,[Ht],o,!0))),ln(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var kp=Le(null),Ba=null,ks=null;function Ni(s,i,o){Ue(kp,i._currentValue),i._currentValue=o}function Ps(s){s._currentValue=kp.current,Ze(kp)}function Pp(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function Vp(s,i,o,u){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var k=0;k<i.length;k++)if(A.context===i[k]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),Pp(p.return,o,s),u||(E=null);break e}p=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),Pp(E,o,s),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===s){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Vu(s,i,o,u){s=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;$n(f.pendingProps.value,E.value)||(s!==null?s.push(A):s=[A])}}else if(f===Wt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(ec):s=[ec])}f=f.return}s!==null&&Vp(i,s,o,u),i.flags|=262144}function Yh(s){for(s=s.firstContext;s!==null;){if(!$n(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function za(s){Ba=s,ks=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function _n(s){return JE(Ba,s)}function Jh(s,i){return Ba===null&&za(s),JE(s,i)}function JE(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ks===null){if(s===null)throw Error(r(308));ks=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else ks=ks.next=i;return o}var Oi=!1;function Lp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Up(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Di(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Mi(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(gt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=Dh(s),M0(s,null,o),i}return Oh(s,u,i,o),Dh(s)}function Lu(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,pi(s,o)}}function jp(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var Fp=!1;function Uu(){if(Fp){var s=zo;if(s!==null)throw s}}function ju(s,i,o,u){Fp=!1;var f=s.updateQueue;Oi=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var k=A,z=k.next;k.next=null,E===null?p=z:E.next=z,E=k;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==E&&(A===null?ee.firstBaseUpdate=z:A.next=z,ee.lastBaseUpdate=k))}if(p!==null){var ae=f.baseState;E=0,ee=z=k=null,A=p;do{var Q=A.lane&-536870913,Z=Q!==A.lane;if(Z?(Qe&Q)===Q:(u&Q)===Q){Q!==0&&Q===Bo&&(Fp=!0),ee!==null&&(ee=ee.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ge=s,Ne=A;Q=i;var Tt=o;switch(Ne.tag){case 1:if(ge=Ne.payload,typeof ge=="function"){ae=ge.call(Tt,ae,Q);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ne.payload,Q=typeof ge=="function"?ge.call(Tt,ae,Q):ge,Q==null)break e;ae=D({},ae,Q);break e;case 2:Oi=!0}}Q=A.callback,Q!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(z=ee=Z,k=ae):ee=ee.next=Z,E|=Q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ee===null&&(k=ae),f.baseState=k,f.firstBaseUpdate=z,f.lastBaseUpdate=ee,p===null&&(f.shared.lanes=0),Ui|=E,s.lanes=E,s.memoizedState=ae}}function ZE(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function ew(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)ZE(o[s],i)}function Fu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&s)===s){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){ot(i,i.return,A)}}function ki(s,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&s)===s){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var k=o;try{A()}catch(z){ot(f,k,z)}}}u=u.next}while(u!==p)}}catch(z){ot(i,i.return,z)}}function tw(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{ew(i,o)}catch(u){ot(s,s.return,u)}}}function nw(s,i,o){o.props=Fa(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){ot(s,i,u)}}function Ha(s,i){try{var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 26:case 27:case 5:var f=u;break;default:f=u}typeof o=="function"?s.refCleanup=o(f):o.current=f}}catch(p){ot(s,i,p)}}function qn(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ot(s,i,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ot(s,i,f)}else o.current=null}function rw(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ot(s,s.return,f)}}function sw(s,i,o){try{var u=s.stateNode;ax(u,s.type,o,i),u[jt]=i}catch(f){ot(s,s.return,f)}}function iw(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function Bp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||iw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zp(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(s,i):o.insertBefore(s,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(s,o)):(i=o,i.appendChild(s)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=df));else if(u!==4&&u!==27&&(s=s.child,s!==null))for(zp(s,i,o),s=s.sibling;s!==null;)zp(s,i,o),s=s.sibling}function Zh(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&u!==27&&(s=s.child,s!==null))for(Zh(s,i,o),s=s.sibling;s!==null;)Zh(s,i,o),s=s.sibling}var Vs=!1,wt=!1,Hp=!1,aw=typeof WeakSet=="function"?WeakSet:Set,en=null,ow=!1;function VI(s,i){if(s=s.containerInfo,yg=Ef,s=A0(s),qm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,A=-1,k=-1,z=0,ee=0,ae=s,Q=null;t:for(;;){for(var Z;ae!==o||f!==0&&ae.nodeType!==3||(A=E+f),ae!==p||u!==0&&ae.nodeType!==3||(k=E+u),ae.nodeType===3&&(E+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)Q=ae,ae=Z;for(;;){if(ae===s)break t;if(Q===o&&++z===f&&(A=E),Q===p&&++ee===u&&(k=E),(Z=ae.nextSibling)!==null)break;ae=Q,Q=ae.parentNode}ae=Z}o=A===-1||k===-1?null:{start:A,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(_g={focusedElem:s,selectionRange:o},Ef=!1,en=i;en!==null;)if(i=en,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,en=s;else for(;en!==null;){switch(i=en,p=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var ge=Fa(o.type,f,o.elementType===o.type);s=u.getSnapshotBeforeUpdate(ge,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){ot(o,o.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)bg(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":bg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,en=s;break}en=i.return}return ge=ow,ow=!1,ge}function lw(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Us(s,o),u&4&&Fu(5,o);break;case 1:if(Us(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(A){ot(o,o.return,A)}else{var f=Fa(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(f,i,s.__reactInternalSnapshotBeforeUpdate)}catch(A){ot(o,o.return,A)}}u&64&&tw(o),u&512&&Ha(o,o.return);break;case 3:if(Us(s,o),u&64&&(u=o.updateQueue,u!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{ew(u,s)}catch(A){ot(o,o.return,A)}}break;case 26:Us(s,o),u&512&&Ha(o,o.return);break;case 27:case 5:Us(s,o),i===null&&u&4&&rw(o),u&512&&Ha(o,o.return);break;case 12:Us(s,o);break;case 13:Us(s,o),u&4&&hw(s,o);break;case 22:if(f=o.memoizedState!==null||Vs,!f){i=i!==null&&i.memoizedState!==null||wt;var p=Vs,E=wt;Vs=f,(wt=i)&&!E?Pi(s,o,(o.subtreeFlags&8772)!==0):Us(s,o),Vs=p,wt=E}u&512&&(o.memoizedProps.mode==="manual"?Ha(o,o.return):qn(o,o.return));break;default:Us(s,o)}}function uw(s){var i=s.alternate;i!==null&&(s.alternate=null,uw(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&va(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kt=null,Gn=!1;function Ls(s,i,o){for(o=o.child;o!==null;)cw(s,i,o),o=o.sibling}function cw(s,i,o){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ci,o)}catch{}switch(o.tag){case 26:wt||qn(o,i),Ls(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wt||qn(o,i);var u=kt,f=Gn;for(kt=o.stateNode,Ls(s,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);va(o),kt=u,Gn=f;break;case 5:wt||qn(o,i);case 6:f=kt;var p=Gn;if(kt=null,Ls(s,i,o),kt=f,Gn=p,kt!==null)if(Gn)try{s=kt,u=o.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)}catch(E){ot(o,i,E)}else try{kt.removeChild(o.stateNode)}catch(E){ot(o,i,E)}break;case 18:kt!==null&&(Gn?(i=kt,o=o.stateNode,i.nodeType===8?wg(i.parentNode,o):i.nodeType===1&&wg(i,o),sc(i)):wg(kt,o.stateNode));break;case 4:u=kt,f=Gn,kt=o.stateNode.containerInfo,Gn=!0,Ls(s,i,o),kt=u,Gn=f;break;case 0:case 11:case 14:case 15:wt||ki(2,o,i),wt||ki(4,o,i),Ls(s,i,o);break;case 1:wt||(qn(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&nw(o,i,u)),Ls(s,i,o);break;case 21:Ls(s,i,o);break;case 22:wt||qn(o,i),wt=(u=wt)||o.memoizedState!==null,Ls(s,i,o),wt=u;break;default:Ls(s,i,o)}}function hw(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sc(s)}catch(o){ot(i,i.return,o)}}function LI(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new aw),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new aw),i;default:throw Error(r(435,s.tag))}}function $p(s,i){var o=LI(s);i.forEach(function(u){var f=XI.bind(null,s,u);o.has(u)||(o.add(u),u.then(f,f))})}function fr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=s,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:case 5:kt=A.stateNode,Gn=!1;break e;case 3:kt=A.stateNode.containerInfo,Gn=!0;break e;case 4:kt=A.stateNode.containerInfo,Gn=!0;break e}A=A.return}if(kt===null)throw Error(r(160));cw(p,E,f),kt=null,Gn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)fw(i,s),i=i.sibling}var Cr=null;function fw(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:fr(i,s),dr(s),u&4&&(ki(3,s,s.return),Fu(3,s),ki(5,s,s.return));break;case 1:fr(i,s),dr(s),u&512&&(wt||o===null||qn(o,o.return)),u&64&&Vs&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Cr;if(fr(i,s),dr(s),u&512&&(wt||o===null||qn(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[yi]||p[Xt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),un(p,u,o),p[Xt]=s,mt(p),u=p;break e;case"link":var E=rb("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(p=E[A],p.getAttribute("href")===(o.href==null?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}p=f.createElement(u),un(p,u,o),f.head.appendChild(p);break;case"meta":if(E=rb("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(p=E[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}p=f.createElement(u),un(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Xt]=s,mt(p),u=p}s.stateNode=u}else sb(f,s.type,s.stateNode);else s.stateNode=nb(f,u,s.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?sb(f,s.type,s.stateNode):nb(f,u,s.memoizedProps)):u===null&&s.stateNode!==null&&sw(s,s.memoizedProps,o.memoizedProps)}break;case 27:if(u&4&&s.alternate===null){f=s.stateNode,p=s.memoizedProps;try{for(var k=f.firstChild;k;){var z=k.nextSibling,ee=k.nodeName;k[yi]||ee==="HEAD"||ee==="BODY"||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&k.rel.toLowerCase()==="stylesheet"||f.removeChild(k),k=z}for(var ae=s.type,Q=f.attributes;Q.length;)f.removeAttributeNode(Q[0]);un(f,ae,p),f[Xt]=s,f[jt]=p}catch(ge){ot(s,s.return,ge)}}case 5:if(fr(i,s),dr(s),u&512&&(wt||o===null||qn(o,o.return)),s.flags&32){f=s.stateNode;try{rr(f,"")}catch(ge){ot(s,s.return,ge)}}u&4&&s.stateNode!=null&&(f=s.memoizedProps,sw(s,f,o!==null?o.memoizedProps:f)),u&1024&&(Hp=!0);break;case 6:if(fr(i,s),dr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(ge){ot(s,s.return,ge)}}break;case 3:if(yf=null,f=Cr,Cr=pf(i.containerInfo),fr(i,s),Cr=f,dr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{sc(i.containerInfo)}catch(ge){ot(s,s.return,ge)}Hp&&(Hp=!1,dw(s));break;case 4:u=Cr,Cr=pf(s.stateNode.containerInfo),fr(i,s),dr(s),Cr=u;break;case 12:fr(i,s),dr(s);break;case 13:fr(i,s),dr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zp=Ut()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,$p(s,u)));break;case 22:if(u&512&&(wt||o===null||qn(o,o.return)),k=s.memoizedState!==null,z=o!==null&&o.memoizedState!==null,ee=Vs,ae=wt,Vs=ee||k,wt=ae||z,fr(i,s),wt=ae,Vs=ee,dr(s),i=s.stateNode,i._current=s,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,u&8192&&(i._visibility=k?i._visibility&-2:i._visibility|1,k&&(i=Vs||wt,o===null||z||i||Go(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(o=null,i=s;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){z=o=i;try{if(f=z.stateNode,k)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{E=z.stateNode,A=z.memoizedProps.style;var Z=A!=null&&A.hasOwnProperty("display")?A.display:null;E.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ge){ot(z,z.return,ge)}}}else if(i.tag===6){if(o===null){z=i;try{z.stateNode.nodeValue=k?"":z.memoizedProps}catch(ge){ot(z,z.return,ge)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,$p(s,o))));break;case 19:fr(i,s),dr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,$p(s,u)));break;case 21:break;default:fr(i,s),dr(s)}}function dr(s){var i=s.flags;if(i&2){try{if(s.tag!==27){e:{for(var o=s.return;o!==null;){if(iw(o)){var u=o;break e}o=o.return}throw Error(r(160))}switch(u.tag){case 27:var f=u.stateNode,p=Bp(s);Zh(s,p,f);break;case 5:var E=u.stateNode;u.flags&32&&(rr(E,""),u.flags&=-33);var A=Bp(s);Zh(s,A,E);break;case 3:case 4:var k=u.stateNode.containerInfo,z=Bp(s);zp(s,z,k);break;default:throw Error(r(161))}}}catch(ee){ot(s,s.return,ee)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function dw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;dw(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Us(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)lw(s,i.alternate,i),i=i.sibling}function Go(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ki(4,i,i.return),Go(i);break;case 1:qn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&nw(i,i.return,o),Go(i);break;case 26:case 27:case 5:qn(i,i.return),Go(i);break;case 22:qn(i,i.return),i.memoizedState===null&&Go(i);break;default:Go(i)}s=s.sibling}}function Pi(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=s,p=i,E=p.flags;switch(p.tag){case 0:case 11:case 15:Pi(f,p,o),Fu(4,p);break;case 1:if(Pi(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){ot(u,u.return,z)}if(u=p,f=u.updateQueue,f!==null){var A=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)ZE(k[f],A)}catch(z){ot(u,u.return,z)}}o&&E&64&&tw(p),Ha(p,p.return);break;case 26:case 27:case 5:Pi(f,p,o),o&&u===null&&E&4&&rw(p),Ha(p,p.return);break;case 12:Pi(f,p,o);break;case 13:Pi(f,p,o),o&&E&4&&hw(f,p);break;case 22:p.memoizedState===null&&Pi(f,p,o),Ha(p,p.return);break;default:Pi(f,p,o)}i=i.sibling}}function qp(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Nu(o))}function Gp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Nu(s))}function Vi(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)mw(s,i,o,u),i=i.sibling}function mw(s,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Vi(s,i,o,u),f&2048&&Fu(9,i);break;case 3:Vi(s,i,o,u),f&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Nu(s)));break;case 12:if(f&2048){Vi(s,i,o,u),s=i.stateNode;try{var p=i.memoizedProps,E=p.id,A=p.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){ot(i,i.return,k)}}else Vi(s,i,o,u);break;case 23:break;case 22:p=i.stateNode,i.memoizedState!==null?p._visibility&4?Vi(s,i,o,u):Bu(s,i):p._visibility&4?Vi(s,i,o,u):(p._visibility|=4,Ko(s,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&qp(i.alternate,i);break;case 24:Vi(s,i,o,u),f&2048&&Gp(i.alternate,i);break;default:Vi(s,i,o,u)}}function Ko(s,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=s,E=i,A=o,k=u,z=E.flags;switch(E.tag){case 0:case 11:case 15:Ko(p,E,A,k,f),Fu(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&4?Ko(p,E,A,k,f):Bu(p,E):(ee._visibility|=4,Ko(p,E,A,k,f)),f&&z&2048&&qp(E.alternate,E);break;case 24:Ko(p,E,A,k,f),f&&z&2048&&Gp(E.alternate,E);break;default:Ko(p,E,A,k,f)}i=i.sibling}}function Bu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,f=u.flags;switch(u.tag){case 22:Bu(o,u),f&2048&&qp(u.alternate,u);break;case 24:Bu(o,u),f&2048&&Gp(u.alternate,u);break;default:Bu(o,u)}i=i.sibling}}var zu=8192;function Qo(s){if(s.subtreeFlags&zu)for(s=s.child;s!==null;)pw(s),s=s.sibling}function pw(s){switch(s.tag){case 26:Qo(s),s.flags&zu&&s.memoizedState!==null&&Sx(Cr,s.memoizedState,s.memoizedProps);break;case 5:Qo(s);break;case 3:case 4:var i=Cr;Cr=pf(s.stateNode.containerInfo),Qo(s),Cr=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=zu,zu=16777216,Qo(s),zu=i):Qo(s));break;default:Qo(s)}}function gw(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Hu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];en=u,_w(u,s)}gw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)yw(s),s=s.sibling}function yw(s){switch(s.tag){case 0:case 11:case 15:Hu(s),s.flags&2048&&ki(9,s,s.return);break;case 3:Hu(s);break;case 12:Hu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&4&&(s.return===null||s.return.tag!==13)?(i._visibility&=-5,ef(s)):Hu(s);break;default:Hu(s)}}function ef(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];en=u,_w(u,s)}gw(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ki(8,i,i.return),ef(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,ef(i));break;default:ef(i)}s=s.sibling}}function _w(s,i){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:ki(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Nu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else e:for(o=s;en!==null;){u=en;var f=u.sibling,p=u.return;if(uw(u),u===o){en=null;break e}if(f!==null){f.return=p,en=f;break e}en=p}}}function UI(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(s,i,o,u){return new UI(s,i,o,u)}function Kp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Li(s,i){var o=s.alternate;return o===null?(o=mr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&31457280,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function vw(s,i){s.flags&=31457282;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function tf(s,i,o,u,f,p){var E=0;if(u=s,typeof s=="function")Kp(s)&&(E=1);else if(typeof s=="string")E=Tx(s,o,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case m:return $a(o.children,f,p,i);case g:E=8,f|=24;break;case _:return s=mr(12,o,i,f|2),s.elementType=_,s.lanes=p,s;case L:return s=mr(13,o,i,f),s.elementType=L,s.lanes=p,s;case P:return s=mr(19,o,i,f),s.elementType=P,s.lanes=p,s;case G:return Ew(o,f,p,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case w:case R:E=10;break e;case T:E=9;break e;case O:E=11;break e;case $:E=14;break e;case B:E=16,u=null;break e}E=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=mr(E,o,i,f),i.elementType=s,i.type=u,i.lanes=p,i}function $a(s,i,o,u){return s=mr(7,s,u,i),s.lanes=o,s}function Ew(s,i,o,u){s=mr(22,s,u,i),s.elementType=G,s.lanes=o;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var p=f._current;if(p===null)throw Error(r(456));if((f._pendingVisibility&2)===0){var E=Si(p,2);E!==null&&(f._pendingVisibility|=2,xn(E,p,2))}},attach:function(){var p=f._current;if(p===null)throw Error(r(456));if((f._pendingVisibility&2)!==0){var E=Si(p,2);E!==null&&(f._pendingVisibility&=-3,xn(E,p,2))}}};return s.stateNode=f,s}function Qp(s,i,o){return s=mr(6,s,null,i),s.lanes=o,s}function Wp(s,i,o){return i=mr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function js(s){s.flags|=4}function ww(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!ib(i)){if(i=hr.current,i!==null&&((Qe&4194176)===Qe?es!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||i!==es))throw Cu=ep,U0;s.flags|=8192}}function nf(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?di():536870912,s.lanes|=i,Xo|=i)}function $u(s,i){if(!Ye)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function pt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var f=s.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&31457280,u|=f.flags&31457280,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function jI(s,i,o){var u=i.pendingProps;switch(Jm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ps(Ht),gn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Tu(i)?js(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Rr!==null&&(rg(Rr),Rr=null))),pt(i),null;case 26:return o=i.memoizedState,s===null?(js(i),o!==null?(pt(i),ww(i,o)):(pt(i),i.flags&=-16777217)):o?o!==s.memoizedState?(js(i),pt(i),ww(i,o)):(pt(i),i.flags&=-16777217):(s.memoizedProps!==u&&js(i),pt(i),i.flags&=-16777217),null;case 27:wr(i),o=Rt.current;var f=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&js(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return pt(i),null}s=dt.current,Tu(i)?V0(i):(s=Yw(f,u,o),i.stateNode=s,js(i))}return pt(i),null;case 5:if(wr(i),o=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&js(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return pt(i),null}if(s=dt.current,Tu(i))V0(i);else{switch(f=mf(Rt.current),s){case 1:s=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=f.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}s[Xt]=i,s[jt]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=s;e:switch(un(s,o,u),o){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&js(i)}}return pt(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&js(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Rt.current,Tu(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,f=In,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}s[Xt]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||qw(s.nodeValue,o)),s||ka(i)}else s=mf(s).createTextNode(u),s[Xt]=i,i.stateNode=s}return pt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=Tu(i),u!==null&&u.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Xt]=i}else Au(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),f=!1}else Rr!==null&&(rg(Rr),Rr=null),f=!0;if(!f)return i.flags&256?(Os(i),i):(Os(i),null)}if(Os(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,s=s!==null&&s.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==s&&o&&(i.child.flags|=8192),nf(i,i.updateQueue),pt(i),null;case 4:return gn(),s===null&&mg(i.stateNode.containerInfo),pt(i),null;case 10:return Ps(i.type),pt(i),null;case 19:if(Ze(zt),f=i.memoizedState,f===null)return pt(i),null;if(u=(i.flags&128)!==0,p=f.rendering,p===null)if(u)$u(f,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(p=jh(s),p!==null){for(i.flags|=128,$u(f,!1),s=p.updateQueue,i.updateQueue=s,nf(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)vw(o,s),o=o.sibling;return Ue(zt,zt.current&1|2),i.child}s=s.sibling}f.tail!==null&&Ut()>rf&&(i.flags|=128,u=!0,$u(f,!1),i.lanes=4194304)}else{if(!u)if(s=jh(p),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,nf(i,s),$u(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ye)return pt(i),null}else 2*Ut()-f.renderingStartTime>rf&&o!==536870912&&(i.flags|=128,u=!0,$u(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(s=f.last,s!==null?s.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ut(),i.sibling=null,s=zt.current,Ue(zt,u?s&1|2:s&1),i):(pt(i),null);case 22:case 23:return Os(i),np(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),o=i.updateQueue,o!==null&&nf(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&Ze(Va),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ps(Ht),pt(i),null;case 25:return null}throw Error(r(156,i.tag))}function FI(s,i){switch(Jm(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Ps(Ht),gn(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return wr(i),null;case 13:if(Os(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Au()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return Ze(zt),null;case 4:return gn(),null;case 10:return Ps(i.type),null;case 22:case 23:return Os(i),np(),s!==null&&Ze(Va),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Ps(Ht),null;case 25:return null;default:return null}}function bw(s,i){switch(Jm(i),i.tag){case 3:Ps(Ht),gn();break;case 26:case 27:case 5:wr(i);break;case 4:gn();break;case 13:Os(i);break;case 19:Ze(zt);break;case 10:Ps(i.type);break;case 22:case 23:Os(i),np(),s!==null&&Ze(Va);break;case 24:Ps(Ht)}}var BI={getCacheForType:function(s){var i=_n(Ht),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o}},zI=typeof WeakMap=="function"?WeakMap:Map,gt=0,lt=null,ze=null,Qe=0,ut=0,Kn=null,Fs=!1,Wo=!1,Xp=!1,Bs=0,bt=0,Ui=0,qa=0,Yp=0,pr=0,Xo=0,qu=null,ns=null,Jp=!1,Zp=0,rf=1/0,sf=null,ji=null,af=!1,Ga=null,Gu=0,eg=0,tg=null,Ku=0,ng=null;function Qn(){if((gt&2)!==0&&Qe!==0)return Qe&-Qe;if(C.T!==null){var s=Bo;return s!==0?s:cg()}return hh()}function Tw(){pr===0&&(pr=(Qe&536870912)===0||Ye?iu():536870912);var s=hr.current;return s!==null&&(s.flags|=32),pr}function xn(s,i,o){(s===lt&&ut===2||s.cancelPendingCommit!==null)&&(Yo(s,0),zs(s,Qe,pr,!1)),Ct(s,o),((gt&2)===0||s!==lt)&&(s===lt&&((gt&2)===0&&(qa|=o),bt===4&&zs(s,Qe,pr,!1)),rs(s))}function Aw(s,i,o){if((gt&6)!==0)throw Error(r(327));var u=!o&&(i&60)===0&&(i&s.expiredLanes)===0||fi(s,i),f=u?qI(s,i):ag(s,i,!0),p=u;do{if(f===0){Wo&&!u&&zs(s,i,0,!1);break}else if(f===6)zs(s,i,0,!Fs);else{if(o=s.current.alternate,p&&!HI(o)){f=ag(s,i,!1),p=!1;continue}if(f===2){if(p=i,s.errorRecoveryDisabledLanes&p)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=s;f=qu;var k=A.current.memoizedState.isDehydrated;if(k&&(Yo(A,E).flags|=256),E=ag(A,E,!1),E!==2){if(Xp&&!k){A.errorRecoveryDisabledLanes|=p,qa|=p,f=4;break e}p=ns,ns=f,p!==null&&rg(p)}f=E}if(p=!1,f!==2)continue}}if(f===1){Yo(s,0),zs(s,i,0,!0);break}e:{switch(u=s,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){zs(u,i,pr,!Fs);break e}break;case 2:ns=null;break;case 3:case 5:break;default:throw Error(r(329))}if(u.finishedWork=o,u.finishedLanes=i,(i&62914560)===i&&(p=Zp+300-Ut(),10<p)){if(zs(u,i,pr,!Fs),tr(u,0)!==0)break e;u.timeoutHandle=Qw(Sw.bind(null,u,o,ns,sf,Jp,i,pr,qa,Xo,Fs,2,-0,0),p);break e}Sw(u,o,ns,sf,Jp,i,pr,qa,Xo,Fs,0,-0,0)}}break}while(!0);rs(s)}function rg(s){ns===null?ns=s:ns.push.apply(ns,s)}function Sw(s,i,o,u,f,p,E,A,k,z,ee,ae,Q){var Z=i.subtreeFlags;if((Z&8192||(Z&16785408)===16785408)&&(Zu={stylesheets:null,count:0,unsuspend:Ax},pw(i),i=Rx(),i!==null)){s.cancelPendingCommit=i(Dw.bind(null,s,o,u,f,E,A,k,1,ae,Q)),zs(s,p,E,!z);return}Dw(s,o,u,f,E,A,k,ee,ae,Q)}function HI(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!$n(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zs(s,i,o,u){i&=~Yp,i&=~qa,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var f=i;0<f;){var p=31-Sn(f),E=1<<p;u[p]=-1,f&=~E}o!==0&&mi(s,o,i)}function of(){return(gt&6)===0?(Qu(0),!1):!0}function sg(){if(ze!==null){if(ut===0)var s=ze.return;else s=ze,ks=Ba=null,cp(s),jo=null,Iu=0,s=ze;for(;s!==null;)bw(s.alternate,s),s=s.return;ze=null}}function Yo(s,i){s.finishedWork=null,s.finishedLanes=0;var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,lx(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),sg(),lt=s,ze=o=Li(s.current,null),Qe=i,ut=0,Kn=null,Fs=!1,Wo=fi(s,i),Xp=!1,Xo=pr=Yp=qa=Ui=bt=0,ns=qu=null,Jp=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var f=31-Sn(u),p=1<<f;i|=s[f],u&=~p}return Bs=i,Nh(),o}function Rw(s,i){Pe=null,C.H=ts,i===Ru?(i=B0(),ut=3):i===U0?(i=B0(),ut=4):ut=i===jE?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kn=i,ze===null&&(bt=1,Xh(s,lr(i,s.current)))}function Cw(){var s=C.H;return C.H=ts,s===null?ts:s}function Iw(){var s=C.A;return C.A=BI,s}function ig(){bt=4,Fs||(Qe&4194176)!==Qe&&hr.current!==null||(Wo=!0),(Ui&134217727)===0&&(qa&134217727)===0||lt===null||zs(lt,Qe,pr,!1)}function ag(s,i,o){var u=gt;gt|=2;var f=Cw(),p=Iw();(lt!==s||Qe!==i)&&(sf=null,Yo(s,i)),i=!1;var E=bt;e:do try{if(ut!==0&&ze!==null){var A=ze,k=Kn;switch(ut){case 8:sg(),E=6;break e;case 3:case 2:case 6:hr.current===null&&(i=!0);var z=ut;if(ut=0,Kn=null,Jo(s,A,k,z),o&&Wo){E=0;break e}break;default:z=ut,ut=0,Kn=null,Jo(s,A,k,z)}}$I(),E=bt;break}catch(ee){Rw(s,ee)}while(!0);return i&&s.shellSuspendCounter++,ks=Ba=null,gt=u,C.H=f,C.A=p,ze===null&&(lt=null,Qe=0,Nh()),E}function $I(){for(;ze!==null;)xw(ze)}function qI(s,i){var o=gt;gt|=2;var u=Cw(),f=Iw();lt!==s||Qe!==i?(sf=null,rf=Ut()+500,Yo(s,i)):Wo=fi(s,i);e:do try{if(ut!==0&&ze!==null){i=ze;var p=Kn;t:switch(ut){case 1:ut=0,Kn=null,Jo(s,i,p,1);break;case 2:if(j0(p)){ut=0,Kn=null,Nw(i);break}i=function(){ut===2&&lt===s&&(ut=7),rs(s)},p.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:j0(p)?(ut=0,Kn=null,Nw(i)):(ut=0,Kn=null,Jo(s,i,p,7));break;case 5:var E=null;switch(ze.tag){case 26:E=ze.memoizedState;case 5:case 27:var A=ze;if(!E||ib(E)){ut=0,Kn=null;var k=A.sibling;if(k!==null)ze=k;else{var z=A.return;z!==null?(ze=z,lf(z)):ze=null}break t}}ut=0,Kn=null,Jo(s,i,p,5);break;case 6:ut=0,Kn=null,Jo(s,i,p,6);break;case 8:sg(),bt=6;break e;default:throw Error(r(462))}}GI();break}catch(ee){Rw(s,ee)}while(!0);return ks=Ba=null,C.H=u,C.A=f,gt=o,ze!==null?0:(lt=null,Qe=0,Nh(),bt)}function GI(){for(;ze!==null&&!ya();)xw(ze)}function xw(s){var i=YE(s.alternate,s,Bs);s.memoizedProps=s.pendingProps,i===null?lf(s):ze=i}function Nw(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=qE(o,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=qE(o,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:cp(i);default:bw(o,i),i=ze=vw(i,Bs),i=YE(o,i,Bs)}s.memoizedProps=s.pendingProps,i===null?lf(s):ze=i}function Jo(s,i,o,u){ks=Ba=null,cp(i),jo=null,Iu=0;var f=i.return;try{if(kI(s,f,i,o,Qe)){bt=1,Xh(s,lr(o,s.current)),ze=null;return}}catch(p){if(f!==null)throw ze=f,p;bt=1,Xh(s,lr(o,s.current)),ze=null;return}i.flags&32768?(Ye||u===1?s=!0:Wo||(Qe&536870912)!==0?s=!1:(Fs=s=!0,(u===2||u===3||u===6)&&(u=hr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Ow(i,s)):lf(i)}function lf(s){var i=s;do{if((i.flags&32768)!==0){Ow(i,Fs);return}s=i.return;var o=jI(i.alternate,i,Bs);if(o!==null){ze=o;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=s}while(i!==null);bt===0&&(bt=5)}function Ow(s,i){do{var o=FI(s.alternate,s);if(o!==null){o.flags&=32767,ze=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){ze=s;return}ze=s=o}while(s!==null);bt=6,ze=null}function Dw(s,i,o,u,f,p,E,A,k,z){var ee=C.T,ae=oe.p;try{oe.p=2,C.T=null,KI(s,i,o,u,ae,f,p,E,A,k,z)}finally{C.T=ee,oe.p=ae}}function KI(s,i,o,u,f,p,E,A){do Zo();while(Ga!==null);if((gt&6)!==0)throw Error(r(327));var k=s.finishedWork;if(u=s.finishedLanes,k===null)return null;if(s.finishedWork=null,s.finishedLanes=0,k===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var z=k.lanes|k.childLanes;if(z|=Wm,uh(s,u,z,p,E,A),s===lt&&(ze=lt=null,Qe=0),(k.subtreeFlags&10256)===0&&(k.flags&10256)===0||af||(af=!0,eg=z,tg=o,YI(Mn,function(){return Zo(),null})),o=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||o?(o=C.T,C.T=null,p=oe.p,oe.p=2,E=gt,gt|=4,VI(s,k),fw(k,s),yI(_g,s.containerInfo),Ef=!!yg,_g=yg=null,s.current=k,lw(s,k.alternate,k),_s(),gt=E,oe.p=p,C.T=o):s.current=k,af?(af=!1,Ga=s,Gu=u):Mw(s,z),z=s.pendingLanes,z===0&&(ji=null),ru(k.stateNode),rs(s),i!==null)for(f=s.onRecoverableError,k=0;k<i.length;k++)z=i[k],f(z.value,{componentStack:z.stack});return(Gu&3)!==0&&Zo(),z=s.pendingLanes,(u&4194218)!==0&&(z&42)!==0?s===ng?Ku++:(Ku=0,ng=s):Ku=0,Qu(0),null}function Mw(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Nu(i)))}function Zo(){if(Ga!==null){var s=Ga,i=eg;eg=0;var o=ch(Gu),u=C.T,f=oe.p;try{if(oe.p=32>o?32:o,C.T=null,Ga===null)var p=!1;else{o=tg,tg=null;var E=Ga,A=Gu;if(Ga=null,Gu=0,(gt&6)!==0)throw Error(r(331));var k=gt;if(gt|=4,yw(E.current),mw(E,E.current,A,o),gt=k,Qu(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ci,E)}catch{}p=!0}return p}finally{oe.p=f,C.T=u,Mw(s,i)}}return!1}function kw(s,i,o){i=lr(o,i),i=Ap(s.stateNode,i,2),s=Mi(s,i,2),s!==null&&(Ct(s,2),rs(s))}function ot(s,i,o){if(s.tag===3)kw(s,s,o);else for(;i!==null;){if(i.tag===3){kw(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ji===null||!ji.has(u))){s=lr(o,s),o=LE(2),u=Mi(i,o,2),u!==null&&(UE(o,u,i,s),Ct(u,2),rs(u));break}}i=i.return}}function og(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new zI;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Xp=!0,f.add(o),s=QI.bind(null,s,i,o),i.then(s,s))}function QI(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,lt===s&&(Qe&o)===o&&(bt===4||bt===3&&(Qe&62914560)===Qe&&300>Ut()-Zp?(gt&2)===0&&Yo(s,0):Yp|=o,Xo===Qe&&(Xo=0)),rs(s)}function Pw(s,i){i===0&&(i=di()),s=Si(s,i),s!==null&&(Ct(s,i),rs(s))}function WI(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),Pw(s,o)}function XI(s,i){var o=0;switch(s.tag){case 13:var u=s.stateNode,f=s.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),Pw(s,o)}function YI(s,i){return Bn(s,i)}var uf=null,el=null,lg=!1,cf=!1,ug=!1,Ka=0;function rs(s){s!==el&&s.next===null&&(el===null?uf=el=s:el=el.next=s),cf=!0,lg||(lg=!0,ZI(JI))}function Qu(s,i){if(!ug&&cf){ug=!0;do for(var o=!1,u=uf;u!==null;){if(s!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Sn(42|s)+1)-1,p&=f&~(E&~A),p=p&201326677?p&201326677|1:p?p|2:0}p!==0&&(o=!0,Uw(u,p))}else p=Qe,p=tr(u,u===lt?p:0),(p&3)===0||fi(u,p)||(o=!0,Uw(u,p));u=u.next}while(o);ug=!1}}function JI(){cf=lg=!1;var s=0;Ka!==0&&(ox()&&(s=Ka),Ka=0);for(var i=Ut(),o=null,u=uf;u!==null;){var f=u.next,p=Vw(u,i);p===0?(u.next=null,o===null?uf=f:o.next=f,f===null&&(el=o)):(o=u,(s!==0||(p&3)!==0)&&(cf=!0)),u=f}Qu(s)}function Vw(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,f=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var E=31-Sn(p),A=1<<E,k=f[E];k===-1?((A&o)===0||(A&u)!==0)&&(f[E]=_o(A,i)):k<=i&&(s.expiredLanes|=A),p&=~A}if(i=lt,o=Qe,o=tr(s,s===i?o:0),u=s.callbackNode,o===0||s===i&&ut===2||s.cancelPendingCommit!==null)return u!==null&&u!==null&&br(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||fi(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&br(u),ch(o)){case 2:case 8:o=at;break;case 32:o=Mn;break;case 268435456:o=er;break;default:o=Mn}return u=Lw.bind(null,s),o=Bn(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&br(u),s.callbackPriority=2,s.callbackNode=null,2}function Lw(s,i){var o=s.callbackNode;if(Zo()&&s.callbackNode!==o)return null;var u=Qe;return u=tr(s,s===lt?u:0),u===0?null:(Aw(s,u,i),Vw(s,Ut()),s.callbackNode!=null&&s.callbackNode===o?Lw.bind(null,s):null)}function Uw(s,i){if(Zo())return null;Aw(s,i,!0)}function ZI(s){ux(function(){(gt&6)!==0?Bn(Ee,s):s()})}function cg(){return Ka===0&&(Ka=iu()),Ka}function jw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Gr(""+s)}function Fw(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function ex(s,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var p=jw((f[jt]||null).action),E=u.submitter;E&&(i=(i=E[jt]||null)?jw(i.formAction):E.getAttribute("formAction"),i!==null&&(p=i,E=null));var A=new So("action","action",null,u,f);s.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ka!==0){var k=E?Fw(f,E):new FormData(f);vp(o,{pending:!0,data:k,method:f.method,action:p},null,k)}}else typeof p=="function"&&(A.preventDefault(),k=E?Fw(f,E):new FormData(f),vp(o,{pending:!0,data:k,method:f.method,action:p},p,k))},currentTarget:f}]})}}for(var hg=0;hg<D0.length;hg++){var fg=D0[hg],tx=fg.toLowerCase(),nx=fg[0].toUpperCase()+fg.slice(1);Sr(tx,"on"+nx)}Sr(C0,"onAnimationEnd"),Sr(I0,"onAnimationIteration"),Sr(x0,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(vI,"onTransitionRun"),Sr(EI,"onTransitionStart"),Sr(wI,"onTransitionCancel"),Sr(N0,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wu));function Bw(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],f=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],k=A.instance,z=A.currentTarget;if(A=A.listener,k!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=z;try{p(f)}catch(ee){Wh(ee)}f.currentTarget=null,p=k}else for(E=0;E<u.length;E++){if(A=u[E],k=A.instance,z=A.currentTarget,A=A.listener,k!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=z;try{p(f)}catch(ee){Wh(ee)}f.currentTarget=null,p=k}}}}function qe(s,i){var o=i[_a];o===void 0&&(o=i[_a]=new Set);var u=s+"__bubble";o.has(u)||(zw(i,s,2,!1),o.add(u))}function dg(s,i,o){var u=0;i&&(u|=4),zw(o,s,u,i)}var hf="_reactListening"+Math.random().toString(36).slice(2);function mg(s){if(!s[hf]){s[hf]=!0,ou.forEach(function(o){o!=="selectionchange"&&(rx.has(o)||dg(o,!1,s),dg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[hf]||(i[hf]=!0,dg("selectionchange",!1,i))}}function zw(s,i,o,u){switch(hb(i)){case 2:var f=xx;break;case 8:f=Nx;break;default:f=Cg}o=f.bind(null,i,o,s),f=void 0,!ir||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?s.addEventListener(i,o,{capture:!0,passive:f}):s.addEventListener(i,o,!0):f!==void 0?s.addEventListener(i,o,{passive:f}):s.addEventListener(i,o,!1)}function pg(s,i,o,u,f){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(E===4)for(E=u.return;E!==null;){var k=E.tag;if((k===3||k===4)&&(k=E.stateNode.containerInfo,k===f||k.nodeType===8&&k.parentNode===f))return;E=E.return}for(;A!==null;){if(E=Ar(A),E===null)return;if(k=E.tag,k===5||k===6||k===26||k===27){u=p=E;continue e}A=A.parentNode}}u=u.return}ph(function(){var z=p,ee=Ao(o),ae=[];e:{var Q=O0.get(s);if(Q!==void 0){var Z=So,ge=s;switch(s){case"keypress":if(Qr(o)===0)break e;case"keydown":case"keyup":Z=Oo;break;case"focusin":ge="focus",Z=Io;break;case"focusout":ge="blur",Z=Io;break;case"beforeblur":case"afterblur":Z=Io;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Th;break;case C0:case I0:case x0:Z=xo;break;case N0:Z=Sh;break;case"scroll":case"scrollend":Z=gh;break;case"wheel":Z=Do;break;case"copy":case"cut":case"paste":Z=No;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=vu;break;case"toggle":case"beforetoggle":Z=Ch}var Ne=(i&4)!==0,Tt=!Ne&&(s==="scroll"||s==="scrollend"),H=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var F=z,K;F!==null;){var ne=F;if(K=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||K===null||H===null||(ne=Ta(F,H),ne!=null&&Ne.push(Xu(F,ne,K))),Tt)break;F=F.return}0<Ne.length&&(Q=new Z(Q,ge,null,o,ee),ae.push({event:Q,listeners:Ne}))}}if((i&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",Q&&o!==sr&&(ge=o.relatedTarget||o.fromElement)&&(Ar(ge)||ge[Es]))break e;if((Z||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(ge=o.relatedTarget||o.toElement,Z=z,ge=ge?Ar(ge):null,ge!==null&&(Tt=he(ge),Ne=ge.tag,ge!==Tt||Ne!==5&&Ne!==27&&Ne!==6)&&(ge=null)):(Z=null,ge=z),Z!==ge)){if(Ne=ar,ne="onMouseLeave",H="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=vu,ne="onPointerLeave",H="onPointerEnter",F="pointer"),Tt=Z==null?Q:_i(Z),K=ge==null?Q:_i(ge),Q=new Ne(ne,F+"leave",Z,o,ee),Q.target=Tt,Q.relatedTarget=K,ne=null,Ar(ee)===z&&(Ne=new Ne(H,F+"enter",ge,o,ee),Ne.target=K,Ne.relatedTarget=Tt,ne=Ne),Tt=ne,Z&&ge)t:{for(Ne=Z,H=ge,F=0,K=Ne;K;K=tl(K))F++;for(K=0,ne=H;ne;ne=tl(ne))K++;for(;0<F-K;)Ne=tl(Ne),F--;for(;0<K-F;)H=tl(H),K--;for(;F--;){if(Ne===H||H!==null&&Ne===H.alternate)break t;Ne=tl(Ne),H=tl(H)}Ne=null}else Ne=null;Z!==null&&Hw(ae,Q,Z,Ne,!1),ge!==null&&Tt!==null&&Hw(ae,Tt,ge,Ne,!0)}}e:{if(Q=z?_i(z):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var pe=g0;else if(Bt(Q))if(y0)pe=pI;else{pe=dI;var Fe=fI}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?z&&fu(z.elementType)&&(pe=g0):pe=mI;if(pe&&(pe=pe(s,z))){Is(ae,pe,o,ee);break e}Fe&&Fe(s,Q,z),s==="focusout"&&z&&Q.type==="number"&&z.memoizedProps.value!=null&&To(Q,"number",Q.value)}switch(Fe=z?_i(z):window,s){case"focusin":(Bt(Fe)||Fe.contentEditable==="true")&&(Mo=Fe,Gm=z,bu=null);break;case"focusout":bu=Gm=Mo=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,S0(ae,o,ee);break;case"selectionchange":if(_I)break;case"keydown":case"keyup":S0(ae,o,ee)}var ye;if(Yr)e:{switch(s){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ge?W(s,o)&&(Te="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(v&&o.locale!=="ko"&&(Ge||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ge&&(ye=mu()):(Kr=ee,Ai="value"in Kr?Kr.value:Kr.textContent,Ge=!0)),Fe=ff(z,Te),0<Fe.length&&(Te=new yu(Te,s,null,o,ee),ae.push({event:Te,listeners:Fe}),ye?Te.data=ye:(ye=le(o),ye!==null&&(Te.data=ye)))),(ye=y?Ft(s,o):Ke(s,o))&&(Te=ff(z,"onBeforeInput"),0<Te.length&&(Fe=new yu("onBeforeInput","beforeinput",null,o,ee),ae.push({event:Fe,listeners:Te}),Fe.data=ye)),ex(ae,s,z,o,ee)}Bw(ae,i)})}function Xu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function ff(s,i){for(var o=i+"Capture",u=[];s!==null;){var f=s,p=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ta(s,o),f!=null&&u.unshift(Xu(s,f,p)),f=Ta(s,i),f!=null&&u.push(Xu(s,f,p))),s=s.return}return u}function tl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Hw(s,i,o,u,f){for(var p=i._reactName,E=[];o!==null&&o!==u;){var A=o,k=A.alternate,z=A.stateNode;if(A=A.tag,k!==null&&k===u)break;A!==5&&A!==26&&A!==27||z===null||(k=z,f?(z=Ta(o,p),z!=null&&E.unshift(Xu(o,z,k))):f||(z=Ta(o,p),z!=null&&E.push(Xu(o,z,k)))),o=o.return}E.length!==0&&s.push({event:i,listeners:E})}var sx=/\r\n?/g,ix=/\u0000|\uFFFD/g;function $w(s){return(typeof s=="string"?s:""+s).replace(sx,`
`).replace(ix,"")}function qw(s,i){return i=$w(i),$w(s)===i}function df(){}function rt(s,i,o,u,f,p){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||rr(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&rr(s,""+u);break;case"className":wi(s,"class",u);break;case"tabIndex":wi(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wi(s,o,u);break;case"style":mh(s,u,p);break;case"data":if(i!=="object"){wi(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Gr(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&rt(s,i,"name",f.name,f,null),rt(s,i,"formEncType",f.formEncType,f,null),rt(s,i,"formMethod",f.formMethod,f,null),rt(s,i,"formTarget",f.formTarget,f,null)):(rt(s,i,"encType",f.encType,f,null),rt(s,i,"method",f.method,f,null),rt(s,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Gr(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=df);break;case"onScroll":u!=null&&qe("scroll",s);break;case"onScrollEnd":u!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=Gr(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":qe("beforetoggle",s),qe("toggle",s),Ei(s,"popover",u);break;case"xlinkActuate":nr(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nr(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nr(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nr(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nr(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nr(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nr(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ei(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jm.get(o)||o,Ei(s,o,u))}}function gg(s,i,o,u,f,p){switch(o){case"style":mh(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?rr(s,u):(typeof u=="number"||typeof u=="bigint")&&rr(s,""+u);break;case"onScroll":u!=null&&qe("scroll",s);break;case"onScrollEnd":u!=null&&qe("scrollend",s);break;case"onClick":u!=null&&(s.onclick=df);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=s[jt]||null,p=p!=null?p[o]:null,typeof p=="function"&&s.removeEventListener(i,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,f);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Ei(s,o,u)}}}function un(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:rt(s,i,p,E,o,null)}}f&&rt(s,i,"srcSet",o.srcSet,o,null),u&&rt(s,i,"src",o.src,o,null);return;case"input":qe("invalid",s);var A=p=E=f=null,k=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var ee=o[u];if(ee!=null)switch(u){case"name":f=ee;break;case"type":E=ee;break;case"checked":k=ee;break;case"defaultChecked":z=ee;break;case"value":p=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:rt(s,i,u,ee,o,null)}}wa(s,p,A,k,z,E,f,!1),Ea(s);return;case"select":qe("invalid",s),u=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:rt(s,i,f,A,o,null)}i=p,o=E,s.multiple=!!u,i!=null?Xe(s,!!u,i,!1):o!=null&&Xe(s,!!u,o,!0);return;case"textarea":qe("invalid",s),p=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:rt(s,i,E,A,o,null)}Ti(s,u,f,p),Ea(s);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rt(s,i,k,u,o,null)}return;case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(u=0;u<Wu.length;u++)qe(Wu[u],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:rt(s,i,z,u,o,null)}return;default:if(fu(i)){for(ee in o)o.hasOwnProperty(ee)&&(u=o[ee],u!==void 0&&gg(s,i,ee,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&rt(s,i,A,u,o,null))}function ax(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,A=null,k=null,z=null,ee=null;for(Z in o){var ae=o[Z];if(o.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=ae;default:u.hasOwnProperty(Z)||rt(s,i,Z,null,u,ae)}}for(var Q in u){var Z=u[Q];if(ae=o[Q],u.hasOwnProperty(Q)&&(Z!=null||ae!=null))switch(Q){case"type":p=Z;break;case"name":f=Z;break;case"checked":z=Z;break;case"defaultChecked":ee=Z;break;case"value":E=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:Z!==ae&&rt(s,i,Q,Z,u,ae)}}bi(s,E,A,k,z,ee,p,f);return;case"select":Z=E=A=Q=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":Z=k;default:u.hasOwnProperty(p)||rt(s,i,p,null,u,k)}for(f in u)if(p=u[f],k=o[f],u.hasOwnProperty(f)&&(p!=null||k!=null))switch(f){case"value":Q=p;break;case"defaultValue":A=p;break;case"multiple":E=p;default:p!==k&&rt(s,i,f,p,u,k)}i=A,o=E,u=Z,Q!=null?Xe(s,!!o,Q,!1):!!u!=!!o&&(i!=null?Xe(s,!!o,i,!0):Xe(s,!!o,o?[]:"",!1));return;case"textarea":Z=Q=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:rt(s,i,A,null,u,f)}for(E in u)if(f=u[E],p=o[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":Q=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&rt(s,i,E,f,u,p)}ba(s,Q,Z);return;case"option":for(var ge in o)if(Q=o[ge],o.hasOwnProperty(ge)&&Q!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:rt(s,i,ge,null,u,Q)}for(k in u)if(Q=u[k],Z=o[k],u.hasOwnProperty(k)&&Q!==Z&&(Q!=null||Z!=null))switch(k){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:rt(s,i,k,Q,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in o)Q=o[Ne],o.hasOwnProperty(Ne)&&Q!=null&&!u.hasOwnProperty(Ne)&&rt(s,i,Ne,null,u,Q);for(z in u)if(Q=u[z],Z=o[z],u.hasOwnProperty(z)&&Q!==Z&&(Q!=null||Z!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:rt(s,i,z,Q,u,Z)}return;default:if(fu(i)){for(var Tt in o)Q=o[Tt],o.hasOwnProperty(Tt)&&Q!==void 0&&!u.hasOwnProperty(Tt)&&gg(s,i,Tt,void 0,u,Q);for(ee in u)Q=u[ee],Z=o[ee],!u.hasOwnProperty(ee)||Q===Z||Q===void 0&&Z===void 0||gg(s,i,ee,Q,u,Z);return}}for(var H in o)Q=o[H],o.hasOwnProperty(H)&&Q!=null&&!u.hasOwnProperty(H)&&rt(s,i,H,null,u,Q);for(ae in u)Q=u[ae],Z=o[ae],!u.hasOwnProperty(ae)||Q===Z||Q==null&&Z==null||rt(s,i,ae,Q,u,Z)}var yg=null,_g=null;function mf(s){return s.nodeType===9?s:s.ownerDocument}function Gw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kw(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function vg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Eg=null;function ox(){var s=window.event;return s&&s.type==="popstate"?s===Eg?!1:(Eg=s,!0):(Eg=null,!1)}var Qw=typeof setTimeout=="function"?setTimeout:void 0,lx=typeof clearTimeout=="function"?clearTimeout:void 0,Ww=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof Ww<"u"?function(s){return Ww.resolve(null).then(s).catch(cx)}:Qw;function cx(s){setTimeout(function(){throw s})}function wg(s,i){var o=i,u=0;do{var f=o.nextSibling;if(s.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(u===0){s.removeChild(f),sc(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=f}while(o);sc(i)}function bg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":bg(o),va(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function hx(s,i,o,u){for(;s.nodeType===1;){var f=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[yi])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==f.rel||s.getAttribute("href")!==(f.href==null?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=Ir(s.nextSibling),s===null)break}return null}function fx(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ir(s.nextSibling),s===null))return null;return s}function Ir(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}function Xw(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return s;i--}else o==="/$"&&i++}s=s.previousSibling}return null}function Yw(s,i,o){switch(i=mf(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var gr=new Map,Jw=new Set;function pf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Hs=oe.d;oe.d={f:dx,r:mx,D:px,C:gx,L:yx,m:_x,X:Ex,S:vx,M:wx};function dx(){var s=Hs.f(),i=of();return s||i}function mx(s){var i=ws(s);i!==null&&i.tag===5&&i.type==="form"?SE(i):Hs.r(s)}var nl=typeof document>"u"?null:document;function Zw(s,i,o){var u=nl;if(u&&typeof i=="string"&&i){var f=Et(i);f='link[rel="'+s+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Jw.has(f)||(Jw.add(f),s={rel:s,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),un(i,"link",s),mt(i),u.head.appendChild(i)))}}function px(s){Hs.D(s),Zw("dns-prefetch",s,null)}function gx(s,i){Hs.C(s,i),Zw("preconnect",s,i)}function yx(s,i,o){Hs.L(s,i,o);var u=nl;if(u&&s&&i){var f='link[rel="preload"][as="'+Et(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Et(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Et(o.imageSizes)+'"]')):f+='[href="'+Et(s)+'"]';var p=f;switch(i){case"style":p=rl(s);break;case"script":p=sl(s)}gr.has(p)||(s=D({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),gr.set(p,s),u.querySelector(f)!==null||i==="style"&&u.querySelector(Yu(p))||i==="script"&&u.querySelector(Ju(p))||(i=u.createElement("link"),un(i,"link",s),mt(i),u.head.appendChild(i)))}}function _x(s,i){Hs.m(s,i);var o=nl;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Et(u)+'"][href="'+Et(s)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=sl(s)}if(!gr.has(p)&&(s=D({rel:"modulepreload",href:s},i),gr.set(p,s),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ju(p)))return}u=o.createElement("link"),un(u,"link",s),mt(u),o.head.appendChild(u)}}}function vx(s,i,o){Hs.S(s,i,o);var u=nl;if(u&&s){var f=vi(u).hoistableStyles,p=rl(s);i=i||"default";var E=f.get(p);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(Yu(p)))A.loading=5;else{s=D({rel:"stylesheet",href:s,"data-precedence":i},o),(o=gr.get(p))&&Tg(s,o);var k=E=u.createElement("link");mt(k),un(k,"link",s),k._p=new Promise(function(z,ee){k.onload=z,k.onerror=ee}),k.addEventListener("load",function(){A.loading|=1}),k.addEventListener("error",function(){A.loading|=2}),A.loading|=4,gf(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(p,E)}}}function Ex(s,i){Hs.X(s,i);var o=nl;if(o&&s){var u=vi(o).hoistableScripts,f=sl(s),p=u.get(f);p||(p=o.querySelector(Ju(f)),p||(s=D({src:s,async:!0},i),(i=gr.get(f))&&Ag(s,i),p=o.createElement("script"),mt(p),un(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function wx(s,i){Hs.M(s,i);var o=nl;if(o&&s){var u=vi(o).hoistableScripts,f=sl(s),p=u.get(f);p||(p=o.querySelector(Ju(f)),p||(s=D({src:s,async:!0,type:"module"},i),(i=gr.get(f))&&Ag(s,i),p=o.createElement("script"),mt(p),un(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function eb(s,i,o,u){var f=(f=Rt.current)?pf(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=rl(o.href),o=vi(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=rl(o.href);var p=vi(f).hoistableStyles,E=p.get(s);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,E),(p=f.querySelector(Yu(s)))&&!p._p&&(E.instance=p,E.state.loading=5),gr.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},gr.set(s,o),p||bx(f,s,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=sl(o),o=vi(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function rl(s){return'href="'+Et(s)+'"'}function Yu(s){return'link[rel="stylesheet"]['+s+"]"}function tb(s){return D({},s,{"data-precedence":s.precedence,precedence:null})}function bx(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),un(i,"link",o),mt(i),s.head.appendChild(i))}function sl(s){return'[src="'+Et(s)+'"]'}function Ju(s){return"script[async]"+s}function nb(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+Et(o.href)+'"]');if(u)return i.instance=u,mt(u),u;var f=D({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),mt(u),un(u,"style",f),gf(u,o.precedence,s),i.instance=u;case"stylesheet":f=rl(o.href);var p=s.querySelector(Yu(f));if(p)return i.state.loading|=4,i.instance=p,mt(p),p;u=tb(o),(f=gr.get(f))&&Tg(u,f),p=(s.ownerDocument||s).createElement("link"),mt(p);var E=p;return E._p=new Promise(function(A,k){E.onload=A,E.onerror=k}),un(p,"link",u),i.state.loading|=4,gf(p,o.precedence,s),i.instance=p;case"script":return p=sl(o.src),(f=s.querySelector(Ju(p)))?(i.instance=f,mt(f),f):(u=o,(f=gr.get(p))&&(u=D({},o),Ag(u,f)),s=s.ownerDocument||s,f=s.createElement("script"),mt(f),un(f,"link",u),s.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,gf(u,o.precedence,s));return i.instance}function gf(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(s,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function Tg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Ag(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var yf=null;function rb(s,i,o){if(yf===null){var u=new Map,f=yf=new Map;f.set(o,u)}else f=yf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),f=0;f<o.length;f++){var p=o[f];if(!(p[yi]||p[Xt]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(i)||"";E=s+E;var A=u.get(E);A?A.push(p):u.set(E,[p])}}return u}function sb(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function Tx(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ib(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Zu=null;function Ax(){}function Sx(s,i,o){if(Zu===null)throw Error(r(475));var u=Zu;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=rl(o.href),p=s.querySelector(Yu(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=_f.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=p,mt(p);return}p=s.ownerDocument||s,o=tb(o),(f=gr.get(f))&&Tg(o,f),p=p.createElement("link"),mt(p);var E=p;E._p=new Promise(function(A,k){E.onload=A,E.onerror=k}),un(p,"link",o),i.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=_f.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function Rx(){if(Zu===null)throw Error(r(475));var s=Zu;return s.stylesheets&&s.count===0&&Sg(s,s.stylesheets),0<s.count?function(i){var o=setTimeout(function(){if(s.stylesheets&&Sg(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(o)}}:null}function _f(){if(this.count--,this.count===0){if(this.stylesheets)Sg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var vf=null;function Sg(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,vf=new Map,i.forEach(Cx,s),vf=null,_f.call(s))}function Cx(s,i){if(!(i.state.loading&4)){var o=vf.get(s);if(o)var u=o.get(null);else{o=new Map,vf.set(s,o);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,f),o.set(E,f),this.count++,u=_f.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),i.state.loading|=4}}var ec={$$typeof:R,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function Ix(s,i,o,u,f,p,E,A){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vo(0),this.hiddenUpdates=vo(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function ab(s,i,o,u,f,p,E,A,k,z,ee,ae){return s=new Ix(s,i,o,E,A,k,z,ae),i=1,p===!0&&(i|=24),p=mr(3,null,null,i),s.current=p,p.stateNode=s,i=rp(),i.refCount++,s.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:i},Lp(p),s}function ob(s){return s?(s=Vo,s):Vo}function lb(s,i,o,u,f,p){f=ob(f),u.context===null?u.context=f:u.pendingContext=f,u=Di(i),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Mi(s,u,i),o!==null&&(xn(o,s,i),Lu(o,s,i))}function ub(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Rg(s,i){ub(s,i),(s=s.alternate)&&ub(s,i)}function cb(s){if(s.tag===13){var i=Si(s,67108864);i!==null&&xn(i,s,67108864),Rg(s,67108864)}}var Ef=!0;function xx(s,i,o,u){var f=C.T;C.T=null;var p=oe.p;try{oe.p=2,Cg(s,i,o,u)}finally{oe.p=p,C.T=f}}function Nx(s,i,o,u){var f=C.T;C.T=null;var p=oe.p;try{oe.p=8,Cg(s,i,o,u)}finally{oe.p=p,C.T=f}}function Cg(s,i,o,u){if(Ef){var f=Ig(u);if(f===null)pg(s,i,u,wf,o),fb(s,u);else if(Dx(f,s,i,o,u))u.stopPropagation();else if(fb(s,u),i&4&&-1<Ox.indexOf(s)){for(;f!==null;){var p=ws(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Tr(p.pendingLanes);if(E!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var k=1<<31-Sn(E);A.entanglements[1]|=k,E&=~k}rs(p),(gt&6)===0&&(rf=Ut()+500,Qu(0))}}break;case 13:A=Si(p,2),A!==null&&xn(A,p,2),of(),Rg(p,2)}if(p=Ig(u),p===null&&pg(s,i,u,wf,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else pg(s,i,u,null,o)}}function Ig(s){return s=Ao(s),xg(s)}var wf=null;function xg(s){if(wf=null,s=Ar(s),s!==null){var i=he(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=Be(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return wf=s,null}function hb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ui()){case Ee:return 2;case at:return 8;case Mn:case vs:return 32;case er:return 268435456;default:return 32}default:return 32}}var Ng=!1,Fi=null,Bi=null,zi=null,tc=new Map,nc=new Map,Hi=[],Ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fb(s,i){switch(s){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":tc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(i.pointerId)}}function rc(s,i,o,u,f,p){return s===null||s.nativeEvent!==p?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},i!==null&&(i=ws(i),i!==null&&cb(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function Dx(s,i,o,u,f){switch(i){case"focusin":return Fi=rc(Fi,s,i,o,u,f),!0;case"dragenter":return Bi=rc(Bi,s,i,o,u,f),!0;case"mouseover":return zi=rc(zi,s,i,o,u,f),!0;case"pointerover":var p=f.pointerId;return tc.set(p,rc(tc.get(p)||null,s,i,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,nc.set(p,rc(nc.get(p)||null,s,i,o,u,f)),!0}return!1}function db(s){var i=Ar(s.target);if(i!==null){var o=he(i);if(o!==null){if(i=o.tag,i===13){if(i=Be(o),i!==null){s.blockedOn=i,gi(s.priority,function(){if(o.tag===13){var u=Qn(),f=Si(o,u);f!==null&&xn(f,o,u),Rg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function bf(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Ig(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);sr=u,o.target.dispatchEvent(u),sr=null}else return i=ws(o),i!==null&&cb(i),s.blockedOn=o,!1;i.shift()}return!0}function mb(s,i,o){bf(s)&&o.delete(i)}function Mx(){Ng=!1,Fi!==null&&bf(Fi)&&(Fi=null),Bi!==null&&bf(Bi)&&(Bi=null),zi!==null&&bf(zi)&&(zi=null),tc.forEach(mb),nc.forEach(mb)}function Tf(s,i){s.blockedOn===i&&(s.blockedOn=null,Ng||(Ng=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mx)))}var Af=null;function pb(s){Af!==s&&(Af=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Af===s&&(Af=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],f=s[i+2];if(typeof u!="function"){if(xg(u||o)===null)continue;break}var p=ws(o);p!==null&&(s.splice(i,3),i-=3,vp(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function sc(s){function i(k){return Tf(k,s)}Fi!==null&&Tf(Fi,s),Bi!==null&&Tf(Bi,s),zi!==null&&Tf(zi,s),tc.forEach(i),nc.forEach(i);for(var o=0;o<Hi.length;o++){var u=Hi[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Hi.length&&(o=Hi[0],o.blockedOn===null);)db(o),o.blockedOn===null&&Hi.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],E=f[jt]||null;if(typeof p=="function")E||pb(o);else if(E){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[jt]||null)A=E.formAction;else if(xg(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),pb(o)}}}function Og(s){this._internalRoot=s}Sf.prototype.render=Og.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Qn();lb(o,u,s,i,null,null)},Sf.prototype.unmount=Og.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;s.tag===0&&Zo(),lb(s.current,2,null,s,null,null),of(),i[Es]=null}};function Sf(s){this._internalRoot=s}Sf.prototype.unstable_scheduleHydration=function(s){if(s){var i=hh();s={blockedOn:null,target:s,priority:i};for(var o=0;o<Hi.length&&i!==0&&i<Hi[o].priority;o++);Hi.splice(o,0,s),o===0&&db(s)}};var gb=e.version;if(gb!=="19.0.0")throw Error(r(527,gb,"19.0.0"));oe.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=ie(i),s=s!==null?fe(s):null,s=s===null?null:s.stateNode,s};var kx={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:C,findFiberByHostInstance:Ar,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{ci=Rf.inject(kx),yn=Rf}catch{}}return ac.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",f=ME,p=kE,E=PE,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=ab(s,1,!1,null,null,o,u,f,p,E,A,null),s[Es]=i.current,mg(s.nodeType===8?s.parentNode:s),new Og(i)},ac.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,f="",p=ME,E=kE,A=PE,k=null,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(z=o.formState)),i=ab(s,1,!0,i,o??null,u,f,p,E,A,k,z),i.context=ob(null),o=i.current,u=Qn(),f=Di(u),f.callback=null,Mi(o,f,u),i.current.lanes=u,Ct(i,u),rs(i),s[Es]=i.current,mg(s),new Sf(i)},ac.version="19.0.0",ac}var Rb;function Hx(){if(Rb)return kg.exports;Rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kg.exports=zx(),kg.exports}var $x=Hx();const qx=Ll($x);var oc={},Cb;function Gx(){if(Cb)return oc;Cb=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.parse=c,oc.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,R){const O=new l,L=T.length;if(L<2)return O;const P=(R==null?void 0:R.decode)||_;let $=0;do{const B=T.indexOf("=",$);if(B===-1)break;const G=T.indexOf(";",$),X=G===-1?L:G;if(B>X){$=T.lastIndexOf(";",B-1)+1;continue}const Y=d(T,$,B),te=m(T,B,Y),M=T.slice(Y,te);if(O[M]===void 0){let x=d(T,B+1,X),C=m(T,X,x);const D=P(T.slice(x,C));O[M]=D}$=X+1}while($<L);return O}function d(T,R,O){do{const L=T.charCodeAt(R);if(L!==32&&L!==9)return R}while(++R<O);return O}function m(T,R,O){for(;R>O;){const L=T.charCodeAt(--R);if(L!==32&&L!==9)return R+1}return O}function g(T,R,O){const L=(O==null?void 0:O.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const P=L(R);if(!e.test(P))throw new TypeError(`argument val is invalid: ${R}`);let $=T+"="+P;if(!O)return $;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);$+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);$+="; Domain="+O.domain}if(O.path){if(!r.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);$+="; Path="+O.path}if(O.expires){if(!w(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);$+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&($+="; HttpOnly"),O.secure&&($+="; Secure"),O.partitioned&&($+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return $}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return a.call(T)==="[object Date]"}return oc}Gx();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ib="popstate";function Kx(n={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return by("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:xc(a)}return Wx(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qx(){return Math.random().toString(36).substring(2,10)}function xb(n,e){return{usr:n.state,key:n.key,idx:e}}function by(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ul(e):e,state:t,key:e&&e.key||r||Qx()}}function xc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ul(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Wx(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function w(){d="POP";let P=_(),$=P==null?null:P-g;g=P,m&&m({action:d,location:L.location,delta:$})}function T(P,$){d="PUSH";let B=by(L.location,P,$);g=_()+1;let G=xb(B,g),X=L.createHref(B);try{c.pushState(G,"",X)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(X)}l&&m&&m({action:d,location:L.location,delta:1})}function R(P,$){d="REPLACE";let B=by(L.location,P,$);g=_();let G=xb(B,g),X=L.createHref(B);c.replaceState(G,"",X),l&&m&&m({action:d,location:L.location,delta:0})}function O(P){let $=a.location.origin!=="null"?a.location.origin:a.location.href,B=typeof P=="string"?P:xc(P);return B=B.replace(/ $/,"%20"),ft($,`No window.location.(origin|href) available to create URL for href: ${B}`),new URL(B,$)}let L={get action(){return d},get location(){return n(a,c)},listen(P){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Ib,w),m=P,()=>{a.removeEventListener(Ib,w),m=null}},createHref(P){return e(a,P)},createURL:O,encodeLocation(P){let $=O(P);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:T,replace:R,go(P){return c.go(P)}};return L}function lA(n,e,t="/"){return Xx(n,e,t,!1)}function Xx(n,e,t,r){let a=typeof e=="string"?Ul(e):e,l=Zs(a.pathname||"/",t);if(l==null)return null;let c=uA(n);Yx(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=l4(l);d=a4(c[m],g,r)}return d}function uA(n,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(ft(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let g=Xs([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(ft(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),uA(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:s4(g,l.index),routesMeta:_})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of cA(l.path))a(l,c,m)}),e}function cA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=cA(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function Yx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:i4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Jx=/^:[\w-]+$/,Zx=3,e4=2,t4=1,n4=10,r4=-2,Nb=n=>n==="*";function s4(n,e){let t=n.split("/"),r=t.length;return t.some(Nb)&&(r+=r4),e&&(r+=e4),t.filter(a=>!Nb(a)).reduce((a,l)=>a+(Jx.test(l)?Zx:l===""?t4:n4),r)}function i4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function a4(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],g=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=cd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),T=m.route;if(!w&&g&&t&&!r[r.length-1].route.index&&(w=cd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:Xs([l,w.pathname]),pathnameBase:f4(Xs([l,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(l=Xs([l,w.pathnameBase]))}return c}function cd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=o4(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:w},T)=>{if(_==="*"){let O=d[T]||"";c=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const R=d[T];return w&&!R?g[_]=void 0:g[_]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function o4(n,e=!1,t=!0){Vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function l4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Zs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function u4(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?Ul(n):n;return{pathname:t?t.startsWith("/")?t:c4(t,e):e,search:d4(r),hash:m4(a)}}function c4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ug(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function h4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function g_(n){let e=h4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function y_(n,e,t,r=!1){let a;typeof n=="string"?a=Ul(n):(a={...n},ft(!a.pathname||!a.pathname.includes("?"),Ug("?","pathname","search",a)),ft(!a.pathname||!a.pathname.includes("#"),Ug("#","pathname","hash",a)),ft(!a.search||!a.search.includes("#"),Ug("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),w-=1;a.pathname=T.join("/")}d=w>=0?e[w]:"/"}let m=u4(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var Xs=n=>n.join("/").replace(/\/\/+/g,"/"),f4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),d4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,m4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function p4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var hA=["POST","PUT","PATCH","DELETE"];new Set(hA);var g4=["GET",...hA];new Set(g4);var jl=I.createContext(null);jl.displayName="DataRouter";var qd=I.createContext(null);qd.displayName="DataRouterState";var fA=I.createContext({isTransitioning:!1});fA.displayName="ViewTransition";var y4=I.createContext(new Map);y4.displayName="Fetchers";var _4=I.createContext(null);_4.displayName="Await";var jr=I.createContext(null);jr.displayName="Navigation";var zc=I.createContext(null);zc.displayName="Location";var gs=I.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var __=I.createContext(null);__.displayName="RouteError";function v4(n,{relative:e}={}){ft(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=I.useContext(jr),{hash:a,pathname:l,search:c}=Hc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Xs([t,l])),r.createHref({pathname:d,search:c,hash:a})}function Fl(){return I.useContext(zc)!=null}function ai(){return ft(Fl(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(zc).location}var dA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mA(n){I.useContext(jr).static||I.useLayoutEffect(n)}function fo(){let{isDataRoute:n}=I.useContext(gs);return n?D4():E4()}function E4(){ft(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(jl),{basename:e,navigator:t}=I.useContext(jr),{matches:r}=I.useContext(gs),{pathname:a}=ai(),l=JSON.stringify(g_(r)),c=I.useRef(!1);return mA(()=>{c.current=!0}),I.useCallback((m,g={})=>{if(Vr(c.current,dA),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=y_(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Xs([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}I.createContext(null);function Hc(n,{relative:e}={}){let{matches:t}=I.useContext(gs),{pathname:r}=ai(),a=JSON.stringify(g_(t));return I.useMemo(()=>y_(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function w4(n,e){return pA(n,e)}function pA(n,e,t,r){var B;ft(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=I.useContext(jr),{matches:c}=I.useContext(gs),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",w=d&&d.route;{let G=w&&w.path||"";gA(g,!w||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=ai(),R;if(e){let G=typeof e=="string"?Ul(e):e;ft(_==="/"||((B=G.pathname)==null?void 0:B.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${G.pathname}" was given in the \`location\` prop.`),R=G}else R=T;let O=R.pathname||"/",L=O;if(_!=="/"){let G=_.replace(/^\//,"").split("/");L="/"+O.replace(/^\//,"").split("/").slice(G.length).join("/")}let P=!l&&t&&t.matches&&t.matches.length>0?t.matches:lA(n,{pathname:L});Vr(w||P!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Vr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=R4(P&&P.map(G=>Object.assign({},G,{params:Object.assign({},m,G.params),pathname:Xs([_,a.encodeLocation?a.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?_:Xs([_,a.encodeLocation?a.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),c,t,r);return e&&$?I.createElement(zc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},$):$}function b4(){let n=O4(),e=p4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:l},"ErrorBoundary")," or"," ",I.createElement("code",{style:l},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:a},t):null,c)}var T4=I.createElement(b4,null),A4=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?I.createElement(gs.Provider,{value:this.props.routeContext},I.createElement(__.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S4({routeContext:n,match:e,children:t}){let r=I.useContext(jl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(gs.Provider,{value:n},t)}function R4(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);ft(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:_,errors:w}=t,T=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||T){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let w,T=!1,R=null,O=null;t&&(w=l&&g.route.id?l[g.route.id]:void 0,R=g.route.errorElement||T4,c&&(d<0&&_===0?(gA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,O=null):d===_&&(T=!0,O=g.route.hydrateFallbackElement||null)));let L=e.concat(a.slice(0,_+1)),P=()=>{let $;return w?$=R:T?$=O:g.route.Component?$=I.createElement(g.route.Component,null):g.route.element?$=g.route.element:$=m,I.createElement(S4,{match:g,routeContext:{outlet:m,matches:L,isDataRoute:t!=null},children:$})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?I.createElement(A4,{location:t.location,revalidation:t.revalidation,component:R,error:w,children:P(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):P()},null)}function v_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C4(n){let e=I.useContext(jl);return ft(e,v_(n)),e}function I4(n){let e=I.useContext(qd);return ft(e,v_(n)),e}function x4(n){let e=I.useContext(gs);return ft(e,v_(n)),e}function E_(n){let e=x4(n),t=e.matches[e.matches.length-1];return ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function N4(){return E_("useRouteId")}function O4(){var r;let n=I.useContext(__),e=I4("useRouteError"),t=E_("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function D4(){let{router:n}=C4("useNavigate"),e=E_("useNavigate"),t=I.useRef(!1);return mA(()=>{t.current=!0}),I.useCallback(async(a,l={})=>{Vr(t.current,dA),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Ob={};function gA(n,e,t){!e&&!Ob[n]&&(Ob[n]=!0,Vr(!1,t))}I.memo(M4);function M4({routes:n,future:e,state:t}){return pA(n,void 0,t,e)}function k4({to:n,replace:e,state:t,relative:r}){ft(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=I.useContext(jr);Vr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=I.useContext(gs),{pathname:c}=ai(),d=fo(),m=y_(n,g_(l),c,r==="path"),g=JSON.stringify(m);return I.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function uc(n){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function P4({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){ft(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Ul(t));let{pathname:m="/",search:g="",hash:_="",state:w=null,key:T="default"}=t,R=I.useMemo(()=>{let O=Zs(m,c);return O==null?null:{location:{pathname:O,search:g,hash:_,state:w,key:T},navigationType:r}},[c,m,g,_,w,T,r]);return Vr(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:I.createElement(jr.Provider,{value:d},I.createElement(zc.Provider,{children:e,value:R}))}function V4({children:n,location:e}){return w4(Ty(n),e)}function Ty(n,e=[]){let t=[];return I.Children.forEach(n,(r,a)=>{if(!I.isValidElement(r))return;let l=[...e,a];if(r.type===I.Fragment){t.push.apply(t,Ty(r.props.children,l));return}ft(r.type===uc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ty(r.props.children,l)),t.push(c)}),t}var Gf="get",Kf="application/x-www-form-urlencoded";function Gd(n){return n!=null&&typeof n.tagName=="string"}function L4(n){return Gd(n)&&n.tagName.toLowerCase()==="button"}function U4(n){return Gd(n)&&n.tagName.toLowerCase()==="form"}function j4(n){return Gd(n)&&n.tagName.toLowerCase()==="input"}function F4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function B4(n,e){return n.button===0&&(!e||e==="_self")&&!F4(n)}var Cf=null;function z4(){if(Cf===null)try{new FormData(document.createElement("form"),0),Cf=!1}catch{Cf=!0}return Cf}var H4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jg(n){return n!=null&&!H4.has(n)?(Vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kf}"`),null):n}function $4(n,e){let t,r,a,l,c;if(U4(n)){let d=n.getAttribute("action");r=d?Zs(d,e):null,t=n.getAttribute("method")||Gf,a=jg(n.getAttribute("enctype"))||Kf,l=new FormData(n)}else if(L4(n)||j4(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?Zs(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Gf,a=jg(n.getAttribute("formenctype"))||jg(d.getAttribute("enctype"))||Kf,l=new FormData(d,n),!z4()){let{name:g,type:_,value:w}=n;if(_==="image"){let T=g?`${g}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else g&&l.append(g,w)}}else{if(Gd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Gf,r=null,a=Kf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function w_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function q4(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function G4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function K4(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await q4(l,t);return c.links?c.links():[]}return[]}));return Y4(r.flat(1).filter(G4).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Db(n,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var _;return t[g].pathname!==m.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var w;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Q4(n,e,{includeHydrateFallback:t}={}){return W4(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function W4(n){return[...new Set(n)]}function X4(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Y4(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(X4(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function J4(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Zs(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function yA(){let n=I.useContext(jl);return w_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Z4(){let n=I.useContext(qd);return w_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var b_=I.createContext(void 0);b_.displayName="FrameworkContext";function _A(){let n=I.useContext(b_);return w_(n,"You must render this element inside a <HydratedRouter> element"),n}function eN(n,e){let t=I.useContext(b_),[r,a]=I.useState(!1),[l,c]=I.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:w}=e,T=I.useRef(null);I.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let L=$=>{$.forEach(B=>{c(B.isIntersecting)})},P=new IntersectionObserver(L,{threshold:.5});return T.current&&P.observe(T.current),()=>{P.disconnect()}}},[n]),I.useEffect(()=>{if(r){let L=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(L)}}},[r]);let R=()=>{a(!0)},O=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:lc(d,R),onBlur:lc(m,O),onMouseEnter:lc(g,R),onMouseLeave:lc(_,O),onTouchStart:lc(w,R)}]:[!1,T,{}]}function lc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tN({page:n,...e}){let{router:t}=yA(),r=I.useMemo(()=>lA(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?I.createElement(rN,{page:n,matches:r,...e}):null}function nN(n){let{manifest:e,routeModules:t}=_A(),[r,a]=I.useState([]);return I.useEffect(()=>{let l=!1;return K4(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function rN({page:n,matches:e,...t}){let r=ai(),{manifest:a,routeModules:l}=_A(),{basename:c}=yA(),{loaderData:d,matches:m}=Z4(),g=I.useMemo(()=>Db(n,e,m,a,r,"data"),[n,e,m,a,r]),_=I.useMemo(()=>Db(n,e,m,a,r,"assets"),[n,e,m,a,r]),w=I.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let O=new Set,L=!1;if(e.forEach($=>{var G;let B=a.routes[$.route.id];!B||!B.hasLoader||(!g.some(X=>X.route.id===$.route.id)&&$.route.id in d&&((G=l[$.route.id])!=null&&G.shouldRevalidate)||B.hasClientLoader?L=!0:O.add($.route.id))}),O.size===0)return[];let P=J4(n,c);return L&&O.size>0&&P.searchParams.set("_routes",e.filter($=>O.has($.route.id)).map($=>$.route.id).join(",")),[P.pathname+P.search]},[c,d,r,a,g,e,n,l]),T=I.useMemo(()=>Q4(_,a),[_,a]),R=nN(_);return I.createElement(I.Fragment,null,w.map(O=>I.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),T.map(O=>I.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),R.map(({key:O,link:L})=>I.createElement("link",{key:O,...L})))}function sN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vA&&(window.__reactRouterVersion="7.5.0")}catch{}function iN({basename:n,children:e,window:t}){let r=I.useRef();r.current==null&&(r.current=Kx({window:t,v5Compat:!0}));let a=r.current,[l,c]=I.useState({action:a.action,location:a.location}),d=I.useCallback(m=>{I.startTransition(()=>c(m))},[c]);return I.useLayoutEffect(()=>a.listen(d),[a,d]),I.createElement(P4,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wA=I.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:w,...T},R){let{basename:O}=I.useContext(jr),L=typeof g=="string"&&EA.test(g),P,$=!1;if(typeof g=="string"&&L&&(P=g,vA))try{let C=new URL(window.location.href),D=g.startsWith("//")?new URL(C.protocol+g):new URL(g),V=Zs(D.pathname,O);D.origin===C.origin&&V!=null?g=V+D.search+D.hash:$=!0}catch{Vr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=v4(g,{relative:a}),[G,X,Y]=eN(r,T),te=uN(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:w});function M(C){e&&e(C),C.defaultPrevented||te(C)}let x=I.createElement("a",{...T,...Y,href:P||B,onClick:$||l?e:M,ref:sN(R,X),target:m,"data-discover":!L&&t==="render"?"true":void 0});return G&&!L?I.createElement(I.Fragment,null,x,I.createElement(tN,{page:B})):x});wA.displayName="Link";var aN=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let w=Hc(c,{relative:g.relative}),T=ai(),R=I.useContext(qd),{navigator:O,basename:L}=I.useContext(jr),P=R!=null&&mN(w)&&d===!0,$=O.encodeLocation?O.encodeLocation(w).pathname:w.pathname,B=T.pathname,G=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(B=B.toLowerCase(),G=G?G.toLowerCase():null,$=$.toLowerCase()),G&&L&&(G=Zs(G,L)||G);const X=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let Y=B===$||!a&&B.startsWith($)&&B.charAt(X)==="/",te=G!=null&&(G===$||!a&&G.startsWith($)&&G.charAt($.length)==="/"),M={isActive:Y,isPending:te,isTransitioning:P},x=Y?e:void 0,C;typeof r=="function"?C=r(M):C=[r,Y?"active":null,te?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(M):l;return I.createElement(wA,{...g,"aria-current":x,className:C,ref:_,style:D,to:c,viewTransition:d},typeof m=="function"?m(M):m)});aN.displayName="NavLink";var oN=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=Gf,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:w,...T},R)=>{let O=fN(),L=dN(d,{relative:g}),P=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&EA.test(d),B=G=>{if(m&&m(G),G.defaultPrevented)return;G.preventDefault();let X=G.nativeEvent.submitter,Y=(X==null?void 0:X.getAttribute("formmethod"))||c;O(X||G.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:w})};return I.createElement("form",{ref:R,method:P,action:L,onSubmit:r?m:B,...T,"data-discover":!$&&n==="render"?"true":void 0})});oN.displayName="Form";function lN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bA(n){let e=I.useContext(jl);return ft(e,lN(n)),e}function uN(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=fo(),m=ai(),g=Hc(n,{relative:l});return I.useCallback(_=>{if(B4(_,e)){_.preventDefault();let w=t!==void 0?t:xc(m)===xc(g);d(n,{replace:w,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,r,e,n,a,l,c])}var cN=0,hN=()=>`__${String(++cN)}__`;function fN(){let{router:n}=bA("useSubmit"),{basename:e}=I.useContext(jr),t=N4();return I.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=$4(r,e);if(a.navigate===!1){let _=a.fetcherKey||hN();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function dN(n,{relative:e}={}){let{basename:t}=I.useContext(jr),r=I.useContext(gs);ft(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Hc(n||".",{relative:e})},c=ai();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(w=>w).forEach(w=>d.append("index",w));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Xs([t,l.pathname])),xc(l)}function mN(n,e={}){let t=I.useContext(fA);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bA("useViewTransitionState"),a=Hc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Zs(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Zs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return cd(a.pathname,c)!=null||cd(a.pathname,l)!=null}new TextEncoder;var pN=oA();const _l=Ll(pN);var Fg={},Mb;function gN(){return Mb||(Mb=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=$d();function t(c){if(c&&c.__esModule)return c;var d=Object.create(null);return c&&Object.keys(c).forEach(function(m){if(m!=="default"){var g=Object.getOwnPropertyDescriptor(c,m);Object.defineProperty(d,m,g.get?g:{enumerable:!0,get:function(){return c[m]}})}}),d.default=c,Object.freeze(d)}var r=t(e);/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */var a=function(){return a=Object.assign||function(d){for(var m,g=1,_=arguments.length;g<_;g++){m=arguments[g];for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(d[w]=m[w])}return d},a.apply(this,arguments)},l=function(c){var d=c.bgColor,m=d===void 0?"#6a1b9a":d,g=c.height,_=g===void 0?"20px":g,w=c.width,T=w===void 0?"100%":w,R=c.borderRadius,O=R===void 0?"50px":R,L=c.labelAlignment,P=L===void 0?"right":L,$=c.baseBgColor,B=$===void 0?"#e0e0de":$,G=c.labelColor,X=G===void 0?"#fff":G,Y=c.labelSize,te=Y===void 0?"15px":Y,M=c.isLabelVisible,x=M===void 0?!0:M,C=c.dir,D=C===void 0?"ltr":C,V=c.ariaValuemin,j=V===void 0?0:V,N=c.ariaValuemax,Ie=N===void 0?100:N,we=c.ariaValuetext,J=we===void 0?null:we,ue=c.maxCompleted,he=ue===void 0?100:ue,Be=c.animateOnRender,U=Be===void 0?!1:Be,ie=c.initCompletedOnAnimation,fe=ie===void 0?0:ie,ce=c.isIndeterminate,oe=ce===void 0?!1:ce,be=c.completed,Re=c.margin,it=c.padding,Le=c.customLabelStyles,Ze=c.transitionDuration,Ue=c.transitionTimingFunction,dt=c.className,Lt=c.customLabel,Rt=c.barContainerClassName,Wt=c.completedClassName,je=c.labelClassName,gn=function(er){return er==="left"?"flex-start":er==="center"?"center":er==="right"?"flex-end":null},Dn=gn(P),wr=typeof fe=="number"?"".concat(fe,"%"):fe,Fr=function(er,nu){if(er){var Br=Number(nu)/er;return Br>1?"100%":"".concat(Br*100,"%")}return wr},Bn=Fr(he,be),br=r.useState(wr),ya=br[0],_s=br[1],Ut={height:_,background:B,borderRadius:O,padding:it,width:T,margin:Re,overflow:"hidden"},ui={height:_,width:oe?"100%":U?ya:Bn,background:m,transition:oe?"none":"width ".concat(Ze||"1s"," ").concat(Ue||"ease-in-out"),borderRadius:"inherit",display:"flex",alignItems:"center",justifyContent:P!=="outside"&&Dn?Dn:"normal",animation:oe?"indeterminate 1.5s infinite linear":"none"},Ee=a({padding:P==="outside"?"0 0 0 5px":"5px",color:X,fontWeight:"bold",fontSize:te,display:x?"initial":"none"},Le),at={display:P==="outside"?"flex":"initial",alignItems:P==="outside"?"center":"initial"},Mn=typeof be=="number"?"".concat(be,"%"):"".concat(be),vs=Lt||Mn;return r.useEffect(function(){U&&!oe&&requestAnimationFrame(function(){return _s(Bn)})},[Bn,U,oe]),r.createElement("div",{style:dt?void 0:at,className:dt,dir:D,role:"progressbar","aria-valuenow":oe?void 0:parseFloat(vs),"aria-valuemin":j,"aria-valuemax":Ie,"aria-valuetext":"".concat(J===null?vs:J)},r.createElement("div",{style:Rt?void 0:Ut,className:Rt},r.createElement("div",{style:Wt?void 0:ui,className:Wt},P!=="outside"&&r.createElement("span",{style:je?void 0:Ee,className:je},vs))),P==="outside"&&r.createElement("span",{style:je?void 0:Ee,className:je},vs),r.createElement("style",null,`
          @keyframes indeterminate {
            0% {
              width: 30%;
              transform: translateX(-50%);
            }
            50% {
              width: 30%;
              transform: translateX(250%);
            }
            100% {
              width: 30%;
              transform: translateX(-50%);
            }
          }
        `))};n.default=l}(Fg)),Fg}var yN=gN();const T_=Ll(yN);var TA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kb=Nn.createContext&&Nn.createContext(TA),_N=["attr","size","title"];function vN(n,e){if(n==null)return{};var t=EN(n,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function EN(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function hd(){return hd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hd.apply(this,arguments)}function Pb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function fd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pb(Object(t),!0).forEach(function(r){wN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wN(n,e,t){return e=bN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bN(n){var e=TN(n,"string");return typeof e=="symbol"?e:e+""}function TN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function AA(n){return n&&n.map((e,t)=>Nn.createElement(e.tag,fd({key:t},e.attr),AA(e.child)))}function St(n){return e=>Nn.createElement(AN,hd({attr:fd({},n.attr)},e),AA(n.child))}function AN(n){var e=t=>{var{attr:r,size:a,title:l}=n,c=vN(n,_N),d=a||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),Nn.createElement("svg",hd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:m,style:fd(fd({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&Nn.createElement("title",null,l),n.children)};return kb!==void 0?Nn.createElement(kb.Consumer,null,t=>e(t)):e(TA)}function SN(n){return St({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M200,40H48a40,40,0,0,0-16,76.65V200a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V116.65A40,40,0,0,0,200,40Zm-56,64a8,8,0,0,0,0,16v80H48V120a8,8,0,0,0,0-16,24,24,0,0,1,0-48h96a24,24,0,0,1,0,48Z"},child:[]}]})(n)}function RN(n){return St({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,40V224a8,8,0,0,1-16,0V176H152a8,8,0,0,1-8-8,268.75,268.75,0,0,1,7.22-56.88c9.78-40.49,28.32-67.63,53.63-78.47A8,8,0,0,1,216,40Zm-96.11-1.31a8,8,0,1,0-15.78,2.63L111.89,88H88V40a8,8,0,0,0-16,0V88H48.11l7.78-46.68a8,8,0,1,0-15.78-2.63l-8,48A8.17,8.17,0,0,0,32,88a48.07,48.07,0,0,0,40,47.32V224a8,8,0,0,0,16,0V135.32A48.07,48.07,0,0,0,128,88a8.17,8.17,0,0,0-.11-1.31Z"},child:[]}]})(n)}function CN(n){return St({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M117.25,157.92a60,60,0,1,0-66.5,0A95.83,95.83,0,0,0,3.53,195.63a8,8,0,1,0,13.4,8.74,80,80,0,0,1,134.14,0,8,8,0,0,0,13.4-8.74A95.83,95.83,0,0,0,117.25,157.92ZM40,108a44,44,0,1,1,44,44A44.05,44.05,0,0,1,40,108Zm210.14,98.7a8,8,0,0,1-11.07-2.33A79.83,79.83,0,0,0,172,168a8,8,0,0,1,0-16,44,44,0,1,0-16.34-84.87,8,8,0,1,1-5.94-14.85,60,60,0,0,1,55.53,105.64,95.83,95.83,0,0,1,47.22,37.71A8,8,0,0,1,250.14,206.7Z"},child:[]}]})(n)}function IN(n){return St({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 512C86 512 0 426 0 320C0 228.8 130.2 57.7 166.6 11.7C172.6 4.2 181.5 0 191.1 0l1.8 0c9.6 0 18.5 4.2 24.5 11.7C253.8 57.7 384 228.8 384 320c0 106-86 192-192 192zM96 336c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 61.9 50.1 112 112 112c8.8 0 16-7.2 16-16s-7.2-16-16-16c-44.2 0-80-35.8-80-80z"},child:[]}]})(n)}function xN(n){return St({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 64c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32l0 160 0 64 0 160c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-64-32 0c-17.7 0-32-14.3-32-32l0-64c-17.7 0-32-14.3-32-32s14.3-32 32-32l0-64c0-17.7 14.3-32 32-32l32 0 0-64zm448 0l0 64 32 0c17.7 0 32 14.3 32 32l0 64c17.7 0 32 14.3 32 32s-14.3 32-32 32l0 64c0 17.7-14.3 32-32 32l-32 0 0 64c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-160 0-64 0-160c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32zM416 224l0 64-192 0 0-64 192 0z"},child:[]}]})(n)}function NN(n){return St({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM125.7 175.5c9.9-9.9 23.4-15.5 37.5-15.5c1.9 0 3.8 .1 5.6 .3L137.6 254c-9.3 28 1.7 58.8 26.8 74.5l86.2 53.9-25.4 88.8c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l28.7-100.4c5.9-20.6-2.6-42.6-20.7-53.9L238 299l30.9-82.4 5.1 12.3C289 264.7 323.9 288 362.7 288l21.3 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-21.3 0c-12.9 0-24.6-7.8-29.5-19.7l-6.3-15c-14.6-35.1-44.1-61.9-80.5-73.1l-48.7-15c-11.1-3.4-22.7-5.2-34.4-5.2c-31 0-60.8 12.3-82.7 34.3L57.4 153.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l23.1-23.1zM91.2 352L32 352c-17.7 0-32 14.3-32 32s14.3 32 32 32l69.6 0c19 0 36.2-11.2 43.9-28.5L157 361.6l-9.5-6c-17.5-10.9-30.5-26.8-37.9-44.9L91.2 352z"},child:[]}]})(n)}function ON(n){return St({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},child:[]}]})(n)}const DN=()=>{};var Vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},MN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},RA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=l>>2,w=(l&3)<<4|d>>4;let T=(d&15)<<2|g>>6,R=g&63;m||(R=64,c||(T=64)),r.push(t[_],t[w],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const w=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||w==null)throw new kN;const T=l<<2|d>>4;if(r.push(T),g!==64){const R=d<<4&240|g>>2;if(r.push(R),w!==64){const O=g<<6&192|w;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PN=function(n){const e=SA(n);return RA.encodeByteArray(e,!0)},dd=function(n){return PN(n).replace(/\./g,"")},CA=function(n){try{return RA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=()=>VN().__FIREBASE_DEFAULTS__,UN=()=>{if(typeof process>"u"||typeof Vb>"u")return;const n=Vb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&CA(n[1]);return e&&JSON.parse(e)},Kd=()=>{try{return DN()||LN()||UN()||jN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IA=n=>{var e,t;return(t=(e=Kd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},xA=n=>{const e=IA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},NA=()=>{var n;return(n=Kd())===null||n===void 0?void 0:n.config},OA=n=>{var e;return(e=Kd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[dd(JSON.stringify(t)),dd(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function zN(){var n;const e=(n=Kd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qN(){const n=An();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GN(){return!zN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kA(){try{return typeof indexedDB=="object"}catch{return!1}}function PA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function KN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="FirebaseError";class Er extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=QN,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?WN(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Er(a,d,r)}}function WN(n,e){return n.replace(XN,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const XN=/\{\$([^}]+)}/g;function YN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ei(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(Lb(l)&&Lb(c)){if(!ei(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Lb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JN(n,e){const t=new ZN(n,e);return t.subscribe.bind(t)}class ZN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Bg),a.error===void 0&&(a.error=Bg),a.complete===void 0&&(a.complete=Bg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=1e3,nO=2,rO=4*60*60*1e3,sO=.5;function Ub(n,e=tO,t=nO){const r=e*Math.pow(t,n),a=Math.round(sO*r*(Math.random()-.5)*2);return Math.min(rO,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n){return n&&n._delegate?n._delegate:n}class vr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iO=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new FN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oO(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aO(n){return n===Wa?void 0:n}function oO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const uO={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},cO=He.INFO,hO={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},fO=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=hO[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qd{constructor(e){this.name=e,this._logLevel=cO,this._logHandler=fO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const dO=(n,e)=>e.some(t=>n instanceof t);let jb,Fb;function mO(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pO(){return Fb||(Fb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VA=new WeakMap,Ay=new WeakMap,LA=new WeakMap,zg=new WeakMap,A_=new WeakMap;function gO(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ea(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&VA.set(t,n)}).catch(()=>{}),A_.set(e,n),e}function yO(n){if(Ay.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ay.set(n,e)}let Sy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ay.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ea(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _O(n){Sy=n(Sy)}function vO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Hg(this),e,...t);return LA.set(r,e.sort?e.sort():[e]),ea(r)}:pO().includes(n)?function(...e){return n.apply(Hg(this),e),ea(VA.get(this))}:function(...e){return ea(n.apply(Hg(this),e))}}function EO(n){return typeof n=="function"?vO(n):(n instanceof IDBTransaction&&yO(n),dO(n,mO())?new Proxy(n,Sy):n)}function ea(n){if(n instanceof IDBRequest)return gO(n);if(zg.has(n))return zg.get(n);const e=EO(n);return e!==n&&(zg.set(n,e),A_.set(e,n)),e}const Hg=n=>A_.get(n);function UA(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=ea(c);return r&&c.addEventListener("upgradeneeded",m=>{r(ea(c.result),m.oldVersion,m.newVersion,ea(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const wO=["get","getKey","getAll","getAllKeys","count"],bO=["put","add","delete","clear"],$g=new Map;function Bb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=bO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||wO.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return $g.set(e,l),l}_O(n=>({...n,get:(e,t,r)=>Bb(e,t)||n.get(e,t,r),has:(e,t)=>!!Bb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function AO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ry="@firebase/app",zb="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Qd("@firebase/app"),SO="@firebase/app-compat",RO="@firebase/analytics-compat",CO="@firebase/analytics",IO="@firebase/app-check-compat",xO="@firebase/app-check",NO="@firebase/auth",OO="@firebase/auth-compat",DO="@firebase/database",MO="@firebase/data-connect",kO="@firebase/database-compat",PO="@firebase/functions",VO="@firebase/functions-compat",LO="@firebase/installations",UO="@firebase/installations-compat",jO="@firebase/messaging",FO="@firebase/messaging-compat",BO="@firebase/performance",zO="@firebase/performance-compat",HO="@firebase/remote-config",$O="@firebase/remote-config-compat",qO="@firebase/storage",GO="@firebase/storage-compat",KO="@firebase/firestore",QO="@firebase/vertexai",WO="@firebase/firestore-compat",XO="firebase",YO="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="[DEFAULT]",JO={[Ry]:"fire-core",[SO]:"fire-core-compat",[CO]:"fire-analytics",[RO]:"fire-analytics-compat",[xO]:"fire-app-check",[IO]:"fire-app-check-compat",[NO]:"fire-auth",[OO]:"fire-auth-compat",[DO]:"fire-rtdb",[MO]:"fire-data-connect",[kO]:"fire-rtdb-compat",[PO]:"fire-fn",[VO]:"fire-fn-compat",[LO]:"fire-iid",[UO]:"fire-iid-compat",[jO]:"fire-fcm",[FO]:"fire-fcm-compat",[BO]:"fire-perf",[zO]:"fire-perf-compat",[HO]:"fire-rc",[$O]:"fire-rc-compat",[qO]:"fire-gcs",[GO]:"fire-gcs-compat",[KO]:"fire-fst",[WO]:"fire-fst-compat",[QO]:"fire-vertex","fire-js":"fire-js",[XO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map,ZO=new Map,Iy=new Map;function Hb(n,e){try{n.container.addComponent(e)}catch(t){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lr(n){const e=n.name;if(Iy.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Iy.set(e,n);for(const t of md.values())Hb(t,n);for(const t of ZO.values())Hb(t,n);return!0}function da(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ta=new mo("app","Firebase",eD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=YO;function jA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cy,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw ta.create("bad-app-name",{appName:String(a)});if(t||(t=NA()),!t)throw ta.create("no-options");const l=md.get(a);if(l){if(ei(t,l.options)&&ei(r,l.config))return l;throw ta.create("duplicate-app",{appName:a})}const c=new lO(a);for(const m of Iy.values())c.addComponent(m);const d=new tD(t,r,c);return md.set(a,d),d}function Wd(n=Cy){const e=md.get(n);if(!e&&n===Cy&&NA())return jA();if(!e)throw ta.create("no-app",{appName:n});return e}function jn(n,e,t){var r;let a=(r=JO[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(d.join(" "));return}Lr(new vr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="firebase-heartbeat-database",rD=1,Nc="firebase-heartbeat-store";let qg=null;function FA(){return qg||(qg=UA(nD,rD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ta.create("idb-open",{originalErrorMessage:n.message})})),qg}async function sD(n){try{const t=(await FA()).transaction(Nc),r=await t.objectStore(Nc).get(BA(n));return await t.done,r}catch(e){if(e instanceof Er)ti.warn(e.message);else{const t=ta.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(t.message)}}}async function $b(n,e){try{const r=(await FA()).transaction(Nc,"readwrite");await r.objectStore(Nc).put(e,BA(n)),await r.done}catch(t){if(t instanceof Er)ti.warn(t.message);else{const r=ta.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ti.warn(r.message)}}}function BA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=1024,aD=30;class oD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=qb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>aD){const c=cD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ti.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qb(),{heartbeatsToSend:r,unsentEntries:a}=lD(this._heartbeatsCache.heartbeats),l=dd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ti.warn(t),""}}}function qb(){return new Date().toISOString().substring(0,10)}function lD(n,e=iD){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Gb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Gb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class uD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kA()?PA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return $b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return $b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Gb(n){return dd(JSON.stringify({version:2,heartbeats:n})).length}function cD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n){Lr(new vr("platform-logger",e=>new TO(e),"PRIVATE")),Lr(new vr("heartbeat",e=>new oD(e),"PRIVATE")),jn(Ry,zb,n),jn(Ry,zb,"esm2017"),jn("fire-js","")}hD("");var fD="firebase",dD="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(fD,dD,"app");function S_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function zA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mD=zA,HA=new mo("auth","Firebase",zA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Qd("@firebase/auth");function pD(n,...e){pd.logLevel<=He.WARN&&pd.warn(`Auth (${po}): ${n}`,...e)}function Qf(n,...e){pd.logLevel<=He.ERROR&&pd.error(`Auth (${po}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,...e){throw C_(n,...e)}function kr(n,...e){return C_(n,...e)}function R_(n,e,t){const r=Object.assign(Object.assign({},mD()),{[e]:t});return new mo("auth","Firebase",r).create(e,{appName:n.name})}function so(n){return R_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gD(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&fs(n,"argument-error"),R_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function C_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HA.create(n,...e)}function Ce(n,e,...t){if(!n)throw C_(e,...t)}function Qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qf(e),new Error(e)}function ni(n,e){n||Qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yD(){return Kb()==="http:"||Kb()==="https:"}function Kb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yD()||MA()||"connection"in navigator)?navigator.onLine:!0}function vD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ni(t>e,"Short delay should be less than long delay!"),this.isMobile=BN()||$N()}get(){return _D()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e){ni(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bD=new qc(3e4,6e4);function x_(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Bl(n,e,t,r,a={}){return qA(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=$c(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:m},l);return HN()||(g.referrerPolicy="no-referrer"),$A.fetch()(await GA(n,n.config.apiHost,t,d),g)})}async function qA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ED),e);try{const a=new AD(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw If(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw If(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw If(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw If(n,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw R_(n,_,g);fs(n,_)}}catch(a){if(a instanceof Er)throw a;fs(n,"network-request-failed",{message:String(a)})}}async function TD(n,e,t,r,a={}){const l=await Bl(n,e,t,r,a);return"mfaPendingCredential"in l&&fs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function GA(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?I_(n.config,a):`${n.config.apiScheme}://${a}`;return wD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class AD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(kr(this.auth,"network-request-failed")),bD.get())})}}function If(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=kr(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(n,e){return Bl(n,"POST","/v1/accounts:delete",e)}async function gd(n,e){return Bl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RD(n,e=!1){const t=Ot(n),r=await t.getIdToken(e),a=N_(r);Ce(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:wc(Gg(a.auth_time)),issuedAtTime:wc(Gg(a.iat)),expirationTime:wc(Gg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Gg(n){return Number(n)*1e3}function N_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const a=CA(t);return a?JSON.parse(a):(Qf("Failed to decode base64 JWT payload"),null)}catch(a){return Qf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Qb(n){const e=N_(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Er&&CD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function CD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(n){var e;const t=n.auth,r=await n.getIdToken(),a=await Oc(n,gd(t,{idToken:r}));Ce(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?KA(l.providerUserInfo):[],d=ND(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ny(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function xD(n){const e=Ot(n);await yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ND(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function KA(n){return n.map(e=>{var{providerId:t}=e,r=S_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e){const t=await qA(n,{},async()=>{const r=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await GA(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",$A.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DD(n,e){return Bl(n,"POST","/v2/accounts:revokeToken",x_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await OD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new El;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ce(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=S_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ID(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ny(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Oc(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RD(this,e)}reload(){return xD(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(so(this.auth));const e=await this.getIdToken();return await Oc(this,SD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,c,d,m,g,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,O=(c=t.photoURL)!==null&&c!==void 0?c:void 0,L=(d=t.tenantId)!==null&&d!==void 0?d:void 0,P=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(g=t.createdAt)!==null&&g!==void 0?g:void 0,B=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:G,emailVerified:X,isAnonymous:Y,providerData:te,stsTokenManager:M}=t;Ce(G&&M,e,"internal-error");const x=El.fromJSON(this.name,M);Ce(typeof G=="string",e,"internal-error"),qi(w,e.name),qi(T,e.name),Ce(typeof X=="boolean",e,"internal-error"),Ce(typeof Y=="boolean",e,"internal-error"),qi(R,e.name),qi(O,e.name),qi(L,e.name),qi(P,e.name),qi($,e.name),qi(B,e.name);const C=new Or({uid:G,auth:e,email:T,emailVerified:X,displayName:w,isAnonymous:Y,photoURL:O,phoneNumber:R,tenantId:L,stsTokenManager:x,createdAt:$,lastLoginAt:B});return te&&Array.isArray(te)&&(C.providerData=te.map(D=>Object.assign({},D))),P&&(C._redirectEventId=P),C}static async _fromIdTokenResponse(e,t,r=!1){const a=new El;a.updateFromServerResponse(t);const l=new Or({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await yd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ce(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?KA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new El;d.updateFromIdToken(r);const m=new Or({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ny(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new Map;function Ws(n){ni(n instanceof Function,"Expected a class definition");let e=Wb.get(n);return e?(ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QA.type="NONE";const Xb=QA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n,e,t){return`firebase:${n}:${e}:${t}`}class wl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Wf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Wf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gd(this.auth,{idToken:e}).catch(()=>{});return t?Or._fromGetAccountInfoResponse(this.auth,t,e):null}return Or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new wl(Ws(Xb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ws(Xb);const c=Wf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let w;if(typeof _=="string"){const T=await gd(e,{idToken:_}).catch(()=>{});if(!T)break;w=await Or._fromGetAccountInfoResponse(e,T,_)}else w=Or._fromJSON(e,_);g!==l&&(d=w),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new wl(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new wl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eS(e))return"Blackberry";if(tS(e))return"Webos";if(XA(e))return"Safari";if((e.includes("chrome/")||YA(e))&&!e.includes("edge/"))return"Chrome";if(ZA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WA(n=An()){return/firefox\//i.test(n)}function XA(n=An()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YA(n=An()){return/crios\//i.test(n)}function JA(n=An()){return/iemobile/i.test(n)}function ZA(n=An()){return/android/i.test(n)}function eS(n=An()){return/blackberry/i.test(n)}function tS(n=An()){return/webos/i.test(n)}function O_(n=An()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function MD(n=An()){var e;return O_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kD(){return qN()&&document.documentMode===10}function nS(n=An()){return O_(n)||ZA(n)||tS(n)||eS(n)||/windows phone/i.test(n)||JA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n,e=[]){let t;switch(n){case"Browser":t=Yb(An());break;case"Worker":t=`${Yb(An())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${po}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e={}){return Bl(n,"GET","/v2/passwordPolicy",x_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=6;class UD{constructor(e){var t,r,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:LD,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jb(this),this.idTokenSubscription=new Jb(this),this.beforeStateQueue=new PD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ws(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gd(this,{idToken:e}),r=await Or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(so(this));const t=e?Ot(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(so(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(so(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VD(this),t=new UD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await DD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ws(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[Ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&pD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xd(n){return Ot(n)}class Jb{constructor(e){this.auth=e,this.observer=null,this.addObserver=JN(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FD(n){D_=n}function BD(n){return D_.loadJS(n)}function zD(){return D_.gapiScript}function HD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n,e){const t=da(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ei(l,e??{}))return a;fs(a,"already-initialized")}return t.initialize({options:e})}function qD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ws);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function GD(n,e,t){const r=Xd(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=sS(e),{host:c,port:d}=KD(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(ei(g,r.config.emulator)&&ei(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,QD()}function sS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KD(n){const e=sS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Zb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Zb(c)}}}function Zb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,t){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n,e){return TD(n,"POST","/v1/accounts:signInWithIdp",x_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="http://localhost";class ao extends iS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=S_(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new ao(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return bl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,bl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}buildRequest(){const e={requestUri:WD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends M_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Gc{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ao._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ks.credential(t,r)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Gc{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Gc{constructor(){super("twitter.com")}static credential(e,t){return ao._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ji.credential(t,r)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Or._fromIdTokenResponse(e,r,a),c=eT(r);return new Cl({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=eT(r);return new Cl({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function eT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Er{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new _d(e,t,r,a)}}function aS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(n,l,e,r):l})}async function XD(n,e,t=!1){const r=await Oc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(n,e,t=!1){const{auth:r}=n;if(yr(r.app))return Promise.reject(so(r));const a="reauthenticate";try{const l=await Oc(n,aS(r,a,e,n),t);Ce(l.idToken,r,"internal-error");const c=N_(l.idToken);Ce(c,r,"internal-error");const{sub:d}=c;return Ce(n.uid===d,r,"user-mismatch"),Cl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&fs(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(n,e,t=!1){if(yr(n.app))return Promise.reject(so(n));const r="signIn",a=await aS(n,r,e),l=await Cl._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n,e){return Ot(n).setPersistence(e)}function e3(n,e,t,r){return Ot(n).onIdTokenChanged(e,t,r)}function t3(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}function n3(n,e,t,r){return Ot(n).onAuthStateChanged(e,t,r)}function r3(n){return Ot(n).signOut()}const vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vd,"1"),this.storage.removeItem(vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=1e3,i3=10;class lS extends oS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);kD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,i3):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},s3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lS.type="LOCAL";const uS=lS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends oS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cS.type="SESSION";const hS=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Yd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await a3(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=k_("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(w){const T=w;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function l3(n){us().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function u3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c3(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function h3(){return fS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="firebaseLocalStorageDb",f3=1,Ed="firebaseLocalStorage",mS="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jd(n,e){return n.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function d3(){const n=indexedDB.deleteDatabase(dS);return new Kc(n).toPromise()}function Oy(){const n=indexedDB.open(dS,f3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ed,{keyPath:mS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ed)?e(r):(r.close(),await d3(),e(await Oy()))})})}async function tT(n,e,t){const r=Jd(n,!0).put({[mS]:e,value:t});return new Kc(r).toPromise()}async function m3(n,e){const t=Jd(n,!1).get(e),r=await new Kc(t).toPromise();return r===void 0?null:r.value}function nT(n,e){const t=Jd(n,!0).delete(e);return new Kc(t).toPromise()}const p3=800,g3=3;class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>g3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(h3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await u3(),!this.activeServiceWorker)return;this.sender=new o3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oy();return await tT(e,vd,"1"),await nT(e,vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>m3(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Jd(a,!1).getAll();return new Kc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pS.type="LOCAL";const y3=pS;new qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e){return e?Ws(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends iS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _3(n){return JD(n.auth,new P_(n),n.bypassAuthState)}function v3(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),YD(t,new P_(n),n.bypassAuthState)}async function E3(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),XD(t,new P_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _3;case"linkViaPopup":case"linkViaRedirect":return E3;case"reauthViaPopup":case"reauthViaRedirect":return v3;default:fs(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=new qc(2e3,1e4);async function b3(n,e,t){if(yr(n.app))return Promise.reject(kr(n,"operation-not-supported-in-this-environment"));const r=Xd(n);gD(n,e,M_);const a=gS(r,t);return new eo(r,"signInViaPopup",e,a).executeNotNull()}class eo extends yS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=k_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w3.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="pendingRedirect",Xf=new Map;class A3 extends yS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xf.get(this.auth._key());if(!e){try{const r=await S3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xf.set(this.auth._key(),e)}return this.bypassAuthState||Xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S3(n,e){const t=I3(e),r=C3(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function R3(n,e){Xf.set(n._key(),e)}function C3(n){return Ws(n._redirectPersistence)}function I3(n){return Wf(T3,n.config.apiKey,n.name)}async function x3(n,e,t=!1){if(yr(n.app))return Promise.reject(so(n));const r=Xd(n),a=gS(r,e),c=await new A3(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=10*60*1e3;class O3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_S(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(kr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N3&&this.cachedEventUids.clear(),this.cachedEventUids.has(rT(e))}saveEventToCache(e){this.cachedEventUids.add(rT(e)),this.lastProcessedEventTime=Date.now()}}function rT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _S({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _S(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(n,e={}){return Bl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P3=/^https?/;async function V3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await M3(n);for(const t of e)try{if(L3(t))return}catch{}fs(n,"unauthorized-domain")}function L3(n){const e=xy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!P3.test(t))return!1;if(k3.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=new qc(3e4,6e4);function sT(){const n=us().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function j3(n){return new Promise((e,t)=>{var r,a,l;function c(){sT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sT(),t(kr(n,"network-request-failed"))},timeout:U3.get()})}if(!((a=(r=us().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=us().gapi)===null||l===void 0)&&l.load)c();else{const d=HD("iframefcb");return us()[d]=()=>{gapi.load?c():t(kr(n,"network-request-failed"))},BD(`${zD()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Yf=null,e})}let Yf=null;function F3(n){return Yf=Yf||j3(n),Yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new qc(5e3,15e3),z3="__/auth/iframe",H3="emulator/auth/iframe",$3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G3(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?I_(e,H3):`https://${n.config.authDomain}/${z3}`,r={apiKey:e.apiKey,appName:n.name,v:po},a=q3.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${$c(r).slice(1)}`}async function K3(n){const e=await F3(n),t=us().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:G3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$3,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=kr(n,"network-request-failed"),d=us().setTimeout(()=>{l(c)},B3.get());function m(){us().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W3=500,X3=600,Y3="_blank",J3="http://localhost";class iT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z3(n,e,t,r=W3,a=X3){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m=Object.assign(Object.assign({},Q3),{width:r.toString(),height:a.toString(),top:l,left:c}),g=An().toLowerCase();t&&(d=YA(g)?Y3:t),WA(g)&&(e=e||J3,m.scrollbars="yes");const _=Object.entries(m).reduce((T,[R,O])=>`${T}${R}=${O},`,"");if(MD(g)&&d!=="_self")return eM(e||"",d),new iT(null);const w=window.open(e||"",d,_);Ce(w,n,"popup-blocked");try{w.focus()}catch{}return new iT(w)}function eM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="__/auth/handler",nM="emulator/auth/handler",rM=encodeURIComponent("fac");async function aT(n,e,t,r,a,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:po,eventId:a};if(e instanceof M_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",YN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))c[_]=w}if(e instanceof Gc){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),g=m?`#${rM}=${encodeURIComponent(m)}`:"";return`${sM(n)}?${$c(d).slice(1)}${g}`}function sM({config:n}){return n.emulator?I_(n,nM):`https://${n.authDomain}/${tM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="webStorageSupport";class iM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hS,this._completeRedirectFn=x3,this._overrideRedirectResult=R3}async _openPopup(e,t,r,a){var l;ni((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await aT(e,t,r,xy(),a);return Z3(e,c,k_())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await aT(e,t,r,xy(),a);return l3(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ni(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await K3(e),r=new O3(e);return t.register("authEvent",a=>(Ce(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kg,{type:Kg},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Kg];c!==void 0&&t(!!c),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nS()||XA()||O_()}}const aM=iM;var oT="@firebase/auth",lT="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uM(n){Lr(new vr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rS(n)},g=new jD(r,a,l,m);return qD(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lr(new vr("auth-internal",e=>{const t=Xd(e.getProvider("auth").getImmediate());return(r=>new oM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(oT,lT,lM(n)),jn(oT,lT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=5*60,hM=OA("authIdTokenMaxAge")||cM;let uT=null;const fM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hM)return;const a=t==null?void 0:t.token;uT!==a&&(uT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dM(n=Wd()){const e=da(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$D(n,{popupRedirectResolver:aM,persistence:[y3,uS,hS]}),r=OA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=fM(l.toString());t3(t,c,()=>c(t.currentUser)),e3(t,d=>c(d))}}const a=IA("auth");return a&&GD(t,`http://${a}`),t}function mM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}FD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=kr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",mM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uM("Browser");var cT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,vS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function C(){}C.prototype=x.prototype,M.D=x.prototype,M.prototype=new C,M.prototype.constructor=M,M.C=function(D,V,j){for(var N=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)N[Ie-2]=arguments[Ie];return x.prototype[V].apply(D,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,x,C){C||(C=0);var D=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)D[V]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(V=0;16>V;++V)D[V]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=M.g[0],C=M.g[1],V=M.g[2];var j=M.g[3],N=x+(j^C&(V^j))+D[0]+3614090360&4294967295;x=C+(N<<7&4294967295|N>>>25),N=j+(V^x&(C^V))+D[1]+3905402710&4294967295,j=x+(N<<12&4294967295|N>>>20),N=V+(C^j&(x^C))+D[2]+606105819&4294967295,V=j+(N<<17&4294967295|N>>>15),N=C+(x^V&(j^x))+D[3]+3250441966&4294967295,C=V+(N<<22&4294967295|N>>>10),N=x+(j^C&(V^j))+D[4]+4118548399&4294967295,x=C+(N<<7&4294967295|N>>>25),N=j+(V^x&(C^V))+D[5]+1200080426&4294967295,j=x+(N<<12&4294967295|N>>>20),N=V+(C^j&(x^C))+D[6]+2821735955&4294967295,V=j+(N<<17&4294967295|N>>>15),N=C+(x^V&(j^x))+D[7]+4249261313&4294967295,C=V+(N<<22&4294967295|N>>>10),N=x+(j^C&(V^j))+D[8]+1770035416&4294967295,x=C+(N<<7&4294967295|N>>>25),N=j+(V^x&(C^V))+D[9]+2336552879&4294967295,j=x+(N<<12&4294967295|N>>>20),N=V+(C^j&(x^C))+D[10]+4294925233&4294967295,V=j+(N<<17&4294967295|N>>>15),N=C+(x^V&(j^x))+D[11]+2304563134&4294967295,C=V+(N<<22&4294967295|N>>>10),N=x+(j^C&(V^j))+D[12]+1804603682&4294967295,x=C+(N<<7&4294967295|N>>>25),N=j+(V^x&(C^V))+D[13]+4254626195&4294967295,j=x+(N<<12&4294967295|N>>>20),N=V+(C^j&(x^C))+D[14]+2792965006&4294967295,V=j+(N<<17&4294967295|N>>>15),N=C+(x^V&(j^x))+D[15]+1236535329&4294967295,C=V+(N<<22&4294967295|N>>>10),N=x+(V^j&(C^V))+D[1]+4129170786&4294967295,x=C+(N<<5&4294967295|N>>>27),N=j+(C^V&(x^C))+D[6]+3225465664&4294967295,j=x+(N<<9&4294967295|N>>>23),N=V+(x^C&(j^x))+D[11]+643717713&4294967295,V=j+(N<<14&4294967295|N>>>18),N=C+(j^x&(V^j))+D[0]+3921069994&4294967295,C=V+(N<<20&4294967295|N>>>12),N=x+(V^j&(C^V))+D[5]+3593408605&4294967295,x=C+(N<<5&4294967295|N>>>27),N=j+(C^V&(x^C))+D[10]+38016083&4294967295,j=x+(N<<9&4294967295|N>>>23),N=V+(x^C&(j^x))+D[15]+3634488961&4294967295,V=j+(N<<14&4294967295|N>>>18),N=C+(j^x&(V^j))+D[4]+3889429448&4294967295,C=V+(N<<20&4294967295|N>>>12),N=x+(V^j&(C^V))+D[9]+568446438&4294967295,x=C+(N<<5&4294967295|N>>>27),N=j+(C^V&(x^C))+D[14]+3275163606&4294967295,j=x+(N<<9&4294967295|N>>>23),N=V+(x^C&(j^x))+D[3]+4107603335&4294967295,V=j+(N<<14&4294967295|N>>>18),N=C+(j^x&(V^j))+D[8]+1163531501&4294967295,C=V+(N<<20&4294967295|N>>>12),N=x+(V^j&(C^V))+D[13]+2850285829&4294967295,x=C+(N<<5&4294967295|N>>>27),N=j+(C^V&(x^C))+D[2]+4243563512&4294967295,j=x+(N<<9&4294967295|N>>>23),N=V+(x^C&(j^x))+D[7]+1735328473&4294967295,V=j+(N<<14&4294967295|N>>>18),N=C+(j^x&(V^j))+D[12]+2368359562&4294967295,C=V+(N<<20&4294967295|N>>>12),N=x+(C^V^j)+D[5]+4294588738&4294967295,x=C+(N<<4&4294967295|N>>>28),N=j+(x^C^V)+D[8]+2272392833&4294967295,j=x+(N<<11&4294967295|N>>>21),N=V+(j^x^C)+D[11]+1839030562&4294967295,V=j+(N<<16&4294967295|N>>>16),N=C+(V^j^x)+D[14]+4259657740&4294967295,C=V+(N<<23&4294967295|N>>>9),N=x+(C^V^j)+D[1]+2763975236&4294967295,x=C+(N<<4&4294967295|N>>>28),N=j+(x^C^V)+D[4]+1272893353&4294967295,j=x+(N<<11&4294967295|N>>>21),N=V+(j^x^C)+D[7]+4139469664&4294967295,V=j+(N<<16&4294967295|N>>>16),N=C+(V^j^x)+D[10]+3200236656&4294967295,C=V+(N<<23&4294967295|N>>>9),N=x+(C^V^j)+D[13]+681279174&4294967295,x=C+(N<<4&4294967295|N>>>28),N=j+(x^C^V)+D[0]+3936430074&4294967295,j=x+(N<<11&4294967295|N>>>21),N=V+(j^x^C)+D[3]+3572445317&4294967295,V=j+(N<<16&4294967295|N>>>16),N=C+(V^j^x)+D[6]+76029189&4294967295,C=V+(N<<23&4294967295|N>>>9),N=x+(C^V^j)+D[9]+3654602809&4294967295,x=C+(N<<4&4294967295|N>>>28),N=j+(x^C^V)+D[12]+3873151461&4294967295,j=x+(N<<11&4294967295|N>>>21),N=V+(j^x^C)+D[15]+530742520&4294967295,V=j+(N<<16&4294967295|N>>>16),N=C+(V^j^x)+D[2]+3299628645&4294967295,C=V+(N<<23&4294967295|N>>>9),N=x+(V^(C|~j))+D[0]+4096336452&4294967295,x=C+(N<<6&4294967295|N>>>26),N=j+(C^(x|~V))+D[7]+1126891415&4294967295,j=x+(N<<10&4294967295|N>>>22),N=V+(x^(j|~C))+D[14]+2878612391&4294967295,V=j+(N<<15&4294967295|N>>>17),N=C+(j^(V|~x))+D[5]+4237533241&4294967295,C=V+(N<<21&4294967295|N>>>11),N=x+(V^(C|~j))+D[12]+1700485571&4294967295,x=C+(N<<6&4294967295|N>>>26),N=j+(C^(x|~V))+D[3]+2399980690&4294967295,j=x+(N<<10&4294967295|N>>>22),N=V+(x^(j|~C))+D[10]+4293915773&4294967295,V=j+(N<<15&4294967295|N>>>17),N=C+(j^(V|~x))+D[1]+2240044497&4294967295,C=V+(N<<21&4294967295|N>>>11),N=x+(V^(C|~j))+D[8]+1873313359&4294967295,x=C+(N<<6&4294967295|N>>>26),N=j+(C^(x|~V))+D[15]+4264355552&4294967295,j=x+(N<<10&4294967295|N>>>22),N=V+(x^(j|~C))+D[6]+2734768916&4294967295,V=j+(N<<15&4294967295|N>>>17),N=C+(j^(V|~x))+D[13]+1309151649&4294967295,C=V+(N<<21&4294967295|N>>>11),N=x+(V^(C|~j))+D[4]+4149444226&4294967295,x=C+(N<<6&4294967295|N>>>26),N=j+(C^(x|~V))+D[11]+3174756917&4294967295,j=x+(N<<10&4294967295|N>>>22),N=V+(x^(j|~C))+D[2]+718787259&4294967295,V=j+(N<<15&4294967295|N>>>17),N=C+(j^(V|~x))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(V+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+j&4294967295}r.prototype.u=function(M,x){x===void 0&&(x=M.length);for(var C=x-this.blockSize,D=this.B,V=this.h,j=0;j<x;){if(V==0)for(;j<=C;)a(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<x;)if(D[V++]=M.charCodeAt(j++),V==this.blockSize){a(this,D),V=0;break}}else for(;j<x;)if(D[V++]=M[j++],V==this.blockSize){a(this,D),V=0;break}}this.h=V,this.o+=x},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;var C=8*this.o;for(x=M.length-8;x<M.length;++x)M[x]=C&255,C/=256;for(this.u(M),M=Array(16),x=C=0;4>x;++x)for(var D=0;32>D;D+=8)M[C++]=this.g[x]>>>D&255;return M};function l(M,x){var C=d;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=x(M)}function c(M,x){this.h=x;for(var C=[],D=!0,V=M.length-1;0<=V;V--){var j=M[V]|0;D&&j==x||(C[V]=j,D=!1)}this.g=C}var d={};function m(M){return-128<=M&&128>M?l(M,function(x){return new c([x|0],0>x?-1:0)}):new c([M|0],0>M?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return w;if(0>M)return P(g(-M));for(var x=[],C=1,D=0;M>=C;D++)x[D]=M/C|0,C*=4294967296;return new c(x,0)}function _(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return P(_(M.substring(1),x));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(x,8)),D=w,V=0;V<M.length;V+=8){var j=Math.min(8,M.length-V),N=parseInt(M.substring(V,V+j),x);8>j?(j=g(Math.pow(x,j)),D=D.j(j).add(g(N))):(D=D.j(C),D=D.add(g(N)))}return D}var w=m(0),T=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-P(this).m();for(var M=0,x=1,C=0;C<this.g.length;C++){var D=this.i(C);M+=(0<=D?D:4294967296+D)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(L(this))return"-"+P(this).toString(M);for(var x=g(Math.pow(M,6)),C=this,D="";;){var V=X(C,x).g;C=$(C,V.j(x));var j=((0<C.g.length?C.g[0]:C.h)>>>0).toString(M);if(C=V,O(C))return j+D;for(;6>j.length;)j="0"+j;D=j+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(var x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=$(this,M),L(M)?-1:O(M)?0:1};function P(M){for(var x=M.g.length,C=[],D=0;D<x;D++)C[D]=~M.g[D];return new c(C,~M.h).add(T)}n.abs=function(){return L(this)?P(this):this},n.add=function(M){for(var x=Math.max(this.g.length,M.g.length),C=[],D=0,V=0;V<=x;V++){var j=D+(this.i(V)&65535)+(M.i(V)&65535),N=(j>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);D=N>>>16,j&=65535,N&=65535,C[V]=N<<16|j}return new c(C,C[C.length-1]&-2147483648?-1:0)};function $(M,x){return M.add(P(x))}n.j=function(M){if(O(this)||O(M))return w;if(L(this))return L(M)?P(this).j(P(M)):P(P(this).j(M));if(L(M))return P(this.j(P(M)));if(0>this.l(R)&&0>M.l(R))return g(this.m()*M.m());for(var x=this.g.length+M.g.length,C=[],D=0;D<2*x;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<M.g.length;V++){var j=this.i(D)>>>16,N=this.i(D)&65535,Ie=M.i(V)>>>16,we=M.i(V)&65535;C[2*D+2*V]+=N*we,B(C,2*D+2*V),C[2*D+2*V+1]+=j*we,B(C,2*D+2*V+1),C[2*D+2*V+1]+=N*Ie,B(C,2*D+2*V+1),C[2*D+2*V+2]+=j*Ie,B(C,2*D+2*V+2)}for(D=0;D<x;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=x;D<2*x;D++)C[D]=0;return new c(C,0)};function B(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function G(M,x){this.g=M,this.h=x}function X(M,x){if(O(x))throw Error("division by zero");if(O(M))return new G(w,w);if(L(M))return x=X(P(M),x),new G(P(x.g),P(x.h));if(L(x))return x=X(M,P(x)),new G(P(x.g),x.h);if(30<M.g.length){if(L(M)||L(x))throw Error("slowDivide_ only works with positive integers.");for(var C=T,D=x;0>=D.l(M);)C=Y(C),D=Y(D);var V=te(C,1),j=te(D,1);for(D=te(D,2),C=te(C,2);!O(D);){var N=j.add(D);0>=N.l(M)&&(V=V.add(C),j=N),D=te(D,1),C=te(C,1)}return x=$(M,V.j(x)),new G(V,x)}for(V=w;0<=M.l(x);){for(C=Math.max(1,Math.floor(M.m()/x.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),j=g(C),N=j.j(x);L(N)||0<N.l(M);)C-=D,j=g(C),N=j.j(x);O(j)&&(j=T),V=V.add(j),M=$(M,N)}return new G(V,M)}n.A=function(M){return X(this,M).h},n.and=function(M){for(var x=Math.max(this.g.length,M.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)&M.i(D);return new c(C,this.h&M.h)},n.or=function(M){for(var x=Math.max(this.g.length,M.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)|M.i(D);return new c(C,this.h|M.h)},n.xor=function(M){for(var x=Math.max(this.g.length,M.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)^M.i(D);return new c(C,this.h^M.h)};function Y(M){for(var x=M.g.length+1,C=[],D=0;D<x;D++)C[D]=M.i(D)<<1|M.i(D-1)>>>31;return new c(C,M.h)}function te(M,x){var C=x>>5;x%=32;for(var D=M.g.length-C,V=[],j=0;j<D;j++)V[j]=0<x?M.i(j+C)>>>x|M.i(j+C+1)<<32-x:M.i(j+C);return new c(V,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,na=c}).apply(typeof cT<"u"?cT:typeof self<"u"?self:typeof window<"u"?window:{});var xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ES,cc,wS,Jf,Dy,bS,TS,AS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof xf=="object"&&xf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in v))break e;v=v[q]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,S=!1,q={next:function(){if(!S&&v<h.length){var W=v++;return{value:y(W,h[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function w(h,y,v){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function T(h,y,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function R(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function O(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(S,q,W){for(var le=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)le[Ge-2]=arguments[Ge];return y.prototype[q].apply(S,le)}}function L(h){const y=h.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function P(h,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(m(S)){const q=h.length||0,W=S.length||0;h.length=q+W;for(let le=0;le<W;le++)h[q+le]=S[le]}else h.push(S)}}class ${constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function X(h){return X[" "](h),h}X[" "]=function(){};var Y=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function te(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function M(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function x(h){const y={};for(const v in h)y[v]=h[v];return y}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,y){let v,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(v in S)h[v]=S[v];for(let W=0;W<C.length;W++)v=C[W],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function V(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function j(h){d.setTimeout(()=>{throw h},0)}function N(){var h=Be;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const S=we.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var we=new $(()=>new J,h=>h.reset());class J{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,he=!1,Be=new Ie,U=()=>{const h=d.Promise.resolve(void 0);ue=()=>{h.then(ie)}};var ie=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(v){j(v)}var y=we;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}he=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function be(h,y){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(Y){e:{try{X(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&be.aa.h.call(this)}}O(be,ce);var Re={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Ze(h,y,v,S,q){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=q,this.key=++Le,this.da=this.fa=!1}function Ue(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function dt(h){this.src=h,this.g={},this.h=0}dt.prototype.add=function(h,y,v,S,q){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var le=Rt(h,y,S,q);return-1<le?(y=h[le],v||(y.fa=!1)):(y=new Ze(y,this.src,W,!!S,q),y.fa=v,h.push(y)),y};function Lt(h,y){var v=y.type;if(v in h.g){var S=h.g[v],q=Array.prototype.indexOf.call(S,y,void 0),W;(W=0<=q)&&Array.prototype.splice.call(S,q,1),W&&(Ue(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Rt(h,y,v,S){for(var q=0;q<h.length;++q){var W=h[q];if(!W.da&&W.listener==y&&W.capture==!!v&&W.ha==S)return q}return-1}var Wt="closure_lm_"+(1e6*Math.random()|0),je={};function gn(h,y,v,S,q){if(Array.isArray(y)){for(var W=0;W<y.length;W++)gn(h,y[W],v,S,q);return null}return v=ui(v),h&&h[it]?h.K(y,v,g(S)?!!S.capture:!1,q):Dn(h,y,v,!1,S,q)}function Dn(h,y,v,S,q,W){if(!y)throw Error("Invalid event type");var le=g(q)?!!q.capture:!!q,Ge=_s(h);if(Ge||(h[Wt]=Ge=new dt(h)),v=Ge.add(y,v,S,le,W),v.proxy)return v;if(S=wr(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)oe||(q=le),q===void 0&&(q=!1),h.addEventListener(y.toString(),S,q);else if(h.attachEvent)h.attachEvent(br(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wr(){function h(v){return y.call(h.src,h.listener,v)}const y=ya;return h}function Fr(h,y,v,S,q){if(Array.isArray(y))for(var W=0;W<y.length;W++)Fr(h,y[W],v,S,q);else S=g(S)?!!S.capture:!!S,v=ui(v),h&&h[it]?(h=h.i,y=String(y).toString(),y in h.g&&(W=h.g[y],v=Rt(W,v,S,q),-1<v&&(Ue(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete h.g[y],h.h--)))):h&&(h=_s(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Rt(y,v,S,q)),(v=-1<h?y[h]:null)&&Bn(v))}function Bn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[it])Lt(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(br(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=_s(y))?(Lt(v,h),v.h==0&&(v.src=null,y[Wt]=null)):Ue(h)}}}function br(h){return h in je?je[h]:je[h]="on"+h}function ya(h,y){if(h.da)h=!0;else{y=new be(y,this);var v=h.listener,S=h.ha||h.src;h.fa&&Bn(h),h=v.call(S,y)}return h}function _s(h){return h=h[Wt],h instanceof dt?h:null}var Ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function ui(h){return typeof h=="function"?h:(h[Ut]||(h[Ut]=function(y){return h.handleEvent(y)}),h[Ut])}function Ee(){fe.call(this),this.i=new dt(this),this.M=this,this.F=null}O(Ee,fe),Ee.prototype[it]=!0,Ee.prototype.removeEventListener=function(h,y,v,S){Fr(this,h,y,v,S)};function at(h,y){var v,S=h.F;if(S)for(v=[];S;S=S.F)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new ce(y,h);else if(y instanceof ce)y.target=y.target||h;else{var q=y;y=new ce(S,h),D(y,q)}if(q=!0,v)for(var W=v.length-1;0<=W;W--){var le=y.g=v[W];q=Mn(le,S,!0,y)&&q}if(le=y.g=h,q=Mn(le,S,!0,y)&&q,q=Mn(le,S,!1,y)&&q,v)for(W=0;W<v.length;W++)le=y.g=v[W],q=Mn(le,S,!1,y)&&q}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],S=0;S<v.length;S++)Ue(v[S]);delete h.g[y],h.h--}}this.F=null},Ee.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Ee.prototype.L=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Mn(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,W=0;W<y.length;++W){var le=y[W];if(le&&!le.da&&le.capture==v){var Ge=le.listener,Ft=le.ha||le.src;le.fa&&Lt(h.i,le),q=Ge.call(Ft,S)!==!1&&q}}return q&&!S.defaultPrevented}function vs(h,y,v){if(typeof h=="function")v&&(h=T(h,v));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function er(h){h.g=vs(()=>{h.g=null,h.i&&(h.i=!1,er(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class nu extends fe{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:er(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(h){fe.call(this),this.h=h,this.g={}}O(Br,fe);var ci=[];function yn(h){te(h.g,function(y,v){this.g.hasOwnProperty(v)&&Bn(y)},h),h.g={}}Br.prototype.N=function(){Br.aa.N.call(this),yn(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ru=d.JSON.stringify,zr=d.JSON.parse,Sn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function su(){}su.prototype.h=null;function oh(h){return h.h||(h.h=h.i())}function lh(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){ce.call(this,"d")}O(hi,ce);function Tr(){ce.call(this,"c")}O(Tr,ce);var tr={},fi=null;function _o(){return fi=fi||new Ee}tr.La="serverreachability";function iu(h){ce.call(this,tr.La,h)}O(iu,ce);function di(h){const y=_o();at(y,new iu(y))}tr.STAT_EVENT="statevent";function vo(h,y){ce.call(this,tr.STAT_EVENT,h),this.stat=y}O(vo,ce);function Ct(h){const y=_o();at(y,new vo(y,h))}tr.Ma="timingevent";function uh(h,y){ce.call(this,tr.Ma,h),this.size=y}O(uh,ce);function mi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function pi(){this.g=!0}pi.prototype.xa=function(){this.g=!1};function ch(h,y,v,S,q,W){h.info(function(){if(h.g)if(W)for(var le="",Ge=W.split("&"),Ft=0;Ft<Ge.length;Ft++){var Ke=Ge[Ft].split("=");if(1<Ke.length){var Jt=Ke[0];Ke=Ke[1];var Bt=Jt.split("_");le=2<=Bt.length&&Bt[1]=="type"?le+(Jt+"="+Ke+"&"):le+(Jt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+v+`
`+le})}function hh(h,y,v,S,q,W,le){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+v+`
`+W+" "+le})}function gi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Xt(h,v)+(S?" "+S:"")})}function $r(h,y){h.info(function(){return"TIMEOUT: "+y})}pi.prototype.info=function(){};function Xt(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var S=v[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var W=q[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<q.length;le++)q[le]=""}}}}return ru(v)}catch{return y}}var jt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Es={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_a;function Eo(){}O(Eo,su),Eo.prototype.g=function(){return new XMLHttpRequest},Eo.prototype.i=function(){return{}},_a=new Eo;function qr(h,y,v,S){this.j=h,this.i=y,this.l=v,this.R=S||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}var yi={},va={};function Ar(h,y,v){h.L=1,h.v=ba(Et(y)),h.m=v,h.P=!0,ws(h,null)}function ws(h,y){h.F=Date.now(),mt(h),h.A=Et(h.v);var v=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),As(v.i,"t",S),h.C=0,v=h.j.J,h.h=new au,h.g=Sh(h.j,v?y:null,!h.m),0<h.O&&(h.M=new nu(T(h.Y,h,h.g),h.O)),y=h.U,v=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(ci[0]=q.toString()),q=ci);for(var W=0;W<q.length;W++){var le=gn(v,q[W],S||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),di(),ch(h.i,h.u,h.A,h.l,h.R,h.m)}qr.prototype.ca=function(h){h=h.target;const y=this.M;y&&ar(h)==3?y.j():this.Y(h)},qr.prototype.Y=function(h){try{if(h==this.g)e:{const Bt=ar(this.g);var y=this.g.Ba();const Is=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||yh(this.g)))){this.J||Bt!=4||y==7||(y==8||0>=Is?di(3):di(2)),wo(this);var v=this.g.Z();this.X=v;t:if(_i(this)){var S=yh(this.g);h="";var q=S.length,W=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),zn(this);var le="";break t}this.h.i=new d.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(W&&y==q-1)});S.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,hh(this.i,this.u,this.A,this.l,this.R,Bt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Ft=this.g;if((Ge=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ge)){var Ke=Ge;break t}}Ke=null}if(v=Ke)gi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hn(this,v);else{this.o=!1,this.s=3,Ct(12),kn(this),zn(this);break e}}if(this.P){v=!0;let an;for(;!this.J&&this.C<le.length;)if(an=vi(this,le),an==va){Bt==4&&(this.s=4,Ct(14),v=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(an==yi){this.s=4,Ct(15),gi(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else gi(this.i,this.l,an,null),Hn(this,an);if(_i(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||le.length!=0||this.h.h||(this.s=1,Ct(16),v=!1),this.o=this.o&&v,!v)gi(this.i,this.l,le,"[Invalid Chunked Response]"),kn(this),zn(this);else if(0<le.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),xa(Jt),Jt.M=!0,Ct(11))}}else gi(this.i,this.l,le,null),Hn(this,le);Bt==4&&kn(this),this.o&&!this.J&&(Bt==4?bh(this.j,this):(this.o=!1,mt(this)))}else Bm(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),kn(this),zn(this)}}}catch{}finally{}};function _i(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function vi(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?va:(v=Number(y.substring(v,S)),isNaN(v)?yi:(S+=1,S+v>y.length?va:(y=y.slice(S,S+v),h.C=S+v,y)))}qr.prototype.cancel=function(){this.J=!0,kn(this)};function mt(h){h.S=Date.now()+h.I,ou(h,h.I)}function ou(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=mi(T(h.ba,h),y)}function wo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}qr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($r(this.i,this.A),this.L!=2&&(di(),Ct(17)),kn(this),this.s=2,zn(this)):ou(this,this.S-h)};function zn(h){h.j.G==0||h.J||bh(h.j,h)}function kn(h){wo(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,yn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Hn(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Ei(v.h,h))){if(!h.K&&Ei(v.h,h)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Oo(v),xo(v);else break e;_u(v),Ct(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=mi(T(v.Za,v),6e3));if(1>=fh(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Cs(v,11)}else if((h.K||v.g==h)&&Oo(v),!B(y))for(q=v.Da.g.parse(y),y=0;y<q.length;y++){let Ke=q[y];if(v.T=Ke[0],Ke=Ke[1],v.G==2)if(Ke[0]=="c"){v.K=Ke[1],v.ia=Ke[2];const Jt=Ke[3];Jt!=null&&(v.la=Jt,v.j.info("VER="+v.la));const Bt=Ke[4];Bt!=null&&(v.Aa=Bt,v.j.info("SVER="+v.Aa));const Is=Ke[5];Is!=null&&typeof Is=="number"&&0<Is&&(S=1.5*Is,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const an=h.g;if(an){const Jr=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var W=S.h;W.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wi(W,W.h),W.h=null))}if(S.D){const Eu=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(S.ya=Eu,Xe(S.I,S.D,Eu))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var le=h;if(S.qa=Ah(S,S.J?S.ia:null,S.W),le.K){nr(S.h,le);var Ge=le,Ft=S.L;Ft&&(Ge.I=Ft),Ge.B&&(wo(Ge),mt(Ge)),S.g=le}else Eh(S);0<v.i.length&&No(v)}else Ke[0]!="stop"&&Ke[0]!="close"||Cs(v,7);else v.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Cs(v,7):gu(v):Ke[0]!="noop"&&v.l&&v.l.ta(Ke),v.v=0)}}di(4)}catch{}}var Vm=class{constructor(h,y){this.g=h,this.map=y}};function lu(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fh(h){return h.h?1:h.g?h.g.size:0}function Ei(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function wi(h,y){h.g?h.g.add(y):h.h=y}function nr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}lu.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return L(h.i)}function dh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,S=0;S<v;S++)y.push(h[S]);return y}y=[],v=0;for(S in h)y[v++]=h[S];return y}function Lm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const S in h)y[v++]=S;return y}}}function Ea(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Lm(h),S=dh(h),q=S.length,W=0;W<q;W++)y.call(void 0,S[W],v&&v[W],h)}var cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bo(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var S=h[v].indexOf("="),q=null;if(0<=S){var W=h[v].substring(0,S);q=h[v].substring(S+1)}else W=h[v];y(W,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function bs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof bs){this.h=h.h,bi(this,h.j),this.o=h.o,this.g=h.g,wa(this,h.s),this.l=h.l;var y=h.i,v=new Gr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),To(this,v),this.m=h.m}else h&&(y=String(h).match(cu))?(this.h=!1,bi(this,y[1]||"",!0),this.o=Ti(y[2]||""),this.g=Ti(y[3]||"",!0),wa(this,y[4]),this.l=Ti(y[5]||"",!0),To(this,y[6]||"",!0),this.m=Ti(y[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}bs.prototype.toString=function(){var h=[],y=this.j;y&&h.push(rr(y,hu,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(rr(y,hu,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(rr(v,v.charAt(0)=="/"?fu:mh,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",rr(v,Fm)),h.join("")};function Et(h){return new bs(h)}function bi(h,y,v){h.j=v?Ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function wa(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function To(h,y,v){y instanceof Gr?(h.i=y,du(h.i,h.h)):(v||(y=rr(y,jm)),h.i=new Gr(y,h.h))}function Xe(h,y,v){h.i.set(y,v)}function ba(h){return Xe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function rr(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Um),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Um(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var hu=/[#\/\?@]/g,mh=/[#\?:]/g,fu=/[#\?]/g,jm=/[#\?@]/g,Fm=/#/g;function Gr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function sr(h){h.g||(h.g=new Map,h.h=0,h.i&&bo(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Gr.prototype,n.add=function(h,y){sr(this),this.i=null,h=Ss(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ao(h,y){sr(h),y=Ss(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ts(h,y){return sr(h),y=Ss(h,y),h.g.has(y)}n.forEach=function(h,y){sr(this),this.g.forEach(function(v,S){v.forEach(function(q){h.call(y,q,S,this)},this)},this)},n.na=function(){sr(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const q=h[S];for(let W=0;W<q.length;W++)v.push(y[S])}return v},n.V=function(h){sr(this);let y=[];if(typeof h=="string")Ts(this,h)&&(y=y.concat(this.g.get(Ss(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return sr(this),this.i=null,h=Ss(this,h),Ts(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function As(h,y,v){Ao(h,y),0<v.length&&(h.i=null,h.g.set(Ss(h,y),L(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const W=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var q=W;le[S]!==""&&(q+="="+encodeURIComponent(String(le[S]))),h.push(q)}}return this.i=h.join("&")};function Ss(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function du(h,y){y&&!h.j&&(sr(h),h.i=null,h.g.forEach(function(v,S){var q=S.toLowerCase();S!=q&&(Ao(this,S),As(this,q,v))},h)),h.j=y}function ph(h,y){const v=new pi;if(d.Image){const S=new Image;S.onload=R(ir,v,"TestLoadImage: loaded",!0,y,S),S.onerror=R(ir,v,"TestLoadImage: error",!1,y,S),S.onabort=R(ir,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=R(ir,v,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Ta(h,y){const v=new pi,S=new AbortController,q=setTimeout(()=>{S.abort(),ir(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(W=>{clearTimeout(q),W.ok?ir(v,"TestPingServer: ok",!0,y):ir(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),ir(v,"TestPingServer: error",!1,y)})}function ir(h,y,v,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(v)}catch{}}function Aa(){this.g=new Sn}function Kr(h,y,v){const S=v||"";try{Ea(h,function(q,W){let le=q;g(q)&&(le=ru(q)),y.push(S+W+"="+encodeURIComponent(le))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function Ai(h){this.l=h.Ub||null,this.j=h.eb||!1}O(Ai,su),Ai.prototype.g=function(){return new Rs(this.l,this.j)},Ai.prototype.i=function(h){return function(){return h}}({});function Rs(h,y){Ee.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Rs,Ee),n=Rs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Wr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function mu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Qr(this):Wr(this),this.readyState==3&&mu(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Qr(this))},n.Qa=function(h){this.g&&(this.response=h,Qr(this))},n.ga=function(){this.g&&Qr(this)};function Qr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Wr(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function pu(h){let y="";return te(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Yt(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=pu(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Xe(h,y,v))}function et(h){Ee.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(et,Ee);var So=/^https?$/i,Sa=["POST","PUT"];n=et.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_a.g(),this.v=this.o?oh(this.o):oh(_a),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){gh(this,W);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)v.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Sa,y,void 0))||S||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of v)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ra(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){gh(this,W)}};function gh(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Ro(h),Xr(h)}function Ro(h){h.A||(h.A=!0,at(h,"complete"),at(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,at(this,"complete"),at(this,"abort"),Xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xr(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Co(this):this.bb())},n.bb=function(){Co(this)};function Co(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ar(h)!=4||h.Z()!=2)){if(h.u&&ar(h)==4)vs(h.Ea,0,h);else if(at(h,"readystatechange"),ar(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=le===0){var q=String(h.D).match(cu)[1]||null;!q&&d.self&&d.self.location&&(q=d.self.location.protocol.slice(0,-1)),S=!So.test(q?q.toLowerCase():"")}v=S}if(v)at(h,"complete"),at(h,"success");else{h.m=6;try{var W=2<ar(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Ro(h)}}finally{Xr(h)}}}}function Xr(h,y){if(h.g){Ra(h);const v=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||at(h,"ready");try{v.onreadystatechange=S}catch{}}}function Ra(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ar(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),zr(y)}};function yh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bm(h){const y={};h=(h.g&&2<=ar(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(B(h[S]))continue;var v=V(h[S]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=y[q]||[];y[q]=W,W.push(v)}M(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Io(h){this.Aa=0,this.i=[],this.j=new pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,h),this.cb=Ca("retryDelaySeedMs",1e4,h),this.Wa=Ca("forwardChannelMaxRetries",2,h),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new lu(h&&h.concurrentRequestLimit),this.Da=new Aa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Io.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,S){Ct(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Ah(this,null,this.W),No(this)};function gu(h){if(_h(h),h.G==3){var y=h.U++,v=Et(h.I);if(Xe(v,"SID",h.K),Xe(v,"RID",y),Xe(v,"TYPE","terminate"),Ia(h,v),y=new qr(h,h.j,y),y.L=2,y.v=ba(Et(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Sh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),mt(y)}Th(h)}function xo(h){h.g&&(xa(h),h.g.cancel(),h.g=null)}function _h(h){xo(h),h.u&&(d.clearTimeout(h.u),h.u=null),Oo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function No(h){if(!uu(h.h)&&!h.s){h.s=!0;var y=h.Ga;ue||U(),he||(ue(),he=!0),Be.add(y,h),h.B=0}}function zm(h,y){return fh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=mi(T(h.Ga,h,y),vu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new qr(this,this.j,h);let W=this.o;if(this.S&&(W?(W=x(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(q.H=W,W=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=vh(this,q,y),v=Et(this.I),Xe(v,"RID",h),Xe(v,"CVER",22),this.D&&Xe(v,"X-HTTP-Session-Id",this.D),Ia(this,v),W&&(this.O?y="headers="+encodeURIComponent(String(pu(W)))+"&"+y:this.m&&Yt(v,this.m,W)),wi(this.h,q),this.Ua&&Xe(v,"TYPE","init"),this.P?(Xe(v,"$req",y),Xe(v,"SID","null"),q.T=!0,Ar(q,v,null)):Ar(q,v,y),this.G=2}}else this.G==3&&(h?yu(this,h):this.i.length==0||uu(this.h)||yu(this))};function yu(h,y){var v;y?v=y.l:v=h.U++;const S=Et(h.I);Xe(S,"SID",h.K),Xe(S,"RID",v),Xe(S,"AID",h.T),Ia(h,S),h.m&&h.o&&Yt(S,h.m,h.o),v=new qr(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=vh(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),wi(h.h,v),Ar(v,S,y)}function Ia(h,y){h.H&&te(h.H,function(v,S){Xe(y,S,v)}),h.l&&Ea({},function(v,S){Xe(y,S,v)})}function vh(h,y,v){v=Math.min(h.i.length,v);var S=h.l?T(h.l.Na,h.l,h):null;e:{var q=h.i;let W=-1;for(;;){const le=["count="+v];W==-1?0<v?(W=q[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Ge=!0;for(let Ft=0;Ft<v;Ft++){let Ke=q[Ft].g;const Jt=q[Ft].map;if(Ke-=W,0>Ke)W=Math.max(0,q[Ft].g-100),Ge=!1;else try{Kr(Jt,le,"req"+Ke+"_")}catch{S&&S(Jt)}}if(Ge){S=le.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,S}function Eh(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ue||U(),he||(ue(),he=!0),Be.add(y,h),h.v=0}}function _u(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=mi(T(h.Fa,h),vu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,wh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=mi(T(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),xo(this),wh(this))};function xa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function wh(h){h.g=new qr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Et(h.qa);Xe(y,"RID","rpc"),Xe(y,"SID",h.K),Xe(y,"AID",h.T),Xe(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xe(y,"TO",h.ja),Xe(y,"TYPE","xmlhttp"),Ia(h,y),h.m&&h.o&&Yt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ba(Et(y)),v.m=null,v.P=!0,ws(v,h)}n.Za=function(){this.C!=null&&(this.C=null,xo(this),_u(this),Ct(19))};function Oo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function bh(h,y){var v=null;if(h.g==y){Oo(h),xa(h),h.g=null;var S=2}else if(Ei(h.h,y))v=y.D,nr(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;S=_o(),at(S,new uh(S,v)),No(h)}else Eh(h);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&zm(h,y)||S==2&&_u(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),q){case 1:Cs(h,5);break;case 4:Cs(h,10);break;case 3:Cs(h,6);break;default:Cs(h,2)}}}function vu(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Cs(h,y){if(h.j.info("Error code "+y),y==2){var v=T(h.fb,h),S=h.Xa;const q=!S;S=new bs(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||bi(S,"https"),ba(S),q?ph(S.toString(),v):Ta(S.toString(),v)}else Ct(2);h.G=0,h.l&&h.l.sa(y),Th(h),_h(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Th(h){if(h.G=0,h.ka=[],h.l){const y=Rn(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ka,y),P(h.ka,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.ra()}}function Ah(h,y,v){var S=v instanceof bs?Et(v):new bs(v);if(S.g!="")y&&(S.g=y+"."+S.g),wa(S,S.s);else{var q=d.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var W=new bs(null);S&&bi(W,S),y&&(W.g=y),q&&wa(W,q),v&&(W.l=v),S=W}return v=h.D,y=h.ya,v&&y&&Xe(S,v,y),Xe(S,"VER",h.la),Ia(h,S),S}function Sh(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new et(new Ai({eb:v})):new et(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rh(){}n=Rh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Do(){}Do.prototype.g=function(h,y){return new Cn(h,y)};function Cn(h,y){Ee.call(this),this.g=new Io(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!B(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!B(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Yr(this)}O(Cn,Ee),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){gu(this.g)},Cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=ru(h),h=v);y.i.push(new Vm(y.Ya++,h)),y.G==3&&No(y)},Cn.prototype.N=function(){this.g.l=null,delete this.j,gu(this.g),delete this.g,Cn.aa.N.call(this)};function Ch(h){hi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}O(Ch,hi);function Ih(){Tr.call(this),this.status=1}O(Ih,Tr);function Yr(h){this.g=h}O(Yr,Rh),Yr.prototype.ua=function(){at(this.g,"a")},Yr.prototype.ta=function(h){at(this.g,new Ch(h))},Yr.prototype.sa=function(h){at(this.g,new Ih)},Yr.prototype.ra=function(){at(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,AS=function(){return new Do},TS=function(){return _o()},bS=tr,Dy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jt.NO_ERROR=0,jt.TIMEOUT=8,jt.HTTP_ERROR=6,Jf=jt,Es.COMPLETE="complete",wS=Es,lh.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,cc=lh,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,ES=et}).apply(typeof xf<"u"?xf:typeof self<"u"?self:typeof window<"u"?window:{});const hT="@firebase/firestore",fT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new Qd("@firebase/firestore");function fl(){return oo.logLevel}function de(n,...e){if(oo.logLevel<=He.DEBUG){const t=e.map(V_);oo.debug(`Firestore (${zl}): ${n}`,...t)}}function ri(n,...e){if(oo.logLevel<=He.ERROR){const t=e.map(V_);oo.error(`Firestore (${zl}): ${n}`,...t)}}function Il(n,...e){if(oo.logLevel<=He.WARN){const t=e.map(V_);oo.warn(`Firestore (${zl}): ${n}`,...t)}}function V_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+n;throw ri(e),new Error(e)}function tt(n,e){n||Se()}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bn.UNAUTHENTICATED))}shutdown(){}}class gM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yM{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ys,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ys)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string"),new SS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new bn(e)}}class _M{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class vM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _M(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EM{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,yr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0);const r=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new dT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt(typeof t.token=="string"),this.R=t.token,new dT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=wM(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ve(n,e){return n<e?-1:n>e?1:0}function My(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Ve(r,a);{const l=RS(),c=bM(l.encode(mT(n,t)),l.encode(mT(e,t)));return c!==0?c:Ve(r,a)}}t+=r>65535?2:1}return Ve(n.length,e.length)}function mT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function bM(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function xl(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=-62135596800,gT=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gT);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pT)throw new me(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gT}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-pT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new _t(0,0))}static max(){return new xe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="__name__";class is{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof is?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=is.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const r=is.isNumericId(e),a=is.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?is.extractNumericId(e).compare(is.extractNumericId(t)):My(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class ht extends is{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const TM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends is{construct(e,t,r){return new fn(e,t,r)}static isValidIdentifier(e){return TM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yT}static keyField(){return new fn([yT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new me(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new me(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new me(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ht.fromString(e))}static fromName(e){return new ve(ht.fromString(e).popFirst(5))}static empty(){return new ve(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function AM(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=xe.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new ia(a,ve.empty(),e)}function SM(n){return new ia(n.readTime,n.key,Dc)}class ia{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ia(xe.min(),ve.empty(),Dc)}static max(){return new ia(xe.max(),ve.empty(),Dc)}}function RM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==CM)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(a=>a?re.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new re((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(_=>{c[g]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new re((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}function xM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $l(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=-1;function em(n){return n==null}function wd(n){return n===0&&1/n==-1/0}function NM(n){return typeof n=="number"&&Number.isInteger(n)&&!wd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="";function OM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_T(e)),e=DM(n.get(t),e);return _T(e)}function DM(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case IS:t+="";break;default:t+=l}}return t}function _T(n){return n+IS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nf(this.root,e,this.comparator,!0)}}class Nf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??hn.RED,this.left=a??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new hn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,a,l){return this}insert(e,t,r){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ET(this.data.getIterator())}getIteratorFrom(e){return new ET(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class ET{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Kt(fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new NS("Invalid base64 string: "+l):l}}(e);return new dn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const MM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(n){if(tt(!!n),typeof n=="string"){let e=0;const t=MM.exec(n);if(tt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="server_timestamp",DS="__type__",MS="__previous_value__",kS="__local_write_time__";function U_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[DS])===null||t===void 0?void 0:t.stringValue)===OS}function tm(n){const e=n.mapValue.fields[MS];return U_(e)?tm(e):e}function Mc(n){const e=aa(n.mapValue.fields[kS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t,r,a,l,c,d,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g}}const bd="(default)";class kc{constructor(e,t){this.projectId=e,this.database=t||bd}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="__type__",PM="__max__",Of={mapValue:{}},VS="__vector__",Td="value";function la(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?U_(n)?4:LM(n)?9007199254740991:VM(n)?10:11:Se()}function ds(n,e){if(n===e)return!0;const t=la(n);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mc(n).isEqual(Mc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=aa(a.timestampValue),d=aa(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return oa(a.bytesValue).isEqual(oa(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return xt(a.geoPointValue.latitude)===xt(l.geoPointValue.latitude)&&xt(a.geoPointValue.longitude)===xt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return xt(a.integerValue)===xt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=xt(a.doubleValue),d=xt(l.doubleValue);return c===d?wd(c)===wd(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return xl(n.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(vT(c)!==vT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!ds(c[m],d[m])))return!1;return!0}(n,e);default:return Se()}}function Pc(n,e){return(n.values||[]).find(t=>ds(t,e))!==void 0}function Nl(n,e){if(n===e)return 0;const t=la(n),r=la(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=xt(l.integerValue||l.doubleValue),m=xt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return wT(n.timestampValue,e.timestampValue);case 4:return wT(Mc(n),Mc(e));case 5:return My(n.stringValue,e.stringValue);case 6:return function(l,c){const d=oa(l),m=oa(c);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Ve(d[g],m[g]);if(_!==0)return _}return Ve(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ve(xt(l.latitude),xt(c.latitude));return d!==0?d:Ve(xt(l.longitude),xt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return bT(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,g,_;const w=l.fields||{},T=c.fields||{},R=(d=w[Td])===null||d===void 0?void 0:d.arrayValue,O=(m=T[Td])===null||m===void 0?void 0:m.arrayValue,L=Ve(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:bT(R,O)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Of.mapValue&&c===Of.mapValue)return 0;if(l===Of.mapValue)return 1;if(c===Of.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let w=0;w<m.length&&w<_.length;++w){const T=My(m[w],_[w]);if(T!==0)return T;const R=Nl(d[m[w]],g[_[w]]);if(R!==0)return R}return Ve(m.length,_.length)}(n.mapValue,e.mapValue);default:throw Se()}}function wT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=aa(n),r=aa(e),a=Ve(t.seconds,r.seconds);return a!==0?a:Ve(t.nanos,r.nanos)}function bT(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Nl(t[a],r[a]);if(l)return l}return Ve(t.length,r.length)}function Ol(n){return ky(n)}function ky(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=aa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=ky(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${ky(t.fields[c])}`;return a+"}"}(n.mapValue):Se()}function Zf(n){switch(la(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tm(n);return e?16+Zf(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Zf(l),0)}(n.arrayValue);case 10:case 11:return function(r){let a=0;return ma(r.fields,(l,c)=>{a+=l.length+Zf(c)}),a}(n.mapValue);default:throw Se()}}function TT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Py(n){return!!n&&"integerValue"in n}function j_(n){return!!n&&"arrayValue"in n}function AT(n){return!!n&&"nullValue"in n}function ST(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ed(n){return!!n&&"mapValue"in n}function VM(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[PS])===null||t===void 0?void 0:t.stringValue)===VS}function bc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ma(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(t)}setAll(e){let t=fn.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=bc(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];ed(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ma(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new Un(bc(this.value))}}function LS(n){const e=[];return ma(n.fields,(t,r)=>{const a=new fn([t]);if(ed(r)){const l=LS(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,xe.min(),xe.min(),xe.min(),Un.empty(),0)}static newFoundDocument(e,t,r,a){return new Tn(e,1,t,xe.min(),r,a,0)}static newNoDocument(e,t){return new Tn(e,2,t,xe.min(),xe.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,xe.min(),xe.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t){this.position=e,this.inclusive=t}}function RT(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=ve.comparator(ve.fromName(c.referenceValue),t.key):r=Nl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function CT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ds(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function UM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{}class Vt extends US{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new FM(e,t,r):t==="array-contains"?new HM(e,r):t==="in"?new $M(e,r):t==="not-in"?new qM(e,r):t==="array-contains-any"?new GM(e,r):new Vt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new BM(e,r):new zM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nl(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends US{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ur(e,t)}matches(e){return jS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function jS(n){return n.op==="and"}function FS(n){return jM(n)&&jS(n)}function jM(n){for(const e of n.filters)if(e instanceof Ur)return!1;return!0}function Vy(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+Ol(n.value);if(FS(n))return n.filters.map(e=>Vy(e)).join(",");{const e=n.filters.map(t=>Vy(t)).join(",");return`${n.op}(${e})`}}function BS(n,e){return n instanceof Vt?function(r,a){return a instanceof Vt&&r.op===a.op&&r.field.isEqual(a.field)&&ds(r.value,a.value)}(n,e):n instanceof Ur?function(r,a){return a instanceof Ur&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&BS(c,a.filters[d]),!0):!1}(n,e):void Se()}function zS(n){return n instanceof Vt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ol(t.value)}`}(n):n instanceof Ur?function(t){return t.op.toString()+" {"+t.getFilters().map(zS).join(" ,")+"}"}(n):"Filter"}class FM extends Vt{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class BM extends Vt{constructor(e,t){super(e,"in",t),this.keys=HS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zM extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=HS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ve.fromName(r.referenceValue))}class HM extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return j_(t)&&Pc(t.arrayValue,this.value)}}class $M extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Pc(this.value.arrayValue,t)}}class qM extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Pc(this.value.arrayValue,t)}}class GM extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!j_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function IT(n,e=null,t=[],r=[],a=null,l=null,c=null){return new KM(n,e,t,r,a,l,c)}function F_(n){const e=Oe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Vy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ol(r)).join(",")),e.le=t}return e.le}function B_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CT(n.startAt,e.startAt)&&CT(n.endAt,e.endAt)}function Ly(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function QM(n,e,t,r,a,l,c,d){return new Qc(n,e,t,r,a,l,c,d)}function z_(n){return new Qc(n)}function xT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $S(n){return n.collectionGroup!==null}function Tc(n){const e=Oe(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Kt(fn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new Sd(l,r))}),t.has(fn.keyField().canonicalString())||e.he.push(new Sd(fn.keyField(),r))}return e.he}function cs(n){const e=Oe(n);return e.Pe||(e.Pe=WM(e,Tc(n))),e.Pe}function WM(n,e){if(n.limitType==="F")return IT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Sd(a.field,l)});const t=n.endAt?new Ad(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ad(n.startAt.position,n.startAt.inclusive):null;return IT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Uy(n,e){const t=n.filters.concat([e]);return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jy(n,e,t){return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nm(n,e){return B_(cs(n),cs(e))&&n.limitType===e.limitType}function qS(n){return`${F_(cs(n))}|lt:${n.limitType}`}function dl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>zS(a)).join(", ")}]`),em(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Ol(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Ol(a)).join(",")),`Target(${r})`}(cs(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ve.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,a){for(const l of Tc(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const g=RT(c,d,m);return c.inclusive?g<=0:g<0}(r.startAt,Tc(r),a)||r.endAt&&!function(c,d,m){const g=RT(c,d,m);return c.inclusive?g>=0:g>0}(r.endAt,Tc(r),a))}(n,e)}function XM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GS(n){return(e,t)=>{let r=!1;for(const a of Tc(n)){const l=YM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function YM(n,e,t){const r=n.field.isKeyField()?ve.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Nl(m,g):Se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return xS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new vt(ve.comparator);function si(){return JM}const KS=new vt(ve.comparator);function hc(...n){let e=KS;for(const t of n)e=e.insert(t.key,t);return e}function QS(n){let e=KS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function to(){return Ac()}function WS(){return Ac()}function Ac(){return new go(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZM=new vt(ve.comparator),ek=new Kt(ve.comparator);function $e(...n){let e=ek;for(const t of n)e=e.add(t);return e}const tk=new Kt(Ve);function nk(){return tk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function XS(n){return{integerValue:""+n}}function YS(n,e){return NM(e)?XS(e):H_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this._=void 0}}function rk(n,e,t){return n instanceof Vc?function(a,l){const c={fields:{[DS]:{stringValue:OS},[kS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&U_(l)&&(l=tm(l)),l&&(c.fields[MS]=l),{mapValue:c}}(t,e):n instanceof Dl?ZS(n,e):n instanceof Lc?eR(n,e):function(a,l){const c=JS(a,l),d=NT(c)+NT(a.Ie);return Py(c)&&Py(a.Ie)?XS(d):H_(a.serializer,d)}(n,e)}function sk(n,e,t){return n instanceof Dl?ZS(n,e):n instanceof Lc?eR(n,e):t}function JS(n,e){return n instanceof Uc?function(r){return Py(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Vc extends sm{}class Dl extends sm{constructor(e){super(),this.elements=e}}function ZS(n,e){const t=tR(e);for(const r of n.elements)t.some(a=>ds(a,r))||t.push(r);return{arrayValue:{values:t}}}class Lc extends sm{constructor(e){super(),this.elements=e}}function eR(n,e){let t=tR(e);for(const r of n.elements)t=t.filter(a=>!ds(a,r));return{arrayValue:{values:t}}}class Uc extends sm{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function NT(n){return xt(n.integerValue||n.doubleValue)}function tR(n){return j_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.field=e,this.transform=t}}function ik(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof Dl&&a instanceof Dl||r instanceof Lc&&a instanceof Lc?xl(r.elements,a.elements,ds):r instanceof Uc&&a instanceof Uc?ds(r.Ie,a.Ie):r instanceof Vc&&a instanceof Vc}(n.transform,e.transform)}class ak{constructor(e,t){this.version=e,this.transformResults=t}}class Pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class im{}function nR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new q_(n.key,Pr.none()):new Wc(n.key,n.data,Pr.none());{const t=n.data,r=Un.empty();let a=new Kt(fn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new pa(n.key,r,new Jn(a.toArray()),Pr.none())}}function ok(n,e,t){n instanceof Wc?function(a,l,c){const d=a.value.clone(),m=DT(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof pa?function(a,l,c){if(!td(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=DT(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(rR(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Sc(n,e,t,r){return n instanceof Wc?function(l,c,d,m){if(!td(l.precondition,c))return d;const g=l.value.clone(),_=MT(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof pa?function(l,c,d,m){if(!td(l.precondition,c))return d;const g=MT(l.fieldTransforms,m,c),_=c.data;return _.setAll(rR(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(l,c,d){return td(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function lk(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=JS(r.transform,a||null);l!=null&&(t===null&&(t=Un.empty()),t.set(r.field,l))}return t||null}function OT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&xl(r,a,(l,c)=>ik(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wc extends im{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class pa extends im{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function rR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DT(n,e,t){const r=new Map;tt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,sk(c,d,t[a]))}return r}function MT(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,rk(l,c,e))}return r}class q_ extends im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uk extends im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&ok(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WS();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=nR(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,(t,r)=>OT(t,r))&&xl(this.baseMutations,e.baseMutations,(t,r)=>OT(t,r))}}class G_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){tt(e.mutations.length===r.length);let a=function(){return ZM}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new G_(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,We;function dk(n){switch(n){case se.OK:return Se();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Se()}}function sR(n){if(n===void 0)return ri("GRPC error has no .code"),se.UNKNOWN;switch(n){case Pt.OK:return se.OK;case Pt.CANCELLED:return se.CANCELLED;case Pt.UNKNOWN:return se.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return se.INTERNAL;case Pt.UNAVAILABLE:return se.UNAVAILABLE;case Pt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Pt.NOT_FOUND:return se.NOT_FOUND;case Pt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Pt.ABORTED:return se.ABORTED;case Pt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Pt.DATA_LOSS:return se.DATA_LOSS;default:return Se()}}(We=Pt||(Pt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new na([4294967295,4294967295],0);function kT(n){const e=RS().encode(n),t=new vS;return t.update(e),new Uint8Array(t.digest())}function PT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new na([t,r],0),new na([a,l],0)]}class K_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fc(`Invalid padding: ${t}`);if(r<0)throw new fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=na.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(na.fromNumber(r)));return a.compare(mk)===1&&(a=new na([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=kT(e),[r,a]=PT(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new K_(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=kT(e),[r,a]=PT(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new am(xe.min(),a,new vt(Ve),si(),$e())}}class Xc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xc(r,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class iR{constructor(e,t){this.targetId=e,this.ge=t}}class aR{constructor(e,t,r=dn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class VT{constructor(){this.pe=0,this.ye=LT(),this.we=dn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=$e(),t=$e(),r=$e();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Se()}}),new Xc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=LT()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,tt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class pk{constructor(e){this.ke=e,this.qe=new Map,this.Qe=si(),this.$e=Df(),this.Ue=Df(),this.Ke=new vt(Ve)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(Ly(l))if(r===0){const c=new ve(l.path);this.ze(t,c,Tn.newNoDocument(c,xe.min()))}else tt(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=oa(r).toUint8Array()}catch(m){if(m instanceof NS)return Il("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new K_(c,a,l)}catch(m){return Il(m instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&Ly(d.target)){const m=new ve(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,Tn.newNoDocument(m,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=$e();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this.Xe(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const a=new am(e,t,this.Ke,this.Qe,r);return this.Qe=si(),this.$e=Df(),this.Ue=Df(),this.Ke=new vt(Ve),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new VT,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Kt(Ve),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Kt(Ve),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new VT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Df(){return new vt(ve.comparator)}function LT(){return new vt(ve.comparator)}const gk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_k={and:"AND",or:"OR"};class vk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fy(n,e){return n.useProto3Json||em(e)?e:{value:e}}function Rd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ek(n,e){return Rd(n,e.toTimestamp())}function hs(n){return tt(!!n),xe.fromTimestamp(function(t){const r=aa(t);return new _t(r.seconds,r.nanos)}(n))}function Q_(n,e){return By(n,e).canonicalString()}function By(n,e){const t=function(a){return new ht(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lR(n){const e=ht.fromString(n);return tt(dR(e)),e}function zy(n,e){return Q_(n.databaseId,e.path)}function Qg(n,e){const t=lR(e);if(t.get(1)!==n.databaseId.projectId)throw new me(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(cR(t))}function uR(n,e){return Q_(n.databaseId,e)}function wk(n){const e=lR(n);return e.length===4?ht.emptyPath():cR(e)}function Hy(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cR(n){return tt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function UT(n,e,t){return{name:zy(n,e),fields:t.value.mapValue.fields}}function bk(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(tt(_===void 0||typeof _=="string"),dn.fromBase64String(_||"")):(tt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),dn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?se.UNKNOWN:sR(g.code);return new me(_,g.message||"")}(c);t=new aR(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Qg(n,r.document.name),l=hs(r.document.updateTime),c=r.document.createTime?hs(r.document.createTime):xe.min(),d=new Un({mapValue:{fields:r.document.fields}}),m=Tn.newFoundDocument(a,l,c,d),g=r.targetIds||[],_=r.removedTargetIds||[];t=new nd(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Qg(n,r.document),l=r.readTime?hs(r.readTime):xe.min(),c=Tn.newNoDocument(a,l),d=r.removedTargetIds||[];t=new nd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Qg(n,r.document),l=r.removedTargetIds||[];t=new nd([],l,a,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new fk(a,l),d=r.targetId;t=new iR(d,c)}}return t}function Tk(n,e){let t;if(e instanceof Wc)t={update:UT(n,e.key,e.value)};else if(e instanceof q_)t={delete:zy(n,e.key)};else if(e instanceof pa)t={update:UT(n,e.key,e.data),updateMask:Dk(e.fieldMask)};else{if(!(e instanceof uk))return Se();t={verify:zy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Vc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Dl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Lc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Uc)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw Se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:Ek(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se()}(n,e.precondition)),t}function Ak(n,e){return n&&n.length>0?(tt(e!==void 0),n.map(t=>function(a,l){let c=a.updateTime?hs(a.updateTime):hs(l);return c.isEqual(xe.min())&&(c=hs(l)),new ak(c,a.transformResults||[])}(t,e))):[]}function Sk(n,e){return{documents:[uR(n,e.path)]}}function Rk(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uR(n,a);const l=function(g){if(g.length!==0)return fR(Ur.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(T){return{field:ml(T.field),direction:xk(T.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Fy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:t,parent:a}}function Ck(n){let e=wk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){tt(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(w){const T=hR(w);return T instanceof Ur&&FS(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(T=>function(O){return new Sd(pl(O.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,em(T)?null:T}(t.limit));let m=null;t.startAt&&(m=function(w){const T=!!w.before,R=w.values||[];return new Ad(R,T)}(t.startAt));let g=null;return t.endAt&&(g=function(w){const T=!w.before,R=w.values||[];return new Ad(R,T)}(t.endAt)),QM(e,a,c,l,d,"F",m,g)}function Ik(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=pl(t.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=pl(t.unaryFilter.field);return Vt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pl(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=pl(t.unaryFilter.field);return Vt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):n.fieldFilter!==void 0?function(t){return Vt.create(pl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ur.create(t.compositeFilter.filters.map(r=>hR(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se()}function xk(n){return gk[n]}function Nk(n){return yk[n]}function Ok(n){return _k[n]}function ml(n){return{fieldPath:n.canonicalString()}}function pl(n){return fn.fromServerFormat(n.fieldPath)}function fR(n){return n instanceof Vt?function(t){if(t.op==="=="){if(ST(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NAN"}};if(AT(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ST(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NAN"}};if(AT(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(t.field),op:Nk(t.op),value:t.value}}}(n):n instanceof Ur?function(t){const r=t.getFilters().map(a=>fR(a));return r.length===1?r[0]:{compositeFilter:{op:Ok(t.op),filters:r}}}(n):Se()}function Dk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t,r,a,l=xe.min(),c=xe.min(),d=dn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.Tt=e}}function kk(n){const e=Ck({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.Tn=new Vk}addToCollectionParentIndex(e,t){return this.Tn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ia.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Vk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Kt(ht.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Kt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mR=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(mR,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ml(0)}static Kn(){return new Ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="LruGarbageCollector",Lk=1048576;function BT([n,e],[t,r]){const a=Ve(n,t);return a===0?Ve(e,r):a}class Uk{constructor(e){this.Hn=e,this.buffer=new Kt(BT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(FT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$l(t)?de(FT,"Ignoring IndexedDB error during garbage collection: ",t):await Hl(t)}await this.er(3e5)})}}class Fk{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Zd.ae);const r=new Uk(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(jT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jT):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,c=Date.now(),this.nthSequenceNumber(e,a))).next(w=>(r=w,d=Date.now(),this.removeTargets(e,r,t))).next(w=>(l=w,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(g=Date.now(),fl()<=He.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${w} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w})))}}function Bk(n,e){return new Fk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.changes=new go(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Sc(r.mutation,a,Jn.empty(),_t.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){const a=to();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=hc();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=to();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=si();const c=Ac(),d=function(){return Ac()}();return t.forEach((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof pa)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Sc(_.mutation,g,_.mutation.getFieldMask(),_t.now())):c.set(g.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>{var w;return d.set(g,new Hk(_,(w=c.get(g))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Ac();let a=new vt((c,d)=>c-d),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||Jn.empty();_=d.applyToLocalView(g,_),r.set(m,_);const w=(a.get(d.batchId)||$e()).add(m);a=a.insert(d.batchId,w)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,w=WS();_.forEach(T=>{if(!l.has(T)){const R=nR(t.get(T),r.get(T));R!==null&&w.set(T,R),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):re.resolve(to());let d=Dc,m=l;return c.next(g=>re.forEach(g,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{m=m.insert(_,T)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,$e())).next(_=>({batchId:d,changes:QS(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let a=hc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=hc();return this.indexManager.getCollectionParents(e,l).next(d=>re.forEach(d,m=>{const g=function(w,T){return new Qc(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next(_=>{_.forEach((w,T)=>{c=c.insert(w,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Tn.newInvalidDocument(_)))});let d=hc();return c.forEach((m,g)=>{const _=l.get(m);_!==void 0&&Sc(_.mutation,g,Jn.empty(),_t.now()),rm(t,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return re.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:hs(a.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:kk(a.bundledQuery),readTime:hs(a.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.overlays=new vt(ve.comparator),this.Rr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=to();return re.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const a=to(),l=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new vt((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=to(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=to(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return re.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new hk(t,r));let l=this.Rr.get(t);l===void 0&&(l=$e(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.Vr=new Kt(rn.mr),this.gr=new Kt(rn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new rn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new rn(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new ve(new ht([])),r=new rn(t,e),a=new rn(t,e+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ve(new ht([])),r=new rn(t,e),a=new rn(t,e+1);let l=$e();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new rn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ve.comparator(e.key,t.key)||Ve(e.Cr,t.Cr)}static pr(e,t){return Ve(e.Cr,t.Cr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Kt(rn.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ck(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?L_:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new rn(t,0),a=new rn(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(Ve);return t.forEach(a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),re.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ve.isDocumentKey(l)||(l=l.child(""));const c=new rn(new ve(l),0);let d=new Kt(Ve);return this.Mr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Cr)),!0)},c),re.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){tt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return re.forEach(t.mutations,a=>{const l=new rn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new rn(t,0),a=this.Mr.firstAfterOrEqual(r);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.kr=e,this.docs=function(){return new vt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=si();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Tn.newInvalidDocument(a))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=si();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||RM(SM(_),r)<=0||(a.has(_.key)||rm(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Se()}qr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Xk(this)}getSize(e){return re.resolve(this.size)}}class Xk extends zk{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.persistence=e,this.Qr=new go(t=>F_(t),B_),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new W_,this.targetCount=0,this.Kr=Ml.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),re.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Ml(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.zn(t),re.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),re.waitFor(l).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Zd(0),this.zr=!1,this.zr=!0,this.jr=new Kk,this.referenceDelegate=e(this),this.Hr=new Yk(this),this.indexManager=new Pk,this.remoteDocumentCache=function(a){return new Wk(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new Mk(t),this.Yr=new qk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new Qk(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const a=new Jk(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return re.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class Jk extends IM{constructor(e){super(),this.currentSequenceNumber=e}}class X_{constructor(e){this.persistence=e,this.ti=new W_,this.ni=null}static ri(e){return new X_(e)}get ii(){if(this.ni)return this.ni;throw Se()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),re.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,r=>{const a=ve.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,xe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return re.or([()=>re.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Cd{constructor(e,t){this.persistence=e,this.oi=new go(r=>OM(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=Bk(this,t)}static ri(e,t){return new Cd(e,t)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return re.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?re.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,l.removeEntry(c,xe.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zf(e.data.value)),t}ar(e,t,r){return re.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return re.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=$e(),a=$e();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Y_(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return GN()?8:xM(An())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Zk;return this._s(e,t,c).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(fl()<=He.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",dl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(fl()<=He.DEBUG&&de("QueryEngine","Query:",dl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(fl()<=He.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",dl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(t))):re.resolve())}rs(e,t){if(xT(t))return re.resolve(null);let r=cs(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=jy(t,null,"F"),r=cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=$e(...l);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const g=this.cs(t,d);return this.ls(t,g,c,m.readTime)?this.rs(e,jy(t,null,"F")):this.hs(e,g,t,m)}))})))}ss(e,t,r,a){return xT(t)||a.isEqual(xe.min())?re.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,a)?re.resolve(null):(fl()<=He.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),dl(t)),this.hs(e,c,t,AM(a,Dc)).next(d=>d))})}cs(e,t){let r=new Kt(GS(e));return t.forEach((a,l)=>{rm(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return fl()<=He.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",dl(t)),this.ns.getDocumentsMatchingQuery(e,t,ia.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="LocalStore",tP=3e8;class nP{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new vt(Ve),this.Is=new go(l=>F_(l),B_),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $k(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function rP(n,e,t,r){return new nP(n,e,t,r)}async function gR(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=$e();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(g=>({Rs:g,removedBatchIds:c,addedBatchIds:d}))})})}function sP(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,g,_){const w=g.batch,T=w.keys();let R=re.resolve();return T.forEach(O=>{R=R.next(()=>_.getEntry(m,O)).next(L=>{const P=g.docVersions.get(O);tt(P!==null),L.version.compareTo(P)<0&&(w.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),_.addEntry(L)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(m,w))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=$e();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function yR(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function iP(n,e){const t=Oe(n),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((_,w)=>{const T=a.get(w);if(!T)return;d.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,w).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,w)));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(dn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(w,R),function(L,P,$){return L.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=tP?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(T,R,_)&&d.push(t.Hr.updateTargetData(l,R))});let m=si(),g=$e();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(aP(l,c,e.documentUpdates).next(_=>{m=_.Vs,g=_.fs})),!r.isEqual(xe.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(w=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return re.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Ts=a,l))}function aP(n,e,t){let r=$e(),a=$e();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=si();return t.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(xe.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):de(J_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function oP(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=L_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lP(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,re.resolve(a)):t.Hr.allocateTargetId(r).next(c=>(a=new Zi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function $y(n,e,t){const r=Oe(n),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!$l(c))throw c;de(J_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function zT(n,e,t){const r=Oe(n);let a=xe.min(),l=$e();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,_){const w=Oe(m),T=w.Is.get(_);return T!==void 0?re.resolve(w.Ts.get(T)):w.Hr.getTargetData(g,_)}(r,c,cs(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?a:xe.min(),t?l:$e())).next(d=>(uP(r,XM(e),d),{documents:d,gs:l})))}function uP(n,e,t){let r=n.Es.get(e)||xe.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Es.set(e,r)}class HT{constructor(){this.activeTargetIds=nk()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cP{constructor(){this.ho=new HT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new HT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="ConnectivityMonitor";class qT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de($T,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function qy(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="RestConnection",fP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dP{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===bd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const c=qy(),d=this.bo(e,t.toUriEncodedString());de(Wg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(g=>(de(Wg,`Received RPC '${e}' ${c}: `,g),g),g=>{throw Il(Wg,`RPC '${e}' ${c} failed with error: `,g,"url: ",d,"request:",r),g})}Co(e,t,r,a,l,c){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=fP[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class pP extends dP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=qy();return new Promise((c,d)=>{const m=new ES;m.setWithCredentials(!0),m.listenOnce(wS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Jf.NO_ERROR:const _=m.getResponseJson();de(En,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case Jf.TIMEOUT:de(En,`RPC '${e}' ${l} timed out`),d(new me(se.DEADLINE_EXCEEDED,"Request time out"));break;case Jf.HTTP_ERROR:const w=m.getStatus();if(de(En,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const O=function(P){const $=P.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf($)>=0?$:se.UNKNOWN}(R.status);d(new me(O,R.message))}else d(new me(se.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new me(se.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{de(En,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(a);de(En,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",g,r,15)})}Wo(e,t,r){const a=qy(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=AS(),d=TS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");de(En,`Creating RPC '${e}' stream ${a}: ${_}`,m);const w=c.createWebChannel(_,m);let T=!1,R=!1;const O=new mP({Fo:P=>{R?de(En,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(T||(de(En,`Opening RPC '${e}' stream ${a} transport.`),w.open(),T=!0),de(En,`RPC '${e}' stream ${a} sending:`,P),w.send(P))},Mo:()=>w.close()}),L=(P,$,B)=>{P.listen($,G=>{try{B(G)}catch(X){setTimeout(()=>{throw X},0)}})};return L(w,cc.EventType.OPEN,()=>{R||(de(En,`RPC '${e}' stream ${a} transport opened.`),O.Qo())}),L(w,cc.EventType.CLOSE,()=>{R||(R=!0,de(En,`RPC '${e}' stream ${a} transport closed`),O.Uo())}),L(w,cc.EventType.ERROR,P=>{R||(R=!0,Il(En,`RPC '${e}' stream ${a} transport errored:`,P),O.Uo(new me(se.UNAVAILABLE,"The operation could not be completed")))}),L(w,cc.EventType.MESSAGE,P=>{var $;if(!R){const B=P.data[0];tt(!!B);const G=B,X=(G==null?void 0:G.error)||(($=G[0])===null||$===void 0?void 0:$.error);if(X){de(En,`RPC '${e}' stream ${a} received error:`,X);const Y=X.status;let te=function(C){const D=Pt[C];if(D!==void 0)return sR(D)}(Y),M=X.message;te===void 0&&(te=se.INTERNAL,M="Unknown error status: "+Y+" with message "+X.message),R=!0,O.Uo(new me(te,M)),w.close()}else de(En,`RPC '${e}' stream ${a} received:`,B),O.Ko(B)}}),L(d,bS.STAT_EVENT,P=>{P.stat===Dy.PROXY?de(En,`RPC '${e}' stream ${a} detected buffering proxy`):P.stat===Dy.NOPROXY&&de(En,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.$o()},0),O}}function Xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(n){return new vk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="PersistentStream";class vR{constructor(e,t,r,a,l,c,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new _R(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new me(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(GT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(GT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gP extends vR{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=bk(this.serializer,e),r=function(l){if(!("targetChange"in l))return xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?xe.min():c.readTime?hs(c.readTime):xe.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Hy(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Ly(m)?{documents:Sk(l,m)}:{query:Rk(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=oR(l,c.resumeToken);const g=Fy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(xe.min())>0){d.readTime=Rd(l,c.snapshotVersion.toTimestamp());const g=Fy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const r=Ik(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Hy(this.serializer),t.removeTarget=e,this.I_(t)}}class yP extends vR{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Ak(e.writeResults,e.commitTime),r=hs(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Hy(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Tk(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{}class vP extends _P{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new me(se.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,By(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(se.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,By(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(se.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class EP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ri(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class wP{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{yo(this)&&(de(lo,"Restarting streams for network reachability change."),await async function(m){const g=Oe(m);g.W_.add(4),await Yc(g),g.j_.set("Unknown"),g.W_.delete(4),await lm(g)}(this))})}),this.j_=new EP(r,a)}}async function lm(n){if(yo(n))for(const e of n.G_)await e(!0)}async function Yc(n){for(const e of n.G_)await e(!1)}function ER(n,e){const t=Oe(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),nv(t)?tv(t):ql(t).c_()&&ev(t,e))}function Z_(n,e){const t=Oe(n),r=ql(t);t.K_.delete(e),r.c_()&&wR(t,e),t.K_.size===0&&(r.c_()?r.P_():yo(t)&&t.j_.set("Unknown"))}function ev(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ql(n).y_(e)}function wR(n,e){n.H_.Ne(e),ql(n).w_(e)}function tv(n){n.H_=new pk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ql(n).start(),n.j_.B_()}function nv(n){return yo(n)&&!ql(n).u_()&&n.K_.size>0}function yo(n){return Oe(n).W_.size===0}function bR(n){n.H_=void 0}async function bP(n){n.j_.set("Online")}async function TP(n){n.K_.forEach((e,t)=>{ev(n,e)})}async function AP(n,e){bR(n),nv(n)?(n.j_.q_(e),tv(n)):n.j_.set("Unknown")}async function SP(n,e,t){if(n.j_.set("Online"),e instanceof aR&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(n,e)}catch(r){de(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Id(n,r)}else if(e instanceof nd?n.H_.We(e):e instanceof iR?n.H_.Ze(e):n.H_.je(e),!t.isEqual(xe.min()))try{const r=await yR(n.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(g);_&&l.K_.set(g,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(dn.EMPTY_BYTE_STRING,_.snapshotVersion)),wR(l,m);const w=new Zi(_.target,m,g,_.sequenceNumber);ev(l,w)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){de(lo,"Failed to raise snapshot:",r),await Id(n,r)}}async function Id(n,e,t){if(!$l(e))throw e;n.W_.add(1),await Yc(n),n.j_.set("Offline"),t||(t=()=>yR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(lo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await lm(n)})}function TR(n,e){return e().catch(t=>Id(n,t,e))}async function um(n){const e=Oe(n),t=ua(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:L_;for(;RP(e);)try{const a=await oP(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,CP(e,a)}catch(a){await Id(e,a)}AR(e)&&SR(e)}function RP(n){return yo(n)&&n.U_.length<10}function CP(n,e){n.U_.push(e);const t=ua(n);t.c_()&&t.S_&&t.b_(e.mutations)}function AR(n){return yo(n)&&!ua(n).u_()&&n.U_.length>0}function SR(n){ua(n).start()}async function IP(n){ua(n).C_()}async function xP(n){const e=ua(n);for(const t of n.U_)e.b_(t.mutations)}async function NP(n,e,t){const r=n.U_.shift(),a=G_.from(r,e,t);await TR(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await um(n)}async function OP(n,e){e&&ua(n).S_&&await async function(r,a){if(function(c){return dk(c)&&c!==se.ABORTED}(a.code)){const l=r.U_.shift();ua(r).h_(),await TR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await um(r)}}(n,e),AR(n)&&SR(n)}async function KT(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),de(lo,"RemoteStore received new credentials");const r=yo(t);t.W_.add(3),await Yc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await lm(t)}async function DP(n,e){const t=Oe(n);e?(t.W_.delete(2),await lm(t)):e||(t.W_.add(2),await Yc(t),t.j_.set("Unknown"))}function ql(n){return n.J_||(n.J_=function(t,r,a){const l=Oe(t);return l.M_(),new gP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:bP.bind(null,n),No:TP.bind(null,n),Lo:AP.bind(null,n),p_:SP.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),nv(n)?tv(n):n.j_.set("Unknown")):(await n.J_.stop(),bR(n))})),n.J_}function ua(n){return n.Y_||(n.Y_=function(t,r,a){const l=Oe(t);return l.M_(),new yP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:IP.bind(null,n),Lo:OP.bind(null,n),D_:xP.bind(null,n),v_:NP.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await um(n)):(await n.Y_.stop(),n.U_.length>0&&(de(lo,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new rv(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(n,e){if(ri("AsyncQueue",`${e}: ${n}`),$l(n))return new me(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=hc(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Tl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.Z_=new vt(ve.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Se():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class kl{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new kl(e,t,Tl.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kP{constructor(){this.queries=WT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=Oe(t),l=a.queries;a.queries=WT(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new me(se.ABORTED,"Firestore shutting down"))}}function WT(){return new go(n=>qS(n),nm)}async function RR(n,e){const t=Oe(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new MP,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=sv(c,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&iv(t)}async function CR(n,e){const t=Oe(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function PP(n,e){const t=Oe(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&iv(t)}function VP(n,e,t){const r=Oe(n),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function iv(n){n.ia.forEach(e=>{e.next()})}var Gy,XT;(XT=Gy||(Gy={}))._a="default",XT.Cache="cache";class IR{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.key=e}}class NR{constructor(e){this.key=e}}class LP{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=$e(),this.mutatedKeys=$e(),this.ya=GS(e),this.wa=new Tl(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new QT,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,w)=>{const T=a.get(_),R=rm(this.query,w)?w:null,O=!!T&&this.mutatedKeys.has(T.key),L=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let P=!1;T&&R?T.data.isEqual(R.data)?O!==L&&(r.track({type:3,doc:R}),P=!0):this.va(T,R)||(r.track({type:2,doc:R}),P=!0,(m&&this.ya(R,m)>0||g&&this.ya(R,g)<0)&&(d=!0)):!T&&R?(r.track({type:0,doc:R}),P=!0):T&&!R&&(r.track({type:1,doc:T}),P=!0,(m||g)&&(d=!0)),P&&(R?(c=c.add(R),l=L?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,w)=>function(R,O){const L=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return L(R)-L(O)}(_.type,w.type)||this.ya(_.doc,w.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,g=m!==this.ga;return this.ga=m,c.length!==0||g?{snapshot:new kl(this.query,e.wa,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new QT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=$e(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new NR(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new xR(r))}),t}Oa(e){this.fa=e.gs,this.pa=$e();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return kl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const av="SyncEngine";class UP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jP{constructor(e){this.key=e,this.Ba=!1}}class FP{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new go(d=>qS(d),nm),this.qa=new Map,this.Qa=new Set,this.$a=new vt(ve.comparator),this.Ua=new Map,this.Ka=new W_,this.Wa={},this.Ga=new Map,this.za=Ml.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function BP(n,e,t=!0){const r=VR(n);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await OR(r,e,t,!0),a}async function zP(n,e){const t=VR(n);await OR(t,e,!0,!1)}async function OR(n,e,t,r){const a=await lP(n.localStore,cs(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await HP(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&ER(n.remoteStore,a),d}async function HP(n,e,t,r,a){n.Ha=(w,T,R)=>async function(L,P,$,B){let G=P.view.ba($);G.ls&&(G=await zT(L.localStore,P.query,!1).then(({documents:M})=>P.view.ba(M,G)));const X=B&&B.targetChanges.get(P.targetId),Y=B&&B.targetMismatches.get(P.targetId)!=null,te=P.view.applyChanges(G,L.isPrimaryClient,X,Y);return JT(L,P.targetId,te.Ma),te.snapshot}(n,w,T,R);const l=await zT(n.localStore,e,!0),c=new LP(e,l.gs),d=c.ba(l.documents),m=Xc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);JT(n,t,g.Ma);const _=new UP(e,t,c);return n.ka.set(e,_),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),g.snapshot}async function $P(n,e,t){const r=Oe(n),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!nm(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await $y(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Z_(r.remoteStore,a.targetId),Ky(r,a.targetId)}).catch(Hl)):(Ky(r,a.targetId),await $y(r.localStore,a.targetId,!0))}async function qP(n,e){const t=Oe(n),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Z_(t.remoteStore,r.targetId))}async function GP(n,e,t){const r=ZP(n);try{const a=await function(c,d){const m=Oe(c),g=_t.now(),_=d.reduce((R,O)=>R.add(O.key),$e());let w,T;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let O=si(),L=$e();return m.ds.getEntries(R,_).next(P=>{O=P,O.forEach(($,B)=>{B.isValidDocument()||(L=L.add($))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,O)).next(P=>{w=P;const $=[];for(const B of d){const G=lk(B,w.get(B.key).overlayedDocument);G!=null&&$.push(new pa(B.key,G,LS(G.value.mapValue),Pr.exists(!0)))}return m.mutationQueue.addMutationBatch(R,g,$,d)}).next(P=>{T=P;const $=P.applyToLocalDocumentSet(w,L);return m.documentOverlayCache.saveOverlays(R,P.batchId,$)})}).then(()=>({batchId:T.batchId,changes:QS(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let g=c.Wa[c.currentUser.toKey()];g||(g=new vt(Ve)),g=g.insert(d,m),c.Wa[c.currentUser.toKey()]=g}(r,a.batchId,t),await Jc(r,a.changes),await um(r.remoteStore)}catch(a){const l=sv(a,"Failed to persist write");t.reject(l)}}async function DR(n,e){const t=Oe(n);try{const r=await iP(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Ua.get(l);c&&(tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?tt(c.Ba):a.removedDocuments.size>0&&(tt(c.Ba),c.Ba=!1))}),await Jc(t,r,e)}catch(r){await Hl(r)}}function YT(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=Oe(c);m.onlineState=d;let g=!1;m.queries.forEach((_,w)=>{for(const T of w.ta)T.sa(d)&&(g=!0)}),g&&iv(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KP(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let c=new vt(ve.comparator);c=c.insert(l,Tn.newNoDocument(l,xe.min()));const d=$e().add(l),m=new am(xe.min(),new Map,new vt(Ve),c,d);await DR(r,m),r.$a=r.$a.remove(l),r.Ua.delete(e),ov(r)}else await $y(r.localStore,e,!1).then(()=>Ky(r,e,t)).catch(Hl)}async function QP(n,e){const t=Oe(n),r=e.batch.batchId;try{const a=await sP(t.localStore,e);kR(t,r,null),MR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jc(t,a)}catch(a){await Hl(a)}}async function WP(n,e,t){const r=Oe(n);try{const a=await function(c,d){const m=Oe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next(w=>(tt(w!==null),_=w.keys(),m.mutationQueue.removeMutationBatch(g,w))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>m.localDocuments.getDocuments(g,_))})}(r.localStore,e);kR(r,e,t),MR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jc(r,a)}catch(a){await Hl(a)}}function MR(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function kR(n,e,t){const r=Oe(n);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function Ky(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||PR(n,r)})}function PR(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Z_(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),ov(n))}function JT(n,e,t){for(const r of t)r instanceof xR?(n.Ka.addReference(r.key,e),XP(n,r)):r instanceof NR?(de(av,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||PR(n,r.key)):Se()}function XP(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(de(av,"New document in limbo: "+t),n.Qa.add(r),ov(n))}function ov(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ve(ht.fromString(e)),r=n.za.next();n.Ua.set(r,new jP(t)),n.$a=n.$a.insert(t,r),ER(n.remoteStore,new Zi(cs(z_(t.path)),r,"TargetPurposeLimboResolution",Zd.ae))}}async function Jc(n,e,t){const r=Oe(n),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,e,t).then(g=>{var _;if((g||t)&&r.isPrimaryClient){const w=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(g){a.push(g);const w=Y_.Yi(m.targetId,g);l.push(w)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,g){const _=Oe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>re.forEach(g,T=>re.forEach(T.Hi,R=>_.persistence.referenceDelegate.addReference(w,T.targetId,R)).next(()=>re.forEach(T.Ji,R=>_.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))}catch(w){if(!$l(w))throw w;de(J_,"Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const R=_.Ts.get(T),O=R.snapshotVersion,L=R.withLastLimboFreeSnapshotVersion(O);_.Ts=_.Ts.insert(T,L)}}}(r.localStore,l))}async function YP(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){de(av,"User change. New user:",e.toKey());const r=await gR(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new me(se.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jc(t,r.Rs)}}function JP(n,e){const t=Oe(n),r=t.Ua.get(e);if(r&&r.Ba)return $e().add(r.key);{let a=$e();const l=t.qa.get(e);if(!l)return a;for(const c of l){const d=t.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}function VR(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KP.bind(null,e),e.La.p_=PP.bind(null,e.eventManager),e.La.Ja=VP.bind(null,e.eventManager),e}function ZP(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WP.bind(null,e),e}class xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=om(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return rP(this.persistence,new eP,e.initialUser,this.serializer)}Xa(e){return new pR(X_.ri,this.serializer)}Za(e){return new cP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xd.provider={build:()=>new xd};class e6 extends xd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){tt(this.persistence.referenceDelegate instanceof Cd);const r=this.persistence.referenceDelegate.garbageCollector;return new jk(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new pR(r=>Cd.ri(r,t),this.serializer)}}class Qy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YP.bind(null,this.syncEngine),await DP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kP}()}createDatastore(e){const t=om(e.databaseInfo.databaseId),r=function(l){return new pP(l)}(e.databaseInfo);return function(l,c,d,m){return new vP(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new wP(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>YT(this.syncEngine,t,0),function(){return qT.D()?new qT:new hP}())}createSyncEngine(e,t){return function(a,l,c,d,m,g,_){const w=new FP(a,l,c,d,m,g);return _&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Oe(a);de(lo,"RemoteStore shutting down."),l.W_.add(5),await Yc(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qy.provider={build:()=>new Qy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class t6{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=CS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{de(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(de(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=sv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yg(n,e){n.asyncQueue.verifyOperationInProgress(),de(ca,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async a=>{r.isEqual(a)||(await gR(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ZT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await n6(n);de(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>KT(e.remoteStore,a)),n._onlineComponents=e}async function n6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ca,"Using user provided OfflineComponentProvider");try{await Yg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Il("Error using user provided cache. Falling back to memory cache: "+t),await Yg(n,new xd)}}else de(ca,"Using default OfflineComponentProvider"),await Yg(n,new e6(void 0));return n._offlineComponents}async function UR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ca,"Using user provided OnlineComponentProvider"),await ZT(n,n._uninitializedComponentsProvider._online)):(de(ca,"Using default OnlineComponentProvider"),await ZT(n,new Qy))),n._onlineComponents}function r6(n){return UR(n).then(e=>e.syncEngine)}async function jR(n){const e=await UR(n),t=e.eventManager;return t.onListen=BP.bind(null,e.syncEngine),t.onUnlisten=$P.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qP.bind(null,e.syncEngine),t}function s6(n,e,t={}){const r=new Ys;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const _=new LR({next:T=>{_.su(),c.enqueueAndForget(()=>CR(l,w));const R=T.docs.has(d);!R&&T.fromCache?g.reject(new me(se.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&m&&m.source==="server"?g.reject(new me(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new IR(z_(d.path),_,{includeMetadataChanges:!0,Ta:!0});return RR(l,w)}(await jR(n),n.asyncQueue,e,t,r)),r.promise}function i6(n,e,t={}){const r=new Ys;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const _=new LR({next:T=>{_.su(),c.enqueueAndForget(()=>CR(l,w)),T.fromCache&&m.source==="server"?g.reject(new me(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new IR(d,_,{includeMetadataChanges:!0,Ta:!0});return RR(l,w)}(await jR(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(n,e,t){if(!t)throw new me(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function a6(n,e,t,r){if(e===!0&&r===!0)throw new me(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t1(n){if(!ve.isDocumentKey(n))throw new me(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n1(n){if(ve.isDocumentKey(n))throw new me(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function ms(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cm(n);throw new me(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firestore.googleapis.com",r1=!0;class s1{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zR,this.ssl=r1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:r1;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Lk)throw new me(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new me(se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new me(se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new me(se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pM;switch(r.type){case"firstParty":return new vM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=e1.get(t);r&&(de("ComponentProvider","Removing Datastore"),e1.delete(t),r.terminate())}(this),Promise.resolve()}}function o6(n,e,t,r={}){var a;const l=(n=ms(n,hm))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==zR&&l.host!==d&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!ei(m,c)&&(n._setSettings(m),r.mockUserToken)){let g,_;if(typeof r.mockUserToken=="string")g=r.mockUserToken,_=bn.MOCK_USER;else{g=DA(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new me(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new bn(w)}n._authCredentials=new gM(new SS(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gl(this.firestore,e,this._query)}}class On{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}}class ra extends Gl{constructor(e,t,r){super(e,t,z_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new ve(e))}withConverter(e){return new ra(this.firestore,e,this._path)}}function Kl(n,e,...t){if(n=Ot(n),BR("collection","path",e),n instanceof hm){const r=ht.fromString(e,...t);return n1(r),new ra(n,null,r)}{if(!(n instanceof On||n instanceof ra))throw new me(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return n1(r),new ra(n.firestore,null,r)}}function sn(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=CS.newId()),BR("doc","path",e),n instanceof hm){const r=ht.fromString(e,...t);return t1(r),new On(n,null,new ve(r))}{if(!(n instanceof On||n instanceof ra))throw new me(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return t1(r),new On(n.firestore,n instanceof ra?n.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="AsyncQueue";class a1{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new _R(this,"async_queue_retry"),this.Su=()=>{const r=Xg();r&&de(i1,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Xg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Xg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ys;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$l(e))throw e;de(i1,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw ri("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=rv.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&Se()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Ql extends hm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new a1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a1(e),this._firestoreClient=void 0,await e}}}function l6(n,e){const t=typeof n=="object"?n:Wd(),r=typeof n=="string"?n:bd,a=da(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=xA("firestore");l&&o6(a,...l)}return a}function lv(n){if(n._terminated)throw new me(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||u6(n),n._firestoreClient}function u6(n){var e,t,r;const a=n._freezeSettings(),l=function(d,m,g,_){return new kM(d,m,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,FR(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new t6(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(dn.fromBase64String(e))}catch(t){throw new me(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pl(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=/^__.*__$/;class h6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new pa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wc(e,this.data,t,this.fieldTransforms)}}class HR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new pa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $R(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class dm{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new dm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if($R(this.Lu)&&c6.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class f6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||om(e)}ju(e,t,r,a=!1){return new dm({Lu:e,methodName:t,zu:r,path:fn.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hv(n){const e=n._freezeSettings(),t=om(n._databaseId);return new f6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function d6(n,e,t,r,a,l={}){const c=n.ju(l.merge||l.mergeFields?2:0,e,t,a);pv("Data must be an object, but it was:",c,r);const d=qR(r,c);let m,g;if(l.merge)m=new Jn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const T=Wy(e,w,t);if(!c.contains(T))throw new me(se.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);KR(_,T)||_.push(T)}m=new Jn(_),g=c.fieldTransforms.filter(w=>m.covers(w.field))}else m=null,g=c.fieldTransforms;return new h6(new Un(d),m,g)}class mm extends Wl{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mm}}function m6(n,e,t){return new dm({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fv extends Wl{_toFieldTransform(e){return new $_(e.path,new Vc)}isEqual(e){return e instanceof fv}}class dv extends Wl{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=m6(this,e,!0),r=this.Hu.map(l=>Xl(l,t)),a=new Dl(r);return new $_(e.path,a)}isEqual(e){return e instanceof dv&&ei(this.Hu,e.Hu)}}class mv extends Wl{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Uc(e.serializer,YS(e.serializer,this.Ju));return new $_(e.path,t)}isEqual(e){return e instanceof mv&&this.Ju===e.Ju}}function p6(n,e,t,r){const a=n.ju(1,e,t);pv("Data must be an object, but it was:",a,r);const l=[],c=Un.empty();ma(r,(m,g)=>{const _=gv(e,m,t);g=Ot(g);const w=a.Uu(_);if(g instanceof mm)l.push(_);else{const T=Xl(g,w);T!=null&&(l.push(_),c.set(_,T))}});const d=new Jn(l);return new HR(c,d,a.fieldTransforms)}function g6(n,e,t,r,a,l){const c=n.ju(1,e,t),d=[Wy(e,r,t)],m=[a];if(l.length%2!=0)throw new me(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Wy(e,l[T])),m.push(l[T+1]);const g=[],_=Un.empty();for(let T=d.length-1;T>=0;--T)if(!KR(g,d[T])){const R=d[T];let O=m[T];O=Ot(O);const L=c.Uu(R);if(O instanceof mm)g.push(R);else{const P=Xl(O,L);P!=null&&(g.push(R),_.set(R,P))}}const w=new Jn(g);return new HR(_,w,c.fieldTransforms)}function y6(n,e,t,r=!1){return Xl(t,n.ju(r?4:3,e))}function Xl(n,e){if(GR(n=Ot(n)))return pv("Unsupported field value:",e,n),qR(n,e);if(n instanceof Wl)return function(r,a){if(!$R(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Xl(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(r,a){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YS(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=_t.fromDate(r);return{timestampValue:Rd(a.serializer,l)}}if(r instanceof _t){const l=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(a.serializer,l)}}if(r instanceof uv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pl)return{bytesValue:oR(a.serializer,r._byteString)};if(r instanceof On){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Q_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof cv)return function(c,d){return{mapValue:{fields:{[PS]:{stringValue:VS},[Td]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Wu("VectorValues must only contain numeric values.");return H_(d.serializer,g)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${cm(r)}`)}(n,e)}function qR(n,e){const t={};return xS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(n,(r,a)=>{const l=Xl(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function GR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof uv||n instanceof Pl||n instanceof On||n instanceof Wl||n instanceof cv)}function pv(n,e,t){if(!GR(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=cm(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Wy(n,e,t){if((e=Ot(e))instanceof fm)return e._internalPath;if(typeof e=="string")return gv(n,e);throw Nd("Field path arguments must be of type string or ",n,!1,void 0,t)}const _6=new RegExp("[~\\*/\\[\\]]");function gv(n,e,t){if(e.search(_6)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fm(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nd(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new me(se.INVALID_ARGUMENT,d+n+m)}function KR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class v6 extends QR{data(){return super.data()}}function yv(n,e){return typeof e=="string"?gv(n,e):e instanceof fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class w6 extends _v{}function vv(n,e,...t){let r=[];e instanceof _v&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof Ev).length,d=l.filter(m=>m instanceof pm).length;if(c>1||c>0&&d>0)throw new me(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)n=a._apply(n);return n}class pm extends w6{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pm(e,t,r)}_apply(e){const t=this._parse(e);return WR(e._query,t),new Gl(e.firestore,e.converter,Uy(e._query,t))}_parse(e){const t=hv(e.firestore);return function(l,c,d,m,g,_,w){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){l1(w,_);const O=[];for(const L of w)O.push(o1(m,l,L));T={arrayValue:{values:O}}}else T=o1(m,l,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||l1(w,_),T=y6(d,c,w,_==="in"||_==="not-in");return Vt.create(g,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Od(n,e,t){const r=e,a=yv("where",n);return pm._create(a,r,t)}class Ev extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ev(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)WR(c,m),c=Uy(c,m)}(e._query,t),new Gl(e.firestore,e.converter,Uy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o1(n,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new me(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$S(e)&&t.indexOf("/")!==-1)throw new me(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!ve.isDocumentKey(r))throw new me(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return TT(n,new ve(r))}if(t instanceof On)return TT(n,t._key);throw new me(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cm(t)}.`)}function l1(n,e){if(!Array.isArray(n)||n.length===0)throw new me(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WR(n,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class b6{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ma(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Td].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>xt(c.doubleValue));return new cv(l)}convertGeoPoint(e){return new uv(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=aa(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);tt(dR(r));const a=new kc(r.get(1),r.get(3)),l=new ve(r.popFirst(5));return a.isEqual(t)||ri(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XR extends QR{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rd extends XR{data(e={}){return super.data(e)}}class A6{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new dc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rd(this._firestore,this._userDataWriter,r.key,r,new dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new rd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new dc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new rd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new dc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:S6(d.type),doc:m,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n){n=ms(n,On);const e=ms(n.firestore,Ql);return s6(lv(e),n._key).then(t=>C6(e,n,t))}class YR extends b6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}function wv(n){n=ms(n,Gl);const e=ms(n.firestore,Ql),t=lv(e),r=new YR(e);return E6(n._query),i6(t,n._query).then(a=>new A6(e,r,n,a))}function uo(n,e,t){n=ms(n,On);const r=ms(n.firestore,Ql),a=T6(n.converter,e);return bv(r,[d6(hv(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Pr.none())])}function jc(n,e,t,...r){n=ms(n,On);const a=ms(n.firestore,Ql),l=hv(a);let c;return c=typeof(e=Ot(e))=="string"||e instanceof fm?g6(l,"updateDoc",n._key,e,t,r):p6(l,"updateDoc",n._key,e),bv(a,[c.toMutation(n._key,Pr.exists(!0))])}function R6(n){return bv(ms(n.firestore,Ql),[new q_(n._key,Pr.none())])}function bv(n,e){return function(r,a){const l=new Ys;return r.asyncQueue.enqueueAndForget(async()=>GP(await r6(r),a,l)),l.promise}(lv(n),e)}function C6(n,e,t){const r=t.docs.get(e._key),a=new YR(n);return new XR(n,a,e._key,r,new dc(t.hasPendingWrites,t.fromCache),e.converter)}function ha(){return new fv("serverTimestamp")}function I6(...n){return new dv("arrayUnion",n)}function JR(n){return new mv("increment",n)}(function(e,t=!0){(function(a){zl=a})(po),Lr(new vr("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ql(new yM(r.getProvider("auth-internal")),new EM(c,r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new me(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(g.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),jn(hT,fT,e),jn(hT,fT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebasestorage.googleapis.com",x6="storageBucket",N6=2*60*1e3,O6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Er{constructor(e,t,r=0){super(Jg(e),`Firebase Storage: ${t} (${Jg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ys.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ps;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ps||(ps={}));function Jg(n){return"storage/"+n}function D6(){const n="An unknown error occurred, please check the error payload for server response.";return new ys(ps.UNKNOWN,n)}function M6(){return new ys(ps.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function k6(){return new ys(ps.CANCELED,"User canceled the upload/download.")}function P6(n){return new ys(ps.INVALID_URL,"Invalid URL '"+n+"'.")}function V6(n){return new ys(ps.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function u1(n){return new ys(ps.INVALID_ARGUMENT,n)}function e2(){return new ys(ps.APP_DELETED,"The Firebase app was deleted.")}function L6(n){return new ys(ps.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Dr.makeFromUrl(e,t)}catch{return new Dr(e,"")}if(r.path==="")return r;throw V6(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(X){X.path_=decodeURIComponent(X.path)}const _="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${w}/${_}/b/${a}/o${T}`,"i"),O={bucket:1,path:3},L=t===ZR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",$=new RegExp(`^https?://${L}/${a}/${P}`,"i"),G=[{regex:d,indices:m,postModify:l},{regex:R,indices:O,postModify:g},{regex:$,indices:{bucket:1,path:2},postModify:g}];for(let X=0;X<G.length;X++){const Y=G[X],te=Y.regex.exec(e);if(te){const M=te[Y.indices.bucket];let x=te[Y.indices.path];x||(x=""),r=new Dr(M,x),Y.postModify(r);break}}if(r==null)throw P6(e);return r}}class U6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(n,e,t){let r=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let g=!1;function _(...P){g||(g=!0,e.apply(null,P))}function w(P){a=setTimeout(()=>{a=null,n(R,m())},P)}function T(){l&&clearTimeout(l)}function R(P,...$){if(g){T();return}if(P){T(),_.call(null,P,...$);return}if(m()||c){T(),_.call(null,P,...$);return}r<64&&(r*=2);let G;d===1?(d=2,G=0):G=(r+Math.random())*1e3,w(G)}let O=!1;function L(P){O||(O=!0,T(),!g&&(a!==null?(P||(d=2),clearTimeout(a),w(0)):P||(d=1)))}return w(0),l=setTimeout(()=>{c=!0,L(!0)},t),L}function F6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(n){return n!==void 0}function c1(n,e,t,r){if(r<e)throw u1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw u1(`Invalid value for '${n}'. Expected ${t} or less.`)}function z6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var Dd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Dd||(Dd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,t,r,a,l,c,d,m,g,_,w,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,O)=>{this.resolve_=R,this.reject_=O,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new kf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Dd.NO_ERROR,m=l.getStatus();if(!d||H6(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Dd.ABORT;r(!1,new kf(!1,null,_));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new kf(g,l))})},t=(r,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());B6(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=D6();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?e2():k6();c(m)}else{const m=M6();c(m)}};this.canceled_?t(!1,new kf(!1,null,!0)):this.backoffId_=j6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&F6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function q6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function G6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function K6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Q6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function W6(n,e,t,r,a,l,c=!0){const d=z6(n.urlParams),m=n.url+d,g=Object.assign({},n.headers);return K6(g,e),q6(g,t),G6(g,l),Q6(g,r),new $6(m,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Y6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this._service=e,t instanceof Dr?this._location=t:this._location=Dr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Md(e,t)}get root(){const e=new Dr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y6(this._location.path)}get storage(){return this._service}get parent(){const e=X6(this._location.path);if(e===null)return null;const t=new Dr(this._location.bucket,e);return new Md(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw L6(e)}}function h1(n,e){const t=e==null?void 0:e[x6];return t==null?null:Dr.makeFromBucketSpec(t,n)}function J6(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:DA(a,n.app.options.projectId))}class Z6{constructor(e,t,r,a,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._bucket=null,this._host=ZR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N6,this._maxUploadRetryTime=O6,this._requests=new Set,a!=null?this._bucket=Dr.makeFromBucketSpec(a,this._host):this._bucket=h1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dr.makeFromBucketSpec(this._url,e):this._bucket=h1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){c1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){c1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Md(this,e)}_makeRequest(e,t,r,a,l=!0){if(this._deleted)return new U6(e2());{const c=W6(e,this._appId,r,a,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const f1="@firebase/storage",d1="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="storage";function e5(n=Wd(),e){n=Ot(n);const r=da(n,t2).getImmediate({identifier:e}),a=xA("storage");return a&&t5(r,...a),r}function t5(n,e,t,r={}){J6(n,e,t,r)}function n5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Z6(t,r,a,e,po)}function r5(){Lr(new vr(t2,n5,"PUBLIC").setMultipleInstances(!0)),jn(f1,d1,""),jn(f1,d1,"esm2017")}r5();const n2="@firebase/installations",Tv="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1e4,s2=`w:${Tv}`,i2="FIS_v2",s5="https://firebaseinstallations.googleapis.com/v1",i5=60*60*1e3,a5="installations",o5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new mo(a5,o5,l5);function a2(n){return n instanceof Er&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2({projectId:n}){return`${s5}/projects/${n}/installations`}function l2(n){return{token:n.token,requestStatus:2,expiresIn:c5(n.expiresIn),creationTime:Date.now()}}async function u2(n,e){const r=(await e.json()).error;return co.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function c2({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function u5(n,{refreshToken:e}){const t=c2(n);return t.append("Authorization",h5(e)),t}async function h2(n){const e=await n();return e.status>=500&&e.status<600?n():e}function c5(n){return Number(n.replace("s","000"))}function h5(n){return`${i2} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=o2(n),a=c2(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:i2,appId:n.appId,sdkVersion:s2},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await h2(()=>fetch(r,d));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:l2(g.authToken)}}else throw await u2("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=/^[cdef][\w-]{21}$/,Xy="";function p5(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=g5(n);return m5.test(t)?t:Xy}catch{return Xy}}function g5(n){return d5(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new Map;function m2(n,e){const t=gm(n);p2(t,e),y5(t,e)}function p2(n,e){const t=d2.get(n);if(t)for(const r of t)r(e)}function y5(n,e){const t=_5();t&&t.postMessage({key:n,fid:e}),v5()}let no=null;function _5(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=n=>{p2(n.data.key,n.data.fid)}),no}function v5(){d2.size===0&&no&&(no.close(),no=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="firebase-installations-database",w5=1,ho="firebase-installations-store";let Zg=null;function Av(){return Zg||(Zg=UA(E5,w5,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ho)}}})),Zg}async function kd(n,e){const t=gm(n),a=(await Av()).transaction(ho,"readwrite"),l=a.objectStore(ho),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&m2(n,e.fid),e}async function g2(n){const e=gm(n),r=(await Av()).transaction(ho,"readwrite");await r.objectStore(ho).delete(e),await r.done}async function ym(n,e){const t=gm(n),a=(await Av()).transaction(ho,"readwrite"),l=a.objectStore(ho),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&m2(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(n){let e;const t=await ym(n.appConfig,r=>{const a=b5(r),l=T5(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Xy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function b5(n){const e=n||{fid:p5(),registrationStatus:0};return y2(e)}function T5(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=A5(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:S5(n)}:{installationEntry:e}}async function A5(n,e){try{const t=await f5(n,e);return kd(n.appConfig,t)}catch(t){throw a2(t)&&t.customData.serverCode===409?await g2(n.appConfig):await kd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function S5(n){let e=await m1(n.appConfig);for(;e.registrationStatus===1;)await f2(100),e=await m1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Sv(n);return r||t}return e}function m1(n){return ym(n,e=>{if(!e)throw co.create("installation-not-found");return y2(e)})}function y2(n){return R5(n)?{fid:n.fid,registrationStatus:0}:n}function R5(n){return n.registrationStatus===1&&n.registrationTime+r2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5({appConfig:n,heartbeatServiceProvider:e},t){const r=I5(n,t),a=u5(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:s2,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await h2(()=>fetch(r,d));if(m.ok){const g=await m.json();return l2(g)}else throw await u2("Generate Auth Token",m)}function I5(n,{fid:e}){return`${o2(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(n,e=!1){let t;const r=await ym(n.appConfig,l=>{if(!_2(l))throw co.create("not-registered");const c=l.authToken;if(!e&&O5(c))return l;if(c.requestStatus===1)return t=x5(n,e),l;{if(!navigator.onLine)throw co.create("app-offline");const d=M5(l);return t=N5(n,d),d}});return t?await t:r.authToken}async function x5(n,e){let t=await p1(n.appConfig);for(;t.authToken.requestStatus===1;)await f2(100),t=await p1(n.appConfig);const r=t.authToken;return r.requestStatus===0?Rv(n,e):r}function p1(n){return ym(n,e=>{if(!_2(e))throw co.create("not-registered");const t=e.authToken;return k5(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function N5(n,e){try{const t=await C5(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await kd(n.appConfig,r),t}catch(t){if(a2(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await g2(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kd(n.appConfig,r)}throw t}}function _2(n){return n!==void 0&&n.registrationStatus===2}function O5(n){return n.requestStatus===2&&!D5(n)}function D5(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+i5}function M5(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function k5(n){return n.requestStatus===1&&n.requestTime+r2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(n){const e=n,{installationEntry:t,registrationPromise:r}=await Sv(e);return r?r.catch(console.error):Rv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(n,e=!1){const t=n;return await L5(t),(await Rv(t,e)).token}async function L5(n){const{registrationPromise:e}=await Sv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(n){if(!n||!n.options)throw ey("App Configuration");if(!n.name)throw ey("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ey(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ey(n){return co.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="installations",j5="installations-internal",F5=n=>{const e=n.getProvider("app").getImmediate(),t=U5(e),r=da(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},B5=n=>{const e=n.getProvider("app").getImmediate(),t=da(e,v2).getImmediate();return{getId:()=>P5(t),getToken:a=>V5(t,a)}};function z5(){Lr(new vr(v2,F5,"PUBLIC")),Lr(new vr(j5,B5,"PRIVATE"))}z5();jn(n2,Tv);jn(n2,Tv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="analytics",H5="firebase_id",$5="origin",q5=60*1e3,G5="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Qd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new mo("analytics","Analytics",K5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(n){if(!n.startsWith(Cv)){const e=Zn.create("invalid-gtag-resource",{gtagURL:n});return Fn.warn(e.message),""}return n}function E2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function W5(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function X5(n,e){const t=W5("firebase-js-sdk-policy",{createScriptURL:Q5}),r=document.createElement("script"),a=`${Cv}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function Y5(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function J5(n,e,t,r,a,l){const c=r[a];try{if(c)await e[c];else{const m=(await E2(t)).find(g=>g.measurementId===a);m&&await e[m.appId]}}catch(d){Fn.error(d)}n("config",a,l)}async function Z5(n,e,t,r,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await E2(t);for(const m of c){const g=d.find(w=>w.measurementId===m),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",r,a||{})}catch(l){Fn.error(l)}}function e8(n,e,t,r){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await Z5(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await J5(n,e,t,r,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,g]=c;n("get",d,m,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Fn.error(d)}}return a}function t8(n,e,t,r,a){let l=function(...c){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=e8(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function n8(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Cv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=30,s8=1e3;class i8{constructor(e={},t=s8){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const w2=new i8;function a8(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function o8(n){var e;const{appId:t,apiKey:r}=n,a={method:"GET",headers:a8(r)},l=G5.replace("{app-id}",t),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();!((e=m.error)===null||e===void 0)&&e.message&&(d=m.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function l8(n,e=w2,t){const{appId:r,apiKey:a,measurementId:l}=n.options;if(!r)throw Zn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:r};throw Zn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new h8;return setTimeout(async()=>{d.abort()},q5),b2({appId:r,apiKey:a,measurementId:l},c,d,e)}async function b2(n,{throttleEndTimeMillis:e,backoffCount:t},r,a=w2){var l;const{appId:c,measurementId:d}=n;try{await u8(r,e)}catch(m){if(d)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:d};throw m}try{const m=await o8(n);return a.deleteThrottleMetadata(c),m}catch(m){const g=m;if(!c8(g)){if(a.deleteThrottleMetadata(c),d)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw m}const _=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?Ub(t,a.intervalMillis,r8):Ub(t,a.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(c,w),Fn.debug(`Calling attemptFetch again in ${_} millis`),b2(n,w,r,a)}}function u8(n,e){return new Promise((t,r)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function c8(n){if(!(n instanceof Er)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class h8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function f8(n,e,t,r,a){if(a&&a.global){n("event",t,r);return}else{const l=await e,c=Object.assign(Object.assign({},r),{send_to:l});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(){if(kA())try{await PA()}catch(n){return Fn.warn(Zn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Fn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function m8(n,e,t,r,a,l,c){var d;const m=l8(n);m.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Fn.error(R)),e.push(m);const g=d8().then(R=>{if(R)return r.getId()}),[_,w]=await Promise.all([m,g]);n8(l)||X5(l,_.measurementId),a("js",new Date);const T=(d=c==null?void 0:c.config)!==null&&d!==void 0?d:{};return T[$5]="firebase",T.update=!0,w!=null&&(T[H5]=w),a("config",_.measurementId,T),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.app=e}_delete(){return delete Rc[this.app.options.appId],Promise.resolve()}}let Rc={},g1=[];const y1={};let ty="dataLayer",g8="gtag",_1,T2,v1=!1;function y8(){const n=[];if(MA()&&n.push("This is a browser extension environment."),KN()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,a)=>`(${a+1}) ${r}`).join(" "),t=Zn.create("invalid-analytics-context",{errorInfo:e});Fn.warn(t.message)}}function _8(n,e,t){y8();const r=n.options.appId;if(!r)throw Zn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(Rc[r]!=null)throw Zn.create("already-exists",{id:r});if(!v1){Y5(ty);const{wrappedGtag:l,gtagCore:c}=t8(Rc,g1,y1,ty,g8);T2=l,_1=c,v1=!0}return Rc[r]=m8(n,g1,y1,e,_1,ty,t),new p8(n)}function v8(n=Wd()){n=Ot(n);const e=da(n,Pd);return e.isInitialized()?e.getImmediate():E8(n)}function E8(n,e={}){const t=da(n,Pd);if(t.isInitialized()){const a=t.getImmediate();if(ei(e,t.getOptions()))return a;throw Zn.create("already-initialized")}return t.initialize({options:e})}function w8(n,e,t,r){n=Ot(n),f8(T2,Rc[n.app.options.appId],e,t,r).catch(a=>Fn.error(a))}const E1="@firebase/analytics",w1="0.10.12";function b8(){Lr(new vr(Pd,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return _8(r,a,t)},"PUBLIC")),Lr(new vr("analytics-internal",n,"PRIVATE")),jn(E1,w1),jn(E1,w1,"esm2017");function n(e){try{const t=e.getProvider(Pd).getImmediate();return{logEvent:(r,a,l)=>w8(t,r,a,l)}}catch(t){throw Zn.create("interop-component-reg-failed",{reason:t})}}}b8();const T8={apiKey:"AIzaSyByBUCnsUPu5f9N9mcPmwZb8fTxPP34jRU",authDomain:"health-quest-69684.firebaseapp.com",projectId:"health-quest-69684",storageBucket:"health-quest-69684.appspot.com",messagingSenderId:"224519172412",appId:"1:224519172412:web:3fb327009476d0e13a2e39",measurementId:"G-6J2GKXYCZ1"},_m=jA(T8),Vd=dM(_m),Nt=l6(_m);e5(_m);v8(_m);const A2=new Ks;A2.setCustomParameters({prompt:"select_account"});const A8=async()=>{var n;try{const t=(await b3(Vd,A2)).user;if(!(await Zc(sn(Nt,"users",t.uid))).exists()){const a={uid:t.uid,name:t.displayName||"User",username:`@${((n=t.displayName)==null?void 0:n.toLowerCase().replace(/\s+/g,""))||t.uid.substring(0,8)}`,email:t.email||"",avatarUrl:t.photoURL||"/health-quest/profile.png",createdAt:_t.fromDate(new Date)};await uo(sn(Nt,"users",t.uid),a),await uo(sn(Nt,"userStats",t.uid),{userId:t.uid,activeGoals:0,completion:0,totalGroups:0,goalsCompleted:0,workoutSessions:0,healthyMeals:0,updatedAt:ha()})}return t}catch(e){throw console.error("Error signing in with Google:",e),e}},S2=async()=>r3(Vd),S8=async n=>{try{const e=await Zc(sn(Nt,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error getting user data:",e),e}},R2=I.createContext({currentUser:null,userData:null,loading:!0,isAuthenticated:!1});function oi(){return I.useContext(R2)}function R8({children:n}){const[e,t]=I.useState(null),[r,a]=I.useState(null),[l,c]=I.useState(!0),[d,m]=I.useState(!1);I.useEffect(()=>(ZD(Vd,uS).then(()=>{console.log("Persistence set to LOCAL")}).catch(w=>{console.error("Error setting persistence:",w)}),n3(Vd,async w=>{if(t(w),m(!!w),w)try{const T=await S8(w.uid);a(T)}catch(T){console.error("Error fetching user data:",T)}else a(null);c(!1)})),[]);const g={currentUser:e,userData:r,loading:l,isAuthenticated:d};return b.jsx(R2.Provider,{value:g,children:!l&&n})}const C8=()=>Math.random().toString(36).substring(2,8).toUpperCase(),I8=async(n,e,t="family")=>{try{const r=C8(),a=sn(Kl(Nt,"groups")),l=a.id,c={id:l,name:n,code:r,icon:t,createdBy:e,createdAt:_t.fromDate(new Date),members:[e],status:"Active"};await uo(a,c);const d=sn(Nt,"userStats",e);return await jc(d,{totalGroups:JR(1),updatedAt:ha()}),await uo(sn(Nt,"healthStats",`${e}_${l}`),{userId:e,groupId:l,healthyFats:0,veggies:0,cardio:0,strength:0,updatedAt:ha()}),l}catch(r){throw console.error("Error creating group:",r),r}},x8=async n=>{try{const e=await Zc(sn(Nt,"groups",n));return e.exists()?e.data():null}catch(e){throw console.error("Error getting group:",e),e}},N8=async n=>{try{const e=vv(Kl(Nt,"groups"),Od("code","==",n)),t=await wv(e);return t.empty?null:{id:t.docs[0].id,...t.docs[0].data()}}catch(e){throw console.error("Error getting group by code:",e),e}},vm=async n=>{try{const e=vv(Kl(Nt,"groups"),Od("members","array-contains",n));return(await wv(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting user groups:",e),e}},O8=async(n,e)=>{try{const t=sn(Nt,"groups",n);await jc(t,{members:I6(e)});const r=sn(Nt,"userStats",e);await jc(r,{totalGroups:JR(1),updatedAt:ha()}),await uo(sn(Nt,"healthStats",`${e}_${n}`),{userId:e,groupId:n,healthyFats:0,veggies:0,cardio:0,strength:0,updatedAt:ha()})}catch(t){throw console.error("Error joining group:",t),t}};function D8(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M445.588 56l-.026 384.352c6.881 11.323 14 15.677 19.97 15.648 5.924-.028 12.967-4.434 19.714-15.418L466.82 244.27l-.215-2.391 1.475-1.906c21.174-27.169 28.573-74.108 22.533-113.81-3.02-19.852-9.342-37.82-18.195-50.522-7.424-10.652-16.28-17.447-26.828-19.641h-.002zm-372.375.004l-.016 67.127-12.56-.016V56.008H46.332l.002 67.11H33.756v-67.11h-14.57v103.228c-.001 11.417 6.23 17.748 16.04 21.662l4.06 1.622-.09 4.37c-2 84.57-3.977 169.139-5.962 253.708C40.074 451.79 47.1 456.028 52.95 456c5.85-.028 12.87-4.377 19.623-15.432-2.315-84.547-4.63-169.096-6.941-253.644l-.12-4.4 4.073-1.606c10.324-4.106 17.039-11.074 17.039-21.676V56.004h-13.41zM256 95A161 161 0 0 0 95 256a161 161 0 0 0 161 161 161 161 0 0 0 161-161A161 161 0 0 0 256 95z"},child:[]}]})(n)}function M8(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.156 98.063c-4.05-.11-8.044 1.117-11.656 4-1.542 1.23-3.1 2.884-4.47 4.75-22.9 31.22-48.278 57.33-75.186 81-8.76 14.692 10.695 44.406 25.594 44.406 34.144-12.928 69.617-22.516 106.75-26.314 42.628-4.358 17.688-68.134-26.25-45.47 30.3-22.666 7.094-61.79-14.782-62.374zM310.47 108.156c-6.167-.108-12.215 1.172-17.595 4.28-1.576.912-3.042 1.948-4.406 3.095-.038-.056-.09-.13-.126-.186-79.912 66.402-116.334 73.468-158.22 86.844-6.886 2.2-12.27 7.18-16.5 15.5s-6.892 19.843-7.343 33.125c-.9 26.563 6.935 59.927 23.72 89.03 16.72 28.99 43.37 53.946 67.656 67.126 12.143 6.59 23.682 10.167 32.375 10.436 8.694.27 13.915-1.95 17.782-7.375 30.986-43.45 89.343-69.052 156.157-92.25-.005-.006.003-.023 0-.03 2.012-.663 3.967-1.51 5.842-2.594 8.2-4.738 13.535-12.897 16.282-22.125 2.747-9.227 3.22-19.75 2.03-31.25-.953-9.233-3.033-19.127-6.155-29.374-5.916 1.366-11.628 3.157-17.908 5.47 2.835 9.25 4.69 17.978 5.5 25.81 1.007 9.74.403 18.06-1.375 24.033-1.777 5.972-4.412 9.338-7.718 11.25-3.308 1.91-7.543 2.505-13.595 1.06-6.052-1.443-13.55-5.07-21.47-10.81-15.838-11.482-33.334-31.223-47.624-56-14.29-24.78-22.61-49.838-24.624-69.314-1.006-9.738-.403-18.027 1.375-24 1.78-5.973 4.414-9.37 7.72-11.28 1.653-.957 3.52-1.58 5.75-1.782.557-.05 1.147-.067 1.75-.063 1.81.014 3.824.272 6.094.814 6.05 1.444 13.518 5.04 21.437 10.78 8.218 5.957 16.884 14.166 25.314 24.126 5.07-4.055 9.34-8.25 13.406-13.188-8.97-10.46-18.366-19.26-27.75-26.062-9.354-6.78-18.733-11.61-28.094-13.844-2.34-.558-4.674-.935-7.03-1.125-.885-.07-1.776-.108-2.657-.124zm7.967 34.188c-.438.024-.86.063-1.28.125-17.327 2.54-14.97 36.035 5.03 74.56 20 38.528 50.52 67.576 67.844 65.032 5.995-.88 9.263-5.687 10.658-12.875-1.67 2.187-3.847 3.484-6.72 3.907-15.316 2.248-42.316-23.093-60-57.156-17.682-34.064-19.254-63.91-3.937-66.157 3.638-.53 7.69.417 12.345 2.782-8.68-6.8-17.353-10.583-23.938-10.218zM102 325.124c-16.555 1.844-35.304 3.26-57.063 4.376-49.128 2.523-25.555 71.576 30.094 52.22-49.365 29.9 3.86 86.927 26.97 46.75 10.362-18.016 21.88-33.79 34.375-47.814-8.42-9.644-16.078-20.224-22.563-31.47-4.52-7.835-8.462-15.898-11.812-24.06z"},child:[]}]})(n)}function k8(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M164.188 40.375c-168.48 35.59-220.94 167.97-17 187.47-13.147 35.014-21.172 74.948-22.22 114.218-35.694 33.01-59.593 66.343-59.593 66.343l47.72 47.72-39.345 26.218h113.28c-73.368-73.383-21.278-104.5 65.626-104.5 88.096 0 134.175 35.905 65.594 104.5h114.5l-40.563-26.22 47.72-47.718s-22.25-31.027-55.844-62.844c-.65-40.39-8.807-81.663-22.344-117.718 203.953-19.496 151.482-151.878-17-187.47-40.813 30.863 6.55 79.75 43.717 44.626 36.908 54.048 8.752 99.845-71.937 65.594-.02-.022-.042-.04-.063-.063-9.66 28.054-33.333 48.47-61.968 48.47-28.637 0-52.332-20.416-62-48.47l-.064.064C111.736 184.826 83.596 139.042 120.5 85c37.168 35.125 84.5-13.763 43.688-44.625zm90.28 24.063c-25.736 0-48 25.088-48 57.937 0 32.85 22.264 57.938 48 57.938 25.738 0 47.97-25.086 47.97-57.938 0-32.852-22.232-57.938-47.97-57.938z"},child:[]}]})(n)}function P8(n){return St({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M176 256c44.11 0 80-35.89 80-80s-35.89-80-80-80-80 35.89-80 80 35.89 80 80 80zm352-128H304c-8.84 0-16 7.16-16 16v144H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v352c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16v-48h512v48c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V240c0-61.86-50.14-112-112-112z"},child:[]}]})(n)}function V8(n){return St({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M104 96H56c-13.3 0-24 10.7-24 24v104H8c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h24v104c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24zm528 128h-24V120c0-13.3-10.7-24-24-24h-48c-13.3 0-24 10.7-24 24v272c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V288h24c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM456 32h-48c-13.3 0-24 10.7-24 24v168H256V56c0-13.3-10.7-24-24-24h-48c-13.3 0-24 10.7-24 24v400c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V288h128v168c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24z"},child:[]}]})(n)}function L8(n){return St({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(n)}function U8(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"},child:[]}]})(n)}function j8({quest:n,onDelete:e}){const t=()=>n.activity=="Strength Workouts"?b.jsx(k8,{style:{color:"#7b39ec"}}):n.activity=="Cardio Workouts"?b.jsx(NN,{style:{color:"#7b39ec"}}):b.jsx(P8,{style:{color:"#7b39ec"}}),r=async()=>{if(n.id)try{await e(n.id)}catch(a){console.error("Error deleting goal:",a)}};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[t(),"  ",b.jsxs("b",{children:[n.activity,": ",n.goalAmount," ",n.activity=="Sleep"?"Hours":"Workouts"]})]}),b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsxs("b",{children:[n.curAmount,"/",n.goalAmount]}),b.jsx("button",{className:"btn btn-xs btn-danger ms-2 d-flex align-items-center",style:{fontSize:"12px",height:"85%"},onClick:r,children:"Delete"})]})]}),b.jsx(T_,{bgColor:"#7b39ec",className:"mb-2",completed:n.curAmount/n.goalAmount*100,isLabelVisible:!1})]})}function F8({setFitnessModalOpen:n,updateFitnessProgress:e}){const[t,r]=I.useState(0),[a,l]=I.useState(0),[c,d]=I.useState(0);return b.jsx("div",{className:"modal show fade",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:b.jsx("div",{className:"modal-dialog",children:b.jsxs("div",{className:"modal-content",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h5",{className:"modal-title",children:"Log Activity"}),b.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1)})]}),b.jsx("div",{className:"modal-body",children:b.jsxs("form",{onSubmit:m=>m.preventDefault(),children:[b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"strength",className:"form-label",children:"Strength Workouts"}),b.jsx("input",{type:"number",className:"form-control",id:"strength",placeholder:"Enter number of strength workouts",value:t===0?"":t,onChange:m=>r(m.target.value===""?0:Number(m.target.value))})]}),b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"cardio",className:"form-label",children:"Cardio Workouts"}),b.jsx("input",{type:"number",className:"form-control",id:"cardio",placeholder:"Enter number of cardio workouts",value:a===0?"":a,onChange:m=>l(m.target.value===""?0:Number(m.target.value))})]}),b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"sleep",className:"form-label",children:"Sleep (hours)"}),b.jsx("input",{type:"number",className:"form-control",id:"sleep",placeholder:"Enter hours of sleep",value:c===0?"":c,onChange:m=>d(m.target.value===""?0:Number(m.target.value))})]})]})}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"btn btn-danger",onClick:()=>n(!1),children:"Cancel"}),b.jsx("button",{className:"btn btn-success",onClick:()=>{e(a,t,c),n(!1)},children:"Log Activity"})]})]})})})}const Yy="RFC3986",Jy={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},B8="RFC1738",z8=Array.isArray,ss=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),ny=1024,H8=(n,e,t,r,a)=>{if(n.length===0)return n;let l=n;if(typeof n=="symbol"?l=Symbol.prototype.toString.call(n):typeof n!="string"&&(l=String(n)),t==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<l.length;d+=ny){const m=l.length>=ny?l.slice(d,d+ny):l,g=[];for(let _=0;_<m.length;++_){let w=m.charCodeAt(_);if(w===45||w===46||w===95||w===126||w>=48&&w<=57||w>=65&&w<=90||w>=97&&w<=122||a===B8&&(w===40||w===41)){g[g.length]=m.charAt(_);continue}if(w<128){g[g.length]=ss[w];continue}if(w<2048){g[g.length]=ss[192|w>>6]+ss[128|w&63];continue}if(w<55296||w>=57344){g[g.length]=ss[224|w>>12]+ss[128|w>>6&63]+ss[128|w&63];continue}_+=1,w=65536+((w&1023)<<10|m.charCodeAt(_)&1023),g[g.length]=ss[240|w>>18]+ss[128|w>>12&63]+ss[128|w>>6&63]+ss[128|w&63]}c+=g.join("")}return c};function $8(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function b1(n,e){if(z8(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const q8=Object.prototype.hasOwnProperty,C2={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},as=Array.isArray,G8=Array.prototype.push,I2=function(n,e){G8.apply(n,as(e)?e:[e])},K8=Date.prototype.toISOString,qt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:H8,encodeValuesOnly:!1,format:Yy,formatter:Jy[Yy],indices:!1,serializeDate(n){return K8.call(n)},skipNulls:!1,strictNullHandling:!1};function Q8(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const ry={};function x2(n,e,t,r,a,l,c,d,m,g,_,w,T,R,O,L,P,$){let B=n,G=$,X=0,Y=!1;for(;(G=G.get(ry))!==void 0&&!Y;){const D=G.get(n);if(X+=1,typeof D<"u"){if(D===X)throw new RangeError("Cyclic object value");Y=!0}typeof G.get(ry)>"u"&&(X=0)}if(typeof g=="function"?B=g(e,B):B instanceof Date?B=T==null?void 0:T(B):t==="comma"&&as(B)&&(B=b1(B,function(D){return D instanceof Date?T==null?void 0:T(D):D})),B===null){if(l)return m&&!L?m(e,qt.encoder,P,"key",R):e;B=""}if(Q8(B)||$8(B)){if(m){const D=L?e:m(e,qt.encoder,P,"key",R);return[(O==null?void 0:O(D))+"="+(O==null?void 0:O(m(B,qt.encoder,P,"value",R)))]}return[(O==null?void 0:O(e))+"="+(O==null?void 0:O(String(B)))]}const te=[];if(typeof B>"u")return te;let M;if(t==="comma"&&as(B))L&&m&&(B=b1(B,m)),M=[{value:B.length>0?B.join(",")||null:void 0}];else if(as(g))M=g;else{const D=Object.keys(B);M=_?D.sort(_):D}const x=d?String(e).replace(/\./g,"%2E"):String(e),C=r&&as(B)&&B.length===1?x+"[]":x;if(a&&as(B)&&B.length===0)return C+"[]";for(let D=0;D<M.length;++D){const V=M[D],j=typeof V=="object"&&typeof V.value<"u"?V.value:B[V];if(c&&j===null)continue;const N=w&&d?V.replace(/\./g,"%2E"):V,Ie=as(B)?typeof t=="function"?t(C,N):C:C+(w?"."+N:"["+N+"]");$.set(n,X);const we=new WeakMap;we.set(ry,$),I2(te,x2(j,Ie,t,r,a,l,c,d,t==="comma"&&L&&as(B)?null:m,g,_,w,T,R,O,L,P,we))}return te}function W8(n=qt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||qt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Yy;if(typeof n.format<"u"){if(!q8.call(Jy,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=Jy[t];let a=qt.filter;(typeof n.filter=="function"||as(n.filter))&&(a=n.filter);let l;if(n.arrayFormat&&n.arrayFormat in C2?l=n.arrayFormat:"indices"in n?l=n.indices?"indices":"repeat":l=qt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:qt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:qt.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:qt.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:qt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?qt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:qt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:qt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:qt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:qt.encodeValuesOnly,filter:a,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:qt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:qt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:qt.strictNullHandling}}function X8(n,e={}){let t=n;const r=W8(e);let a,l;typeof r.filter=="function"?(l=r.filter,t=l("",t)):as(r.filter)&&(l=r.filter,a=l);const c=[];if(typeof t!="object"||t===null)return"";const d=C2[r.arrayFormat],m=d==="comma"&&r.commaRoundTrip;a||(a=Object.keys(t)),r.sort&&a.sort(r.sort);const g=new WeakMap;for(let T=0;T<a.length;++T){const R=a[T];r.skipNulls&&t[R]===null||I2(c,x2(t[R],R,d,m,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,g))}const _=c.join(r.delimiter);let w=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),_.length>0?w+_:""}const gl="4.94.0";let T1=!1,Cc,N2,O2,Zy,D2,M2,k2,P2,V2;function Y8(n,e={auto:!1}){if(T1)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Cc)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Cc}'\``);T1=e.auto,Cc=n.kind,N2=n.fetch,O2=n.FormData,Zy=n.File,D2=n.ReadableStream,M2=n.getMultipartRequestOptions,k2=n.getDefaultAgent,P2=n.fileFromPath,V2=n.isFsReadStream}class J8{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Z8({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,a,l;try{t=fetch,r=Request,a=Response,l=Headers}catch(c){throw new Error(`this environment is missing the following Web Fetch API type: ${c.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:a,Headers:l,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(c,d)=>({...d,body:new J8(c)}),getDefaultAgent:c=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:c=>!1}}const L2=()=>{Cc||Y8(Z8(),{auto:!0})};L2();class Ae extends Error{}class mn extends Ae{constructor(e,t,r,a){super(`${mn.makeMessage(e,t,r)}`),this.status=e,this.headers=a,this.request_id=a==null?void 0:a["x-request-id"],this.error=t;const l=t;this.code=l==null?void 0:l.code,this.param=l==null?void 0:l.param,this.type=l==null?void 0:l.type}static makeMessage(e,t,r){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,r,a){if(!e||!a)return new Em({message:r,cause:t_(t)});const l=t==null?void 0:t.error;return e===400?new U2(e,l,r,a):e===401?new j2(e,l,r,a):e===403?new F2(e,l,r,a):e===404?new B2(e,l,r,a):e===409?new z2(e,l,r,a):e===422?new H2(e,l,r,a):e===429?new $2(e,l,r,a):e>=500?new q2(e,l,r,a):new mn(e,l,r,a)}}class _r extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Em extends mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Iv extends Em{constructor({message:e}={}){super({message:e??"Request timed out."})}}class U2 extends mn{}class j2 extends mn{}class F2 extends mn{}class B2 extends mn{}class z2 extends mn{}class H2 extends mn{}class $2 extends mn{}class q2 extends mn{}class G2 extends Ae{constructor(){super("Could not parse response content as the length limit was reached")}}class K2 extends Ae{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Pf=function(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t},Qa=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Xn;class wm{constructor(){Xn.set(this,void 0),this.buffer=new Uint8Array,Pf(this,Xn,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const a=[];let l;for(;(l=eV(this.buffer,Qa(this,Xn,"f")))!=null;){if(l.carriage&&Qa(this,Xn,"f")==null){Pf(this,Xn,l.index,"f");continue}if(Qa(this,Xn,"f")!=null&&(l.index!==Qa(this,Xn,"f")+1||l.carriage)){a.push(this.decodeText(this.buffer.slice(0,Qa(this,Xn,"f")-1))),this.buffer=this.buffer.slice(Qa(this,Xn,"f")),Pf(this,Xn,null,"f");continue}const c=Qa(this,Xn,"f")!==null?l.preceding-1:l.preceding,d=this.decodeText(this.buffer.slice(0,c));a.push(d),this.buffer=this.buffer.slice(l.index),Pf(this,Xn,null,"f")}return a}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ae(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ae(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ae("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Xn=new WeakMap;wm.NEWLINE_CHARS=new Set([`
`,"\r"]);wm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eV(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function tV(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function Q2(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class ls{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const c of nV(e,t))if(!l){if(c.data.startsWith("[DONE]")){l=!0;continue}if(c.event===null||c.event.startsWith("response.")||c.event.startsWith("transcript.")){let d;try{d=JSON.parse(c.data)}catch(m){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),m}if(d&&d.error)throw new mn(void 0,d.error,void 0,tC(e.headers));yield d}else{let d;try{d=JSON.parse(c.data)}catch(m){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),m}if(c.event=="error")throw new mn(void 0,d.error,d.message,void 0);yield{event:c.event,data:d}}}l=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{l||t.abort()}}return new ls(a,t)}static fromReadableStream(e,t){let r=!1;async function*a(){const c=new wm,d=Q2(e);for await(const m of d)for(const g of c.decode(m))yield g;for(const m of c.flush())yield m}async function*l(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of a())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{c||t.abort()}}return new ls(l,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=r.next();e.push(c),t.push(c)}return l.shift()}});return[new ls(()=>a(e),this.controller),new ls(()=>a(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new D2({async start(){t=e[Symbol.asyncIterator]()},async pull(a){try{const{value:l,done:c}=await t.next();if(c)return a.close();const d=r.encode(JSON.stringify(l)+`
`);a.enqueue(d)}catch(l){a.error(l)}},async cancel(){var a;await((a=t.return)==null?void 0:a.call(t))}})}}async function*nV(n,e){if(!n.body)throw e.abort(),new Ae("Attempted to iterate over a response with no body");const t=new sV,r=new wm,a=Q2(n.body);for await(const l of rV(a))for(const c of r.decode(l)){const d=t.decode(c);d&&(yield d)}for(const l of r.flush()){const c=t.decode(l);c&&(yield c)}}async function*rV(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let a=new Uint8Array(e.length+r.length);a.set(e),a.set(r,e.length),e=a;let l;for(;(l=tV(e))!==-1;)yield e.slice(0,l),e=e.slice(l)}e.length>0&&(yield e)}class sV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,a]=iV(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function iV(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const W2=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",X2=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&bm(n),bm=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",aV=n=>X2(n)||W2(n)||V2(n);async function Y2(n,e,t){var a;if(n=await n,X2(n))return n;if(W2(n)){const l=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const c=bm(l)?[await l.arrayBuffer()]:[l];return new Zy(c,e,t)}const r=await oV(n);if(e||(e=uV(n)??"unknown_file"),!(t!=null&&t.type)){const l=(a=r[0])==null?void 0:a.type;typeof l=="string"&&(t={...t,type:l})}return new Zy(r,e,t)}async function oV(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(bm(n))e.push(await n.arrayBuffer());else if(cV(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${lV(n)}`);return e}function lV(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function uV(n){var e;return sy(n.name)||sy(n.filename)||((e=sy(n.path))==null?void 0:e.split(/[\\/]/).pop())}const sy=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},cV=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",A1=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Vl=async n=>{const e=await hV(n.body);return M2(e,n)},hV=async n=>{const e=new O2;return await Promise.all(Object.entries(n||{}).map(([t,r])=>e_(e,t,r))),e},e_=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(aV(t)){const r=await Y2(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>e_(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,a])=>e_(n,`${e}[${r}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Al={},fV=function(n,e,t,r,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},dV=function(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Vf;L2();async function J2(n){var c;const{response:e}=n;if(n.options.stream)return sa("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):ls.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(c=t==null?void 0:t.split(";")[0])==null?void 0:c.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const d=await e.json();return sa("response",e.status,e.url,e.headers,d),Z2(d,e)}const l=await e.text();return sa("response",e.status,e.url,e.headers,l),l}function Z2(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Tm extends Promise{constructor(e,t=J2){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Tm(this.responsePromise,async t=>Z2(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class mV{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:a,fetch:l}){this.baseURL=e,this.maxRetries=iy("maxRetries",t),this.timeout=iy("timeout",r),this.httpAgent=a,this.fetch=l??N2}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...vV(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${TV()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async a=>{const l=a&&bm(a==null?void 0:a.body)?new DataView(await a.body.arrayBuffer()):(a==null?void 0:a.body)instanceof DataView?a.body:(a==null?void 0:a.body)instanceof ArrayBuffer?new DataView(a.body):a&&ArrayBuffer.isView(a==null?void 0:a.body)?new DataView(a.body.buffer):a==null?void 0:a.body;return{method:e,path:t,...a,body:l}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var L;const r={...e},{method:a,path:l,query:c,headers:d={}}=r,m=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:A1(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,g=this.calculateContentLength(m),_=this.buildURL(l,c);"timeout"in r&&iy("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const w=r.httpAgent??this.httpAgent??k2(_),T=r.timeout+1e3;typeof((L=w==null?void 0:w.options)==null?void 0:L.timeout)=="number"&&T>(w.options.timeout??0)&&(w.options.timeout=T),this.idempotencyHeader&&a!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const R=this.buildHeaders({options:r,headers:d,contentLength:g,retryCount:t});return{req:{method:a,...m&&{body:m},headers:R,...w&&{agent:w},signal:r.signal??null},url:_,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:a}){const l={};r&&(l["content-length"]=r);const c=this.defaultHeaders(e);return I1(l,c),I1(l,t),A1(e.body)&&Cc!=="node"&&delete l["content-type"],Uf(c,"x-stainless-retry-count")===void 0&&Uf(t,"x-stainless-retry-count")===void 0&&(l["x-stainless-retry-count"]=String(a)),Uf(c,"x-stainless-timeout")===void 0&&Uf(t,"x-stainless-timeout")===void 0&&e.timeout&&(l["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(l,t),l}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,a){return mn.generate(e,t,r,a)}request(e,t=null){return new Tm(this.makeRequest(e,t))}async makeRequest(e,t){var w,T;const r=await e,a=r.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:l,url:c,timeout:d}=this.buildRequest(r,{retryCount:a-t});if(await this.prepareRequest(l,{url:c,options:r}),sa("request",c,r,l.headers),(w=r.signal)!=null&&w.aborted)throw new _r;const m=new AbortController,g=await this.fetchWithTimeout(c,l,d,m).catch(t_);if(g instanceof Error){if((T=r.signal)!=null&&T.aborted)throw new _r;if(t)return this.retryRequest(r,t);throw g.name==="AbortError"?new Iv:new Em({cause:g})}const _=tC(g.headers);if(!g.ok){if(t&&this.shouldRetry(g)){const B=`retrying, ${t} attempts remaining`;return sa(`response (error; ${B})`,g.status,c,_),this.retryRequest(r,t,_)}const R=await g.text().catch(B=>t_(B).message),O=EV(R),L=O?void 0:R;throw sa(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,g.status,c,_,L),this.makeStatusError(g.status,O,L,_)}return{response:g,options:r,controller:m}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new pV(this,r,e)}buildURL(e,t){const r=bV(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return nC(a)||(t={...a,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Ae(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,a){const{signal:l,...c}=t||{};l&&l.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),r),m={signal:a.signal,...c};return m.method&&(m.method=m.method.toUpperCase()),this.fetch.call(void 0,e,m).finally(()=>{clearTimeout(d)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let a;const l=r==null?void 0:r["retry-after-ms"];if(l){const d=parseFloat(l);Number.isNaN(d)||(a=d)}const c=r==null?void 0:r["retry-after"];if(c&&!a){const d=parseFloat(c);Number.isNaN(d)?a=Date.parse(c)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,d)}return await eh(a),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}getUserAgent(){return`${this.constructor.name}/JS ${gl}`}}class eC{constructor(e,t,r,a){Vf.set(this,void 0),fV(this,Vf,e),this.options=a,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Ae("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[a,l]of r)e.url.searchParams.set(a,l);t.query=void 0,t.path=e.url.toString()}return await dV(this,Vf,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Vf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class pV extends Tm{constructor(e,t,r){super(t,async a=>new r(e,a.response,await J2(a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const tC=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),gV={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},At=n=>typeof n=="object"&&n!==null&&!nC(n)&&Object.keys(n).every(e=>rC(gV,e)),yV=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gl,"X-Stainless-OS":R1(Deno.build.os),"X-Stainless-Arch":S1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gl,"X-Stainless-OS":R1(process.platform),"X-Stainless-Arch":S1(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=_V();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function _V(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const a=r[1]||0,l=r[2]||0,c=r[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const S1=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",R1=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let C1;const vV=()=>C1??(C1=yV()),EV=n=>{try{return JSON.parse(n)}catch{return}},wV=/^[a-z][a-z0-9+.-]*:/i,bV=n=>wV.test(n),eh=n=>new Promise(e=>setTimeout(e,n)),iy=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ae(`${n} must be an integer`);if(e<0)throw new Ae(`${n} must be a positive integer`);return e},t_=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},Lf=n=>{var e,t,r,a;if(typeof process<"u")return((e=Al==null?void 0:Al[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(a=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:a.trim()};function nC(n){if(!n)return!0;for(const e in n)return!1;return!0}function rC(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function I1(n,e){for(const t in e){if(!rC(e,t))continue;const r=t.toLowerCase();if(!r)continue;const a=e[t];a===null?delete n[r]:a!==void 0&&(n[r]=a)}}const x1=new Set(["authorization","api-key"]);function sa(n,...e){if(typeof process<"u"&&(Al==null?void 0:Al.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const l={...r,headers:{...r.headers}};for(const c in r.headers)x1.has(c.toLowerCase())&&(l.headers[c]="REDACTED");return l}let a=null;for(const l in r)x1.has(l.toLowerCase())&&(a??(a={...r}),a[l]="REDACTED");return a??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const TV=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),AV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",SV=n=>typeof(n==null?void 0:n.get)=="function",Uf=(n,e)=>{var r;const t=e.toLowerCase();if(SV(n)){const a=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(l,c,d)=>c+d.toUpperCase());for(const l of[e,t,e.toUpperCase(),a]){const c=n.get(l);if(c)return c}}for(const[a,l]of Object.entries(n))if(a.toLowerCase()===t)return Array.isArray(l)?(l.length<=1||console.warn(`Received ${l.length} entries for the ${e} header, using the first entry.`),l[0]):l},RV=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let a=0;a<t;a++)r[a]=e.charCodeAt(a);return Array.from(new Float32Array(r.buffer))}};function ay(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class Am extends eC{constructor(e,t,r,a){super(e,t,r,a),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class pn extends eC{constructor(e,t,r,a){super(e,t,r,a),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class ke{constructor(e){this._client=e}}let sC=class extends ke{list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,CV,{query:t,...r})}},Sm=class extends ke{constructor(){super(...arguments),this.messages=new sC(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/chat/completions",Rm,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Rm extends pn{}class CV extends pn{}Sm.ChatCompletionsPage=Rm;Sm.Messages=sC;let Cm=class extends ke{constructor(){super(...arguments),this.completions=new Sm(this._client)}};Cm.Completions=Sm;Cm.ChatCompletionsPage=Rm;class iC extends ke{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class aC extends ke{create(e,t){return this._client.post("/audio/transcriptions",Vl({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class oC extends ke{create(e,t){return this._client.post("/audio/translations",Vl({body:e,...t,__metadata:{model:e.model}}))}}class th extends ke{constructor(){super(...arguments),this.transcriptions=new aC(this._client),this.translations=new oC(this._client),this.speech=new iC(this._client)}}th.Transcriptions=aC;th.Translations=oC;th.Speech=iC;class xv extends ke{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/batches",Nv,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Nv extends pn{}xv.BatchesPage=Nv;class Ov extends ke{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/assistants",Dv,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Dv extends pn{}Ov.AssistantsPage=Dv;function N1(n){return typeof n.parse=="function"}const Sl=n=>(n==null?void 0:n.role)==="assistant",lC=n=>(n==null?void 0:n.role)==="function",uC=n=>(n==null?void 0:n.role)==="tool";var xr=function(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t},yt=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},n_,sd,id,mc,pc,ad,gc,Gs,yc,Ld,Ud,yl,cC;class Mv{constructor(){n_.add(this),this.controller=new AbortController,sd.set(this,void 0),id.set(this,()=>{}),mc.set(this,()=>{}),pc.set(this,void 0),ad.set(this,()=>{}),gc.set(this,()=>{}),Gs.set(this,{}),yc.set(this,!1),Ld.set(this,!1),Ud.set(this,!1),yl.set(this,!1),xr(this,sd,new Promise((e,t)=>{xr(this,id,e,"f"),xr(this,mc,t,"f")}),"f"),xr(this,pc,new Promise((e,t)=>{xr(this,ad,e,"f"),xr(this,gc,t,"f")}),"f"),yt(this,sd,"f").catch(()=>{}),yt(this,pc,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},yt(this,n_,"m",cC).bind(this))},0)}_connected(){this.ended||(yt(this,id,"f").call(this),this._emit("connect"))}get ended(){return yt(this,yc,"f")}get errored(){return yt(this,Ld,"f")}get aborted(){return yt(this,Ud,"f")}abort(){this.controller.abort()}on(e,t){return(yt(this,Gs,"f")[e]||(yt(this,Gs,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=yt(this,Gs,"f")[e];if(!r)return this;const a=r.findIndex(l=>l.listener===t);return a>=0&&r.splice(a,1),this}once(e,t){return(yt(this,Gs,"f")[e]||(yt(this,Gs,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{xr(this,yl,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){xr(this,yl,!0,"f"),await yt(this,pc,"f")}_emit(e,...t){if(yt(this,yc,"f"))return;e==="end"&&(xr(this,yc,!0,"f"),yt(this,ad,"f").call(this));const r=yt(this,Gs,"f")[e];if(r&&(yt(this,Gs,"f")[e]=r.filter(a=>!a.once),r.forEach(({listener:a})=>a(...t))),e==="abort"){const a=t[0];!yt(this,yl,"f")&&!(r!=null&&r.length)&&Promise.reject(a),yt(this,mc,"f").call(this,a),yt(this,gc,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=t[0];!yt(this,yl,"f")&&!(r!=null&&r.length)&&Promise.reject(a),yt(this,mc,"f").call(this,a),yt(this,gc,"f").call(this,a),this._emit("end")}}_emitFinal(){}}sd=new WeakMap,id=new WeakMap,mc=new WeakMap,pc=new WeakMap,ad=new WeakMap,gc=new WeakMap,Gs=new WeakMap,yc=new WeakMap,Ld=new WeakMap,Ud=new WeakMap,yl=new WeakMap,n_=new WeakSet,cC=function(e){if(xr(this,Ld,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new _r),e instanceof _r)return xr(this,Ud,!0,"f"),this._emit("abort",e);if(e instanceof Ae)return this._emit("error",e);if(e instanceof Error){const t=new Ae(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ae(String(e)))};function kv(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function nh(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function IV(n,e){return!e||!hC(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Pv(n,e)}function Pv(n,e){const t=n.choices.map(r=>{var a;if(r.finish_reason==="length")throw new G2;if(r.finish_reason==="content_filter")throw new K2;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((a=r.message.tool_calls)==null?void 0:a.map(l=>NV(e,l)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?xV(e,r.message.content):null}}});return{...n,choices:t}}function xV(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function NV(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(a=>{var l;return((l=a.function)==null?void 0:l.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:nh(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function OV(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(a=>{var l;return((l=a.function)==null?void 0:l.name)===e.function.name});return nh(t)||(t==null?void 0:t.function.strict)||!1}function hC(n){var e;return kv(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>nh(t)||t.type==="function"&&t.function.strict===!0))??!1}function DV(n){for(const e of n??[]){if(e.type!=="function")throw new Ae(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ae(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Vn=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},wn,r_,jd,s_,i_,a_,fC,o_;const O1=10;class dC extends Mv{constructor(){super(...arguments),wn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(lC(e)||uC(e))&&e.content)this._emit("functionCallResult",e.content);else if(Sl(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Sl(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ae("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Vn(this,wn,"m",r_).call(this)}async finalMessage(){return await this.done(),Vn(this,wn,"m",jd).call(this)}async finalFunctionCall(){return await this.done(),Vn(this,wn,"m",s_).call(this)}async finalFunctionCallResult(){return await this.done(),Vn(this,wn,"m",i_).call(this)}async totalUsage(){return await this.done(),Vn(this,wn,"m",a_).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Vn(this,wn,"m",jd).call(this);t&&this._emit("finalMessage",t);const r=Vn(this,wn,"m",r_).call(this);r&&this._emit("finalContent",r);const a=Vn(this,wn,"m",s_).call(this);a&&this._emit("finalFunctionCall",a);const l=Vn(this,wn,"m",i_).call(this);l!=null&&this._emit("finalFunctionCallResult",l),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",Vn(this,wn,"m",a_).call(this))}async _createChatCompletion(e,t,r){const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),Vn(this,wn,"m",fC).call(this,t);const l=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Pv(l,t))}async _runChatCompletion(e,t,r){for(const a of t.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var T;const a="function",{function_call:l="auto",stream:c,...d}=t,m=typeof l!="string"&&(l==null?void 0:l.name),{maxChatCompletions:g=O1}=r||{},_={};for(const R of t.functions)_[R.name||R.function.name]=R;const w=t.functions.map(R=>({name:R.name||R.function.name,parameters:R.parameters,description:R.description}));for(const R of t.messages)this._addMessage(R,!1);for(let R=0;R<g;++R){const L=(T=(await this._createChatCompletion(e,{...d,function_call:l,functions:w,messages:[...this.messages]},r)).choices[0])==null?void 0:T.message;if(!L)throw new Ae("missing message in ChatCompletion response");if(!L.function_call)return;const{name:P,arguments:$}=L.function_call,B=_[P];if(B){if(m&&m!==P){const te=`Invalid function_call: ${JSON.stringify(P)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:a,name:P,content:te});continue}}else{const te=`Invalid function_call: ${JSON.stringify(P)}. Available options are: ${w.map(M=>JSON.stringify(M.name)).join(", ")}. Please try again`;this._addMessage({role:a,name:P,content:te});continue}let G;try{G=N1(B)?await B.parse($):$}catch(te){this._addMessage({role:a,name:P,content:te instanceof Error?te.message:String(te)});continue}const X=await B.function(G,this),Y=Vn(this,wn,"m",o_).call(this,X);if(this._addMessage({role:a,name:P,content:Y}),m)return}}async _runTools(e,t,r){var R,O,L;const a="tool",{tool_choice:l="auto",stream:c,...d}=t,m=typeof l!="string"&&((R=l==null?void 0:l.function)==null?void 0:R.name),{maxChatCompletions:g=O1}=r||{},_=t.tools.map(P=>{if(nh(P)){if(!P.$callback)throw new Ae("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:P.$callback,name:P.function.name,description:P.function.description||"",parameters:P.function.parameters,parse:P.$parseRaw,strict:!0}}}return P}),w={};for(const P of _)P.type==="function"&&(w[P.function.name||P.function.function.name]=P.function);const T="tools"in t?_.map(P=>P.type==="function"?{type:"function",function:{name:P.function.name||P.function.function.name,parameters:P.function.parameters,description:P.function.description,strict:P.function.strict}}:P):void 0;for(const P of t.messages)this._addMessage(P,!1);for(let P=0;P<g;++P){const B=(O=(await this._createChatCompletion(e,{...d,tool_choice:l,tools:T,messages:[...this.messages]},r)).choices[0])==null?void 0:O.message;if(!B)throw new Ae("missing message in ChatCompletion response");if(!((L=B.tool_calls)!=null&&L.length))return;for(const G of B.tool_calls){if(G.type!=="function")continue;const X=G.id,{name:Y,arguments:te}=G.function,M=w[Y];if(M){if(m&&m!==Y){const V=`Invalid tool_call: ${JSON.stringify(Y)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:a,tool_call_id:X,content:V});continue}}else{const V=`Invalid tool_call: ${JSON.stringify(Y)}. Available options are: ${Object.keys(w).map(j=>JSON.stringify(j)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:X,content:V});continue}let x;try{x=N1(M)?await M.parse(te):te}catch(V){const j=V instanceof Error?V.message:String(V);this._addMessage({role:a,tool_call_id:X,content:j});continue}const C=await M.function(x,this),D=Vn(this,wn,"m",o_).call(this,C);if(this._addMessage({role:a,tool_call_id:X,content:D}),m)return}}}}wn=new WeakSet,r_=function(){return Vn(this,wn,"m",jd).call(this).content??null},jd=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Sl(t)){const{function_call:r,...a}=t,l={...a,content:t.content??null,refusal:t.refusal??null};return r&&(l.function_call=r),l}}throw new Ae("stream ended without producing a ChatCompletionMessage with role=assistant")},s_=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const a=this.messages[r];if(Sl(a)&&(a!=null&&a.function_call))return a.function_call;if(Sl(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(t=a.tool_calls.at(-1))==null?void 0:t.function}},i_=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(lC(t)&&t.content!=null||uC(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var a;return r.role==="assistant"&&((a=r.tool_calls)==null?void 0:a.some(l=>l.type==="function"&&l.id===t.tool_call_id))}))return t.content}},a_=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},fC=function(e){if(e.n!=null&&e.n>1)throw new Ae("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},o_=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Fc extends dC{static runFunctions(e,t,r){const a=new Fc,l={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,t,l)),a}static runTools(e,t,r){const a=new Fc,l={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,t,l)),a}_addMessage(e,t=!0){super._addMessage(e,t),Sl(e)&&e.content&&this._emit("content",e.content)}}const mC=1,pC=2,gC=4,yC=8,_C=16,vC=32,EC=64,wC=128,bC=256,TC=wC|bC,AC=_C|vC|TC|EC,SC=mC|pC|AC,RC=gC|yC,MV=SC|RC,nn={STR:mC,NUM:pC,ARR:gC,OBJ:yC,NULL:_C,BOOL:vC,NAN:EC,INFINITY:wC,MINUS_INFINITY:bC,INF:TC,SPECIAL:AC,ATOM:SC,COLLECTION:RC,ALL:MV};class kV extends Error{}class PV extends Error{}function VV(n,e=nn.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return LV(n.trim(),e)}const LV=(n,e)=>{const t=n.length;let r=0;const a=T=>{throw new kV(`${T} at position ${r}`)},l=T=>{throw new PV(`${T} at position ${r}`)},c=()=>(w(),r>=t&&a("Unexpected end of input"),n[r]==='"'?d():n[r]==="{"?m():n[r]==="["?g():n.substring(r,r+4)==="null"||nn.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||nn.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||nn.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||nn.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||nn.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||nn.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):_()),d=()=>{const T=r;let R=!1;for(r++;r<t&&(n[r]!=='"'||R&&n[r-1]==="\\");)R=n[r]==="\\"?!R:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(T,++r-Number(R)))}catch(O){l(String(O))}else if(nn.STR&e)try{return JSON.parse(n.substring(T,r-Number(R))+'"')}catch{return JSON.parse(n.substring(T,n.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},m=()=>{r++,w();const T={};try{for(;n[r]!=="}";){if(w(),r>=t&&nn.OBJ&e)return T;const R=d();w(),r++;try{const O=c();Object.defineProperty(T,R,{value:O,writable:!0,enumerable:!0,configurable:!0})}catch(O){if(nn.OBJ&e)return T;throw O}w(),n[r]===","&&r++}}catch{if(nn.OBJ&e)return T;a("Expected '}' at end of object")}return r++,T},g=()=>{r++;const T=[];try{for(;n[r]!=="]";)T.push(c()),w(),n[r]===","&&r++}catch{if(nn.ARR&e)return T;a("Expected ']' at end of array")}return r++,T},_=()=>{if(r===0){n==="-"&&nn.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(n)}catch(R){if(nn.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}l(String(R))}}const T=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(nn.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(n.substring(T,r))}catch{n.substring(T,r)==="-"&&nn.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(n.substring(T,n.lastIndexOf("e")))}catch(O){l(String(O))}}},w=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return c()},D1=n=>VV(n,nn.ALL^nn.NUM);var il=function(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t},st=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},$t,$s,al,Gi,oy,jf,ly,uy,cy,Ff,hy,M1;class Bc extends dC{constructor(e){super(),$t.add(this),$s.set(this,void 0),al.set(this,void 0),Gi.set(this,void 0),il(this,$s,e,"f"),il(this,al,[],"f")}get currentChatCompletionSnapshot(){return st(this,Gi,"f")}static fromReadableStream(e){const t=new Bc(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const a=new Bc(t);return a._run(()=>a._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,t,r){var c;super._createChatCompletion;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),st(this,$t,"m",oy).call(this);const l=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const d of l)st(this,$t,"m",ly).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new _r;return this._addChatCompletion(st(this,$t,"m",Ff).call(this))}async _fromReadableStream(e,t){var c;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),st(this,$t,"m",oy).call(this),this._connected();const a=ls.fromReadableStream(e,this.controller);let l;for await(const d of a)l&&l!==d.id&&this._addChatCompletion(st(this,$t,"m",Ff).call(this)),st(this,$t,"m",ly).call(this,d),l=d.id;if((c=a.controller.signal)!=null&&c.aborted)throw new _r;return this._addChatCompletion(st(this,$t,"m",Ff).call(this))}[($s=new WeakMap,al=new WeakMap,Gi=new WeakMap,$t=new WeakSet,oy=function(){this.ended||il(this,Gi,void 0,"f")},jf=function(t){let r=st(this,al,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},st(this,al,"f")[t.index]=r,r)},ly=function(t){var a,l,c,d,m,g,_,w,T,R,O,L,P,$,B;if(this.ended)return;const r=st(this,$t,"m",M1).call(this,t);this._emit("chunk",t,r);for(const G of t.choices){const X=r.choices[G.index];G.delta.content!=null&&((a=X.message)==null?void 0:a.role)==="assistant"&&((l=X.message)!=null&&l.content)&&(this._emit("content",G.delta.content,X.message.content),this._emit("content.delta",{delta:G.delta.content,snapshot:X.message.content,parsed:X.message.parsed})),G.delta.refusal!=null&&((c=X.message)==null?void 0:c.role)==="assistant"&&((d=X.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:G.delta.refusal,snapshot:X.message.refusal}),((m=G.logprobs)==null?void 0:m.content)!=null&&((g=X.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(_=G.logprobs)==null?void 0:_.content,snapshot:((w=X.logprobs)==null?void 0:w.content)??[]}),((T=G.logprobs)==null?void 0:T.refusal)!=null&&((R=X.message)==null?void 0:R.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(O=G.logprobs)==null?void 0:O.refusal,snapshot:((L=X.logprobs)==null?void 0:L.refusal)??[]});const Y=st(this,$t,"m",jf).call(this,X);X.finish_reason&&(st(this,$t,"m",cy).call(this,X),Y.current_tool_call_index!=null&&st(this,$t,"m",uy).call(this,X,Y.current_tool_call_index));for(const te of G.delta.tool_calls??[])Y.current_tool_call_index!==te.index&&(st(this,$t,"m",cy).call(this,X),Y.current_tool_call_index!=null&&st(this,$t,"m",uy).call(this,X,Y.current_tool_call_index)),Y.current_tool_call_index=te.index;for(const te of G.delta.tool_calls??[]){const M=(P=X.message.tool_calls)==null?void 0:P[te.index];M!=null&&M.type&&((M==null?void 0:M.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:($=M.function)==null?void 0:$.name,index:te.index,arguments:M.function.arguments,parsed_arguments:M.function.parsed_arguments,arguments_delta:((B=te.function)==null?void 0:B.arguments)??""}):(M==null||M.type,void 0))}}},uy=function(t,r){var c,d,m;if(st(this,$t,"m",jf).call(this,t).done_tool_calls.has(r))return;const l=(c=t.message.tool_calls)==null?void 0:c[r];if(!l)throw new Error("no tool call snapshot");if(!l.type)throw new Error("tool call snapshot missing `type`");if(l.type==="function"){const g=(m=(d=st(this,$s,"f"))==null?void 0:d.tools)==null?void 0:m.find(_=>_.type==="function"&&_.function.name===l.function.name);this._emit("tool_calls.function.arguments.done",{name:l.function.name,index:r,arguments:l.function.arguments,parsed_arguments:nh(g)?g.$parseRaw(l.function.arguments):g!=null&&g.function.strict?JSON.parse(l.function.arguments):null})}else l.type},cy=function(t){var a,l;const r=st(this,$t,"m",jf).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const c=st(this,$t,"m",hy).call(this);this._emit("content.done",{content:t.message.content,parsed:c?c.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(a=t.logprobs)!=null&&a.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(l=t.logprobs)!=null&&l.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Ff=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");const t=st(this,Gi,"f");if(!t)throw new Ae("request ended without sending any chunks");return il(this,Gi,void 0,"f"),il(this,al,[],"f"),UV(t,st(this,$s,"f"))},hy=function(){var r;const t=(r=st(this,$s,"f"))==null?void 0:r.response_format;return kv(t)?t:null},M1=function(t){var r,a,l,c;let d=st(this,Gi,"f");const{choices:m,...g}=t;d?Object.assign(d,g):d=il(this,Gi,{...g,choices:[]},"f");for(const{delta:_,finish_reason:w,index:T,logprobs:R=null,...O}of t.choices){let L=d.choices[T];if(L||(L=d.choices[T]={finish_reason:w,index:T,message:{},logprobs:R,...O}),R)if(!L.logprobs)L.logprobs=Object.assign({},R);else{const{content:te,refusal:M,...x}=R;Object.assign(L.logprobs,x),te&&((r=L.logprobs).content??(r.content=[]),L.logprobs.content.push(...te)),M&&((a=L.logprobs).refusal??(a.refusal=[]),L.logprobs.refusal.push(...M))}if(w&&(L.finish_reason=w,st(this,$s,"f")&&hC(st(this,$s,"f")))){if(w==="length")throw new G2;if(w==="content_filter")throw new K2}if(Object.assign(L,O),!_)continue;const{content:P,refusal:$,function_call:B,role:G,tool_calls:X,...Y}=_;if(Object.assign(L.message,Y),$&&(L.message.refusal=(L.message.refusal||"")+$),G&&(L.message.role=G),B&&(L.message.function_call?(B.name&&(L.message.function_call.name=B.name),B.arguments&&((l=L.message.function_call).arguments??(l.arguments=""),L.message.function_call.arguments+=B.arguments)):L.message.function_call=B),P&&(L.message.content=(L.message.content||"")+P,!L.message.refusal&&st(this,$t,"m",hy).call(this)&&(L.message.parsed=D1(L.message.content))),X){L.message.tool_calls||(L.message.tool_calls=[]);for(const{index:te,id:M,type:x,function:C,...D}of X){const V=(c=L.message.tool_calls)[te]??(c[te]={});Object.assign(V,D),M&&(V.id=M),x&&(V.type=x),C&&(V.function??(V.function={name:C.name??"",arguments:""})),C!=null&&C.name&&(V.function.name=C.name),C!=null&&C.arguments&&(V.function.arguments+=C.arguments,OV(st(this,$s,"f"),V)&&(V.function.parsed_arguments=D1(V.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",a=>{const l=t.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),this.on("error",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,c)=>t.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ls(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function UV(n,e){const{id:t,choices:r,created:a,model:l,system_fingerprint:c,...d}=n,m={...d,id:t,choices:r.map(({message:g,finish_reason:_,index:w,logprobs:T,...R})=>{if(!_)throw new Ae(`missing finish_reason for choice ${w}`);const{content:O=null,function_call:L,tool_calls:P,...$}=g,B=g.role;if(!B)throw new Ae(`missing role for choice ${w}`);if(L){const{arguments:G,name:X}=L;if(G==null)throw new Ae(`missing function_call.arguments for choice ${w}`);if(!X)throw new Ae(`missing function_call.name for choice ${w}`);return{...R,message:{content:O,function_call:{arguments:G,name:X},role:B,refusal:g.refusal??null},finish_reason:_,index:w,logprobs:T}}return P?{...R,index:w,finish_reason:_,logprobs:T,message:{...$,role:B,content:O,refusal:g.refusal??null,tool_calls:P.map((G,X)=>{const{function:Y,type:te,id:M,...x}=G,{arguments:C,name:D,...V}=Y||{};if(M==null)throw new Ae(`missing choices[${w}].tool_calls[${X}].id
${Bf(n)}`);if(te==null)throw new Ae(`missing choices[${w}].tool_calls[${X}].type
${Bf(n)}`);if(D==null)throw new Ae(`missing choices[${w}].tool_calls[${X}].function.name
${Bf(n)}`);if(C==null)throw new Ae(`missing choices[${w}].tool_calls[${X}].function.arguments
${Bf(n)}`);return{...x,id:M,type:te,function:{...V,name:D,arguments:C}}})}}:{...R,message:{...$,content:O,role:B,refusal:g.refusal??null},finish_reason:_,index:w,logprobs:T}}),created:a,model:l,object:"chat.completion",...c?{system_fingerprint:c}:{}};return IV(m,e)}function Bf(n){return JSON.stringify(n)}class Rl extends Bc{static fromReadableStream(e){const t=new Rl(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const a=new Rl(null),l={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,t,l)),a}static runTools(e,t,r){const a=new Rl(t),l={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,t,l)),a}}let CC=class extends ke{parse(e,t){return DV(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Pv(r,e))}runFunctions(e,t){return e.stream?Rl.runFunctions(this._client,e,t):Fc.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Rl.runTools(this._client,e,t):Fc.runTools(this._client,e,t)}stream(e,t){return Bc.createChatCompletion(this._client,e,t)}};class l_ extends ke{constructor(){super(...arguments),this.completions=new CC(this._client)}}(function(n){n.Completions=CC})(l_||(l_={}));class IC extends ke{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class xC extends ke{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Im extends ke{constructor(){super(...arguments),this.sessions=new IC(this._client),this.transcriptionSessions=new xC(this._client)}}Im.Sessions=IC;Im.TranscriptionSessions=xC;var _e=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Wn=function(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t},cn,u_,os,od,Nr,ro,vl,Ya,Fd,Yn,ld,ud,Ic,_c,vc,k1,P1,V1,L1,U1,j1,F1;class Mr extends Mv{constructor(){super(...arguments),cn.add(this),u_.set(this,[]),os.set(this,{}),od.set(this,{}),Nr.set(this,void 0),ro.set(this,void 0),vl.set(this,void 0),Ya.set(this,void 0),Fd.set(this,void 0),Yn.set(this,void 0),ld.set(this,void 0),ud.set(this,void 0),Ic.set(this,void 0)}[(u_=new WeakMap,os=new WeakMap,od=new WeakMap,Nr=new WeakMap,ro=new WeakMap,vl=new WeakMap,Ya=new WeakMap,Fd=new WeakMap,Yn=new WeakMap,ld=new WeakMap,ud=new WeakMap,Ic=new WeakMap,cn=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",a=>{const l=t.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),this.on("error",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,c)=>t.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Mr;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var l;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=ls.fromReadableStream(e,this.controller);for await(const c of a)_e(this,cn,"m",_c).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new _r;return this._addRun(_e(this,cn,"m",vc).call(this))}toReadableStream(){return new ls(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,a,l){const c=new Mr;return c._run(()=>c._runToolAssistantStream(e,t,r,a,{...l,headers:{...l==null?void 0:l.headers,"X-Stainless-Helper-Method":"stream"}})),c}async _createToolAssistantStream(e,t,r,a,l){var g;const c=l==null?void 0:l.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const d={...a,stream:!0},m=await e.submitToolOutputs(t,r,d,{...l,signal:this.controller.signal});this._connected();for await(const _ of m)_e(this,cn,"m",_c).call(this,_);if((g=m.controller.signal)!=null&&g.aborted)throw new _r;return this._addRun(_e(this,cn,"m",vc).call(this))}static createThreadAssistantStream(e,t,r){const a=new Mr;return a._run(()=>a._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,t,r,a){const l=new Mr;return l._run(()=>l._runAssistantStream(e,t,r,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),l}currentEvent(){return _e(this,ld,"f")}currentRun(){return _e(this,ud,"f")}currentMessageSnapshot(){return _e(this,Nr,"f")}currentRunStepSnapshot(){return _e(this,Ic,"f")}async finalRunSteps(){return await this.done(),Object.values(_e(this,os,"f"))}async finalMessages(){return await this.done(),Object.values(_e(this,od,"f"))}async finalRun(){if(await this.done(),!_e(this,ro,"f"))throw Error("Final run was not received.");return _e(this,ro,"f")}async _createThreadAssistantStream(e,t,r){var d;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...t,stream:!0},c=await e.createAndRun(l,{...r,signal:this.controller.signal});this._connected();for await(const m of c)_e(this,cn,"m",_c).call(this,m);if((d=c.controller.signal)!=null&&d.aborted)throw new _r;return this._addRun(_e(this,cn,"m",vc).call(this))}async _createAssistantStream(e,t,r,a){var m;const l=a==null?void 0:a.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},d=await e.create(t,c,{...a,signal:this.controller.signal});this._connected();for await(const g of d)_e(this,cn,"m",_c).call(this,g);if((m=d.controller.signal)!=null&&m.aborted)throw new _r;return this._addRun(_e(this,cn,"m",vc).call(this))}static accumulateDelta(e,t){for(const[r,a]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=a;continue}let l=e[r];if(l==null){e[r]=a;continue}if(r==="index"||r==="type"){e[r]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(ay(l)&&ay(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(c=>typeof c=="string"||typeof c=="number")){l.push(...a);continue}for(const c of a){if(!ay(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const m=l[d];m==null?l.push(c):l[d]=this.accumulateDelta(m,c)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${a}, accValue: ${l}`);e[r]=l}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,a){return await this._createAssistantStream(t,e,r,a)}async _runToolAssistantStream(e,t,r,a,l){return await this._createToolAssistantStream(r,e,t,a,l)}}_c=function(e){if(!this.ended)switch(Wn(this,ld,e,"f"),_e(this,cn,"m",V1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":_e(this,cn,"m",F1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":_e(this,cn,"m",P1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":_e(this,cn,"m",k1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},vc=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");if(!_e(this,ro,"f"))throw Error("Final run has not been received");return _e(this,ro,"f")},k1=function(e){const[t,r]=_e(this,cn,"m",U1).call(this,e,_e(this,Nr,"f"));Wn(this,Nr,t,"f"),_e(this,od,"f")[t.id]=t;for(const a of r){const l=t.content[a.index];(l==null?void 0:l.type)=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,c=t.content[a.index];if(c&&c.type=="text")this._emit("textDelta",l,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=_e(this,vl,"f")){if(_e(this,Ya,"f"))switch(_e(this,Ya,"f").type){case"text":this._emit("textDone",_e(this,Ya,"f").text,_e(this,Nr,"f"));break;case"image_file":this._emit("imageFileDone",_e(this,Ya,"f").image_file,_e(this,Nr,"f"));break}Wn(this,vl,a.index,"f")}Wn(this,Ya,t.content[a.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(_e(this,vl,"f")!==void 0){const a=e.data.content[_e(this,vl,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,_e(this,Nr,"f"));break;case"text":this._emit("textDone",a.text,_e(this,Nr,"f"));break}}_e(this,Nr,"f")&&this._emit("messageDone",e.data),Wn(this,Nr,void 0,"f")}},P1=function(e){const t=_e(this,cn,"m",L1).call(this,e);switch(Wn(this,Ic,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const l of r.step_details.tool_calls)l.index==_e(this,Fd,"f")?this._emit("toolCallDelta",l,t.step_details.tool_calls[l.index]):(_e(this,Yn,"f")&&this._emit("toolCallDone",_e(this,Yn,"f")),Wn(this,Fd,l.index,"f"),Wn(this,Yn,t.step_details.tool_calls[l.index],"f"),_e(this,Yn,"f")&&this._emit("toolCallCreated",_e(this,Yn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Wn(this,Ic,void 0,"f"),e.data.step_details.type=="tool_calls"&&_e(this,Yn,"f")&&(this._emit("toolCallDone",_e(this,Yn,"f")),Wn(this,Yn,void 0,"f")),this._emit("runStepDone",e.data,t);break}},V1=function(e){_e(this,u_,"f").push(e),this._emit("event",e)},L1=function(e){switch(e.event){case"thread.run.step.created":return _e(this,os,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=_e(this,os,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const a=Mr.accumulateDelta(t,r.delta);_e(this,os,"f")[e.data.id]=a}return _e(this,os,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":_e(this,os,"f")[e.data.id]=e.data;break}if(_e(this,os,"f")[e.data.id])return _e(this,os,"f")[e.data.id];throw new Error("No snapshot available")},U1=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in t.content){let c=t.content[l.index];t.content[l.index]=_e(this,cn,"m",j1).call(this,l,c)}else t.content[l.index]=l,r.push(l);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},j1=function(e,t){return Mr.accumulateDelta(t,e)},F1=function(e){switch(Wn(this,ud,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Wn(this,ro,e.data,"f"),_e(this,Yn,"f")&&(this._emit("toolCallDone",_e(this,Yn,"f")),Wn(this,Yn,void 0,"f"));break}};class Vv extends ke{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,a){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Lv,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Lv extends pn{}Vv.MessagesPage=Lv;class Uv extends ke{retrieve(e,t,r,a={},l){return At(a)?this.retrieve(e,t,r,{},a):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:a,...l,headers:{"OpenAI-Beta":"assistants=v2",...l==null?void 0:l.headers}})}list(e,t,r={},a){return At(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,jv,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}}class jv extends pn{}Uv.RunStepsPage=jv;let rh=class extends ke{constructor(){super(...arguments),this.steps=new Uv(this._client)}create(e,t,r){const{include:a,...l}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:a},body:l,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,a){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Fv,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const a=await this.create(e,t,r);return await this.poll(e,a.id,r)}createAndStream(e,t,r){return Mr.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const a={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:c}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...a}}).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const m=c.headers.get("openai-poll-after-ms");if(m){const g=parseInt(m);isNaN(g)||(d=g)}}await eh(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}}stream(e,t,r){return Mr.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,a){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,a){const l=await this.submitToolOutputs(e,t,r,a);return await this.poll(e,l.id,a)}submitToolOutputsStream(e,t,r,a){return Mr.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,a)}};class Fv extends pn{}rh.RunsPage=Fv;rh.Steps=Uv;rh.RunStepsPage=jv;class Yl extends ke{constructor(){super(...arguments),this.runs=new rh(this._client),this.messages=new Vv(this._client)}create(e={},t){return At(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return Mr.createThreadAssistantStream(e,this._client.beta.threads,t)}}Yl.Runs=rh;Yl.RunsPage=Fv;Yl.Messages=Vv;Yl.MessagesPage=Lv;class Jl extends ke{constructor(){super(...arguments),this.realtime=new Im(this._client),this.chat=new l_(this._client),this.assistants=new Ov(this._client),this.threads=new Yl(this._client)}}Jl.Realtime=Im;Jl.Assistants=Ov;Jl.AssistantsPage=Dv;Jl.Threads=Yl;class NC extends ke{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class OC extends ke{create(e,t){const r=!!e.encoding_format;let a=r?e.encoding_format:"base64";r&&sa("Request","User defined encoding_format:",e.encoding_format);const l=this._client.post("/embeddings",{body:{...e,encoding_format:a},...t});return r?l:(sa("response","Decoding base64 embeddings to float32 array"),l._thenUnwrap(c=>(c&&c.data&&c.data.forEach(d=>{const m=d.embedding;d.embedding=RV(m)}),c)))}}class Bv extends ke{retrieve(e,t,r,a){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,a)}list(e,t,r={},a){return At(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,zv,{query:r,...a})}}class zv extends pn{}Bv.OutputItemListResponsesPage=zv;class sh extends ke{constructor(){super(...arguments),this.outputItems=new Bv(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Hv,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class Hv extends pn{}sh.RunListResponsesPage=Hv;sh.OutputItems=Bv;sh.OutputItemListResponsesPage=zv;class ih extends ke{constructor(){super(...arguments),this.runs=new sh(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/evals",$v,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class $v extends pn{}ih.EvalListResponsesPage=$v;ih.Runs=sh;ih.RunListResponsesPage=Hv;let qv=class extends ke{create(e,t){return this._client.post("/files",Vl({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/files",Gv,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),l=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await eh(t),c=await this.retrieve(e),Date.now()-l>r)throw new Iv({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return c}};class Gv extends pn{}qv.FileObjectsPage=Gv;class Kv extends ke{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Qv,{body:t,method:"post",...r})}retrieve(e,t={},r){return At(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions`,t)}}class Qv extends Am{}Kv.PermissionCreateResponsesPage=Qv;let xm=class extends ke{constructor(){super(...arguments),this.permissions=new Kv(this._client)}};xm.Permissions=Kv;xm.PermissionCreateResponsesPage=Qv;class Wv extends ke{list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Xv,{query:t,...r})}}class Xv extends pn{}Wv.FineTuningJobCheckpointsPage=Xv;class Zl extends ke{constructor(){super(...arguments),this.checkpoints=new Wv(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Yv,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return At(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Jv,{query:t,...r})}}class Yv extends pn{}class Jv extends pn{}Zl.FineTuningJobsPage=Yv;Zl.FineTuningJobEventsPage=Jv;Zl.Checkpoints=Wv;Zl.FineTuningJobCheckpointsPage=Xv;class eu extends ke{constructor(){super(...arguments),this.jobs=new Zl(this._client),this.checkpoints=new xm(this._client)}}eu.Jobs=Zl;eu.FineTuningJobsPage=Yv;eu.FineTuningJobEventsPage=Jv;eu.Checkpoints=xm;class DC extends ke{createVariation(e,t){return this._client.post("/images/variations",Vl({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Vl({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Zv extends ke{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",e0,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class e0 extends Am{}Zv.ModelsPage=e0;class MC extends ke{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function jV(n,e){return!e||!BV(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:kC(n,e)}function kC(n,e){const t=n.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:$V(e,a)};if(a.type==="message"){const l=a.content.map(c=>c.type==="output_text"?{...c,parsed:FV(e,c.text)}:c);return{...a,content:l}}return a}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||PC(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const a of r.output)if(a.type==="message"){for(const l of a.content)if(l.type==="output_text"&&l.parsed!==null)return l.parsed}return null}}),r}function FV(n,e){var t,r,a,l;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((a=n.text)==null?void 0:a.format)?((l=n.text)==null?void 0:l.format).$parseRaw(e):JSON.parse(e)}function BV(n){var e;return!!kv((e=n.text)==null?void 0:e.format)}function zV(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function HV(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function $V(n,e){const t=HV(n.tools??[],e.name);return{...e,...e,parsed_arguments:zV(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function PC(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class VC extends ke{list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,GV,{query:t,...r})}}var ol=function(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t},Ki=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ll,zf,Qi,Hf,B1,z1,H1,$1;class t0 extends Mv{constructor(e){super(),ll.add(this),zf.set(this,void 0),Qi.set(this,void 0),Hf.set(this,void 0),ol(this,zf,e,"f")}static createResponse(e,t,r){const a=new t0(t);return a._run(()=>a._createResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createResponse(e,t,r){var c;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),Ki(this,ll,"m",B1).call(this);const l=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const d of l)Ki(this,ll,"m",z1).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new _r;return Ki(this,ll,"m",H1).call(this)}[(zf=new WeakMap,Qi=new WeakMap,Hf=new WeakMap,ll=new WeakSet,B1=function(){this.ended||ol(this,Qi,void 0,"f")},z1=function(t){if(this.ended)return;const r=Ki(this,ll,"m",$1).call(this,t);switch(this._emit("event",t),t.type){case"response.output_text.delta":{const a=r.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);if(a.type==="message"){const l=a.content[t.content_index];if(!l)throw new Ae(`missing content at index ${t.content_index}`);if(l.type!=="output_text")throw new Ae(`expected content to be 'output_text', got ${l.type}`);this._emit("response.output_text.delta",{...t,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const a=r.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);a.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...t,snapshot:a.arguments});break}default:this._emit(t.type,t);break}},H1=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");const t=Ki(this,Qi,"f");if(!t)throw new Ae("request ended without sending any events");ol(this,Qi,void 0,"f");const r=qV(t,Ki(this,zf,"f"));return ol(this,Hf,r,"f"),r},$1=function(t){let r=Ki(this,Qi,"f");if(!r){if(t.type!=="response.created")throw new Ae(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=ol(this,Qi,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const a=r.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);a.type==="message"&&a.content.push(t.part);break}case"response.output_text.delta":{const a=r.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);if(a.type==="message"){const l=a.content[t.content_index];if(!l)throw new Ae(`missing content at index ${t.content_index}`);if(l.type!=="output_text")throw new Ae(`expected content to be 'output_text', got ${l.type}`);l.text+=t.delta}break}case"response.function_call_arguments.delta":{const a=r.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);a.type==="function_call"&&(a.arguments+=t.delta);break}case"response.completed":{ol(this,Qi,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",a=>{const l=t.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),this.on("error",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,c)=>t.push({resolve:l,reject:c})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Ki(this,Hf,"f");if(!e)throw new Ae("stream ended without producing a ChatCompletion");return e}}function qV(n,e){return jV(n,e)}class n0 extends ke{constructor(){super(...arguments),this.inputItems=new VC(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&PC(r),r))}retrieve(e,t={},r){return At(t)?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...r})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>kC(r,e))}stream(e,t){return t0.createResponse(this._client,e,t)}}class GV extends pn{}n0.InputItems=VC;class LC extends ke{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,Vl({body:t,...r}))}}class r0 extends ke{constructor(){super(...arguments),this.parts=new LC(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}r0.Parts=LC;const KV=async n=>{const e=await Promise.allSettled(n),t=e.filter(a=>a.status==="rejected");if(t.length){for(const a of t)console.error(a.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const a of e)a.status==="fulfilled"&&r.push(a.value);return r};class Nm extends ke{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,a){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t={},r){return At(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Om,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const a=await this.create(e,t,r);return await this.poll(e,a.id,r)}async poll(e,t,r){const a={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const l=await this.retrieve(e,t,{...r,headers:a}).withResponse(),c=l.data;switch(c.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const m=l.response.headers.get("openai-poll-after-ms");if(m){const g=parseInt(m);isNaN(g)||(d=g)}}await eh(d);break;case"failed":case"completed":return c}}}async upload(e,t,r){const a=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:a.id},r)}async uploadAndPoll(e,t,r){const a=await this.upload(e,t,r);return await this.poll(e,a.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,s0,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Om extends pn{}class s0 extends Am{}Nm.VectorStoreFilesPage=Om;Nm.FileContentResponsesPage=s0;class UC extends ke{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const a=await this.create(e,t);return await this.poll(e,a.id,r)}listFiles(e,t,r={},a){return At(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Om,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}async poll(e,t,r){const a={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:c}=await this.retrieve(e,t,{...r,headers:a}).withResponse();switch(l.status){case"in_progress":let d=5e3;if(r!=null&&r.pollIntervalMs)d=r.pollIntervalMs;else{const m=c.headers.get("openai-poll-after-ms");if(m){const g=parseInt(m);isNaN(g)||(d=g)}}await eh(d);break;case"failed":case"cancelled":case"completed":return l}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},a){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const l=(a==null?void 0:a.maxConcurrency)??5,c=Math.min(l,t.length),d=this._client,m=t.values(),g=[...r];async function _(T){for(let R of T){const O=await d.files.create({file:R,purpose:"assistants"},a);g.push(O.id)}}const w=Array(c).fill(m).map(_);return await KV(w),await this.createAndPoll(e,{file_ids:g})}}class ga extends ke{constructor(){super(...arguments),this.files=new Nm(this._client),this.fileBatches=new UC(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return At(e)?this.list({},e):this._client.getAPIList("/vector_stores",i0,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,a0,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class i0 extends pn{}class a0 extends Am{}ga.VectorStoresPage=i0;ga.VectorStoreSearchResponsesPage=a0;ga.Files=Nm;ga.VectorStoreFilesPage=Om;ga.FileContentResponsesPage=s0;ga.FileBatches=UC;var jC;class Me extends mV{constructor({baseURL:e=Lf("OPENAI_BASE_URL"),apiKey:t=Lf("OPENAI_API_KEY"),organization:r=Lf("OPENAI_ORG_ID")??null,project:a=Lf("OPENAI_PROJECT_ID")??null,...l}={}){if(t===void 0)throw new Ae("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const c={apiKey:t,organization:r,project:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&AV())throw new Ae(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:c.baseURL,timeout:c.timeout??6e5,httpAgent:c.httpAgent,maxRetries:c.maxRetries,fetch:c.fetch}),this.completions=new NC(this),this.chat=new Cm(this),this.embeddings=new OC(this),this.files=new qv(this),this.images=new DC(this),this.audio=new th(this),this.moderations=new MC(this),this.models=new Zv(this),this.fineTuning=new eu(this),this.vectorStores=new ga(this),this.beta=new Jl(this),this.batches=new xv(this),this.uploads=new r0(this),this.responses=new n0(this),this.evals=new ih(this),this._options=c,this.apiKey=t,this.organization=r,this.project=a}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return X8(e,{arrayFormat:"brackets"})}}jC=Me;Me.OpenAI=jC;Me.DEFAULT_TIMEOUT=6e5;Me.OpenAIError=Ae;Me.APIError=mn;Me.APIConnectionError=Em;Me.APIConnectionTimeoutError=Iv;Me.APIUserAbortError=_r;Me.NotFoundError=B2;Me.ConflictError=z2;Me.RateLimitError=$2;Me.BadRequestError=U2;Me.AuthenticationError=j2;Me.InternalServerError=q2;Me.PermissionDeniedError=F2;Me.UnprocessableEntityError=H2;Me.toFile=Y2;Me.fileFromPath=P2;Me.Completions=NC;Me.Chat=Cm;Me.ChatCompletionsPage=Rm;Me.Embeddings=OC;Me.Files=qv;Me.FileObjectsPage=Gv;Me.Images=DC;Me.Audio=th;Me.Moderations=MC;Me.Models=Zv;Me.ModelsPage=e0;Me.FineTuning=eu;Me.VectorStores=ga;Me.VectorStoresPage=i0;Me.VectorStoreSearchResponsesPage=a0;Me.Beta=Jl;Me.Batches=xv;Me.BatchesPage=Nv;Me.Uploads=r0;Me.Responses=n0;Me.Evals=ih;Me.EvalListResponsesPage=$v;const QV=({onMacrosChange:n})=>{const e=I.useRef(null),t=I.useRef(null),[r,a]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const m=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});e.current&&(e.current.srcObject=m)}catch(m){console.error("Camera error:",m),alert("Could not access camera.")}})()},[]);const l=()=>{const d=e.current,m=t.current;if(!d||!m)return;m.width=d.videoWidth,m.height=d.videoHeight;const g=m.getContext("2d");g==null||g.drawImage(d,0,0,m.width,m.height);const _=m.toDataURL("image/png");c(_)},c=async d=>{a(!0);try{const g=await new Me({apiKey:"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",dangerouslyAllowBrowser:!0}).responses.create({model:"gpt-4o",input:[{role:"user",content:[{type:"input_text",text:"analyze the image and return the macronutrients"},{type:"input_image",image_url:d,detail:"high"}]}],text:{format:{type:"json_schema",name:"macronutrients",description:"Extract macronutrients from the image.",schema:{type:"object",properties:{protein:{type:"number"},carbs:{type:"number"},fat:{type:"number"}},required:["protein","fat","carbs"],additionalProperties:!1}}}}),_=g;console.log("Analysis result:",g);const{protein:w,fat:T,carbs:R}=JSON.parse(_.output_text);n(T,w,R)}catch(m){console.error("Error analyzing photo:",m),alert("Failed to analyze the photo.")}finally{a(!1)}};return b.jsxs("div",{style:{textAlign:"center"},children:[b.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,style:{width:"100%",maxWidth:"400px",borderRadius:"8px"}}),b.jsx("button",{onClick:l,className:"btn btn-primary",style:{marginTop:"10px"},disabled:r,children:r?"Analyzing...":"📸 Upload a meal"}),b.jsx("canvas",{ref:t,style:{display:"none"}})]})};function WV({setFoodModalOpen:n,updateFoodMacros:e}){const[t,r]=I.useState(0),[a,l]=I.useState(0),[c,d]=I.useState(0),[m,g]=I.useState(0),_=(w,T,R)=>{r(w),l(T),d(R),g(w*9+T*4+R*4),console.log("Macros set:",w,T,R),console.log("Calories set:",w*9+T*4+R*4)};return b.jsx("div",{className:"modal show fade",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:b.jsx("div",{className:"modal-dialog",children:b.jsxs("div",{className:"modal-content",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h5",{className:"modal-title",children:"Log Food"}),b.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1)})]}),b.jsxs("div",{className:"modal-body",children:[b.jsx(QV,{onMacrosChange:_}),b.jsxs("form",{onSubmit:w=>w.preventDefault(),children:[b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"fat",className:"form-label",children:"Fat (g)"}),b.jsx("input",{type:"number",className:"form-control",id:"fat",placeholder:"Enter fat in grams",value:t===0?"":t,onChange:w=>r(w.target.value===""?0:Number(w.target.value))})]}),b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"protein",className:"form-label",children:"Protein (g)"}),b.jsx("input",{type:"number",className:"form-control",id:"protein",placeholder:"Enter protein in grams",value:a===0?"":a,onChange:w=>l(w.target.value===""?0:Number(w.target.value))})]}),b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"carbs",className:"form-label",children:"Carbohydrates (g)"}),b.jsx("input",{type:"number",className:"form-control",id:"carbs",placeholder:"Enter carbs in grams",value:c===0?"":c,onChange:w=>d(w.target.value===""?0:Number(w.target.value))})]}),b.jsxs("div",{className:"mb-3 d-flex align-items-end gap-2",children:[b.jsxs("div",{className:"flex-grow-1",children:[b.jsx("label",{htmlFor:"calories",className:"form-label",children:"Calories"}),b.jsx("input",{type:"number",className:"form-control",id:"calories",placeholder:"Enter Calories",value:m===0?"":m,onChange:w=>g(w.target.value===""?0:Number(w.target.value))})]}),b.jsx("button",{type:"button",className:"btn btn-info text-white",onClick:()=>g(t*9+a*4+c*4),children:"Auto-Calc"})]})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"btn btn-danger",onClick:()=>n(!1),children:"Cancel"}),b.jsx("button",{className:"btn btn-success",onClick:()=>{e(m,t,a,c),n(!1)},children:"Log Food"})]})]})})})}const XV=async(n,e,t)=>{try{const r=Kl(Nt,"goals"),a=sn(r),l={id:a.id,userId:n,groupId:e,type:"food",macro:t.macro,currentAmount:t.curAmount,targetAmount:t.goalAmount,createdAt:_t.fromDate(new Date),updatedAt:ha()};return await uo(a,l),a.id}catch(r){throw console.error("Error creating food goal:",r),r}},YV=async(n,e,t)=>{try{const r=Kl(Nt,"goals"),a=sn(r),l={id:a.id,userId:n,groupId:e,type:"fitness",activity:t.activity,currentAmount:t.curAmount,targetAmount:t.goalAmount,createdAt:_t.fromDate(new Date),updatedAt:ha()};return await uo(a,l),a.id}catch(r){throw console.error("Error creating fitness goal:",r),r}},JV=async(n,e)=>{try{const t=vv(Kl(Nt,"goals"),Od("userId","==",n),Od("groupId","==",e)),r=await wv(t),a=[],l=[];return r.docs.forEach(c=>{const d=c.data();d.type==="food"?a.push({id:c.id,macro:d.macro,curAmount:d.currentAmount,goalAmount:d.targetAmount}):l.push({id:c.id,activity:d.activity,curAmount:d.currentAmount,goalAmount:d.targetAmount})}),{foodGoals:a,fitnessGoals:l}}catch(t){throw console.error("Error getting user goals:",t),t}},q1=async(n,e)=>{try{const t=sn(Nt,"goals",n);await jc(t,{currentAmount:e,updatedAt:ha()})}catch(t){throw console.error("Error updating goal progress:",t),t}},G1=async n=>{try{await R6(sn(Nt,"goals",n))}catch(e){throw console.error("Error deleting goal:",e),e}},FC=I.createContext(void 0);function ZV({children:n}){const{currentUser:e}=oi(),[t,r]=I.useState(null),[a,l]=I.useState([]),c=async()=>{if(e)try{const d=await vm(e.uid);l(d),!t&&d.length>0&&r(d[0])}catch(d){console.error("Error fetching groups:",d)}};return I.useEffect(()=>{c()},[e]),b.jsx(FC.Provider,{value:{currentGroup:t,setCurrentGroup:r,userGroups:a,refreshGroups:c},children:n})}function eL(){const n=I.useContext(FC);if(n===void 0)throw new Error("useGroup must be used within a GroupProvider");return n}function tL({setGoalModalOpen:n,addFoodQuest:e,addFitnessQuest:t}){const{currentUser:r}=oi(),{currentGroup:a}=eL(),[l,c]=I.useState("Food"),[d,m]=I.useState(!1),[g,_]=I.useState(null),[w,T]=I.useState("Calories"),[R,O]=I.useState("Strength Workouts"),[L,P]=I.useState(0),$=async()=>{if(!r||!a){_("User or group not found");return}m(!0),_(null);try{if(l==="Food"){const B={macro:w,curAmount:0,goalAmount:L},G=await XV(r.uid,a.id,B);e({...B,id:G})}else{const B={activity:R,curAmount:0,goalAmount:L},G=await YV(r.uid,a.id,B);t({...B,id:G})}n(!1)}catch(B){_(B instanceof Error?B.message:"Failed to create goal")}finally{m(!1)}};return b.jsx("div",{className:"modal show fade",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:b.jsx("div",{className:"modal-dialog",children:b.jsxs("div",{className:"modal-content",children:[b.jsxs("div",{className:"modal-header",children:[b.jsx("h5",{className:"modal-title",children:"Add Goal"}),b.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1)})]}),b.jsxs("div",{className:"modal-body",children:[g&&b.jsx("div",{className:"alert alert-danger",role:"alert",children:g}),b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{className:"form-label",children:"Goal Type"}),b.jsxs("select",{className:"form-select",value:l,onChange:B=>c(B.target.value),children:[b.jsx("option",{value:"Food",children:"Nutrition"}),b.jsx("option",{value:"Fitness",children:"Fitness"})]})]}),l==="Food"?b.jsx("form",{onSubmit:B=>B.preventDefault(),children:b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"macro",className:"form-label",children:"Macro Type"}),b.jsxs("select",{className:"form-select",id:"macro",value:w,onChange:B=>T(B.target.value),children:[b.jsx("option",{value:"Calories",children:"Calories"}),b.jsx("option",{value:"Protein",children:"Protein"}),b.jsx("option",{value:"Fat",children:"Fat"}),b.jsx("option",{value:"Carbs",children:"Carbs"})]})]})}):b.jsx("form",{onSubmit:B=>B.preventDefault(),children:b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"fitness",className:"form-label",children:"Fitness Goal"}),b.jsxs("select",{className:"form-select",id:"fitness",value:R,onChange:B=>O(B.target.value),children:[b.jsx("option",{value:"Strength Workouts",children:"Strength Workouts"}),b.jsx("option",{value:"Cardio Workouts",children:"Cardio Workouts"}),b.jsx("option",{value:"Sleep",children:"Sleep"})]})]})}),b.jsxs("div",{className:"mb-3",children:[b.jsxs("label",{htmlFor:"amount",className:"form-label",children:["Goal Amount"," ",l==="Fitness"&&R==="Sleep"?"(hours)":"",l==="Food"&&w!="Calories"?"(g)":""]}),b.jsx("input",{type:"number",className:"form-control",id:"amount",placeholder:"Enter goal amount",value:L===0?"":L,onChange:B=>P(B.target.value===""?0:Number(B.target.value))})]})]}),b.jsxs("div",{className:"modal-footer",children:[b.jsx("button",{className:"btn btn-danger",onClick:()=>n(!1),disabled:d,children:"Cancel"}),b.jsx("button",{className:"btn btn-success",disabled:L<=0||d,onClick:$,children:d?"Adding...":"Add Goal"})]})]})})})}function nL({quest:n,onDelete:e}){const t=()=>n.macro=="Protein"?b.jsx(M8,{style:{color:"#e65100"}}):n.macro=="Fat"?b.jsx(IN,{style:{color:"#e65100"}}):n.macro=="Carbs"?b.jsx(SN,{style:{color:"#e65100"}}):b.jsx(L8,{style:{color:"#e65100"}}),r=async()=>{if(n.id)try{await e(n.id)}catch(a){console.error("Error deleting goal:",a)}};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[t(),"  ",b.jsxs("b",{children:[n.macro,": ",n.goalAmount," ",n.macro=="Calories"?"":"Grams"]})]}),b.jsxs("div",{className:"d-flex align-items-center",children:[b.jsxs("b",{children:[n.curAmount,"/",n.goalAmount]}),b.jsx("button",{className:"btn btn-xs btn-danger ms-2 d-flex align-items-center",style:{fontSize:"12px",height:"85%"},onClick:r,children:"Delete"})]})]}),b.jsx(T_,{bgColor:"#e65100",className:"mb-2",completed:n.curAmount/n.goalAmount*100,isLabelVisible:!1})]})}function rL(){const{currentUser:n,userData:e}=oi(),t=fo(),[r,a]=I.useState(null),[l,c]=I.useState(!0),[d,m]=I.useState(null),[g,_]=I.useState([]),[w,T]=I.useState([]),[R,O]=I.useState(!1),[L,P]=I.useState(!1),[$,B]=I.useState(!1),X=(()=>{const j=g.map(J=>J.goalAmount>0?J.curAmount/J.goalAmount*100:0),N=w.map(J=>J.goalAmount>0?J.curAmount/J.goalAmount*100:0),Ie=[...j,...N];if(Ie.length===0)return 0;const we=Ie.reduce((J,ue)=>J+ue,0);return Math.round(we/Ie.length)})();I.useEffect(()=>{if(!n)return;(async()=>{try{c(!0),m(null);const N=await vm(n.uid);if(N.length===0){c(!1);return}const Ie=localStorage.getItem("activeGroupId"),we=Ie?await x8(Ie):N[0];if(we){a(we),localStorage.setItem("activeGroupId",we.id);const{foodGoals:J,fitnessGoals:ue}=await JV(n.uid,we.id);_(J),T(ue)}}catch(N){console.error("Error fetching data:",N),m("Failed to load data. Please try again.")}finally{c(!1)}})()},[n]);const Y=()=>{t("/health-quest/group")},te=async(j,N,Ie,we)=>{_(J=>J.map(ue=>ue.macro==="Calories"?{...ue,curAmount:ue.curAmount+j}:ue.macro==="Fat"?{...ue,curAmount:ue.curAmount+N}:ue.macro==="Protein"?{...ue,curAmount:ue.curAmount+Ie}:ue.macro==="Carbs"?{...ue,curAmount:ue.curAmount+we}:ue));try{for(const J of g)if(J.id){let ue=0;J.macro==="Calories"?ue=j:J.macro==="Fat"?ue=N:J.macro==="Protein"?ue=Ie:J.macro==="Carbs"&&(ue=we),ue>0&&await q1(J.id,J.curAmount+ue)}}catch(J){console.error("Error updating food goals in database:",J)}},M=j=>{_(N=>[...N,j])},x=async j=>{try{await G1(j),_(N=>N.filter(Ie=>Ie.id!==j))}catch(N){console.error("Error deleting food goal:",N),m("Failed to delete goal. Please try again.")}},C=async(j,N,Ie)=>{T(we=>we.map(J=>J.activity==="Cardio Workouts"?{...J,curAmount:J.curAmount+j}:J.activity==="Strength Workouts"?{...J,curAmount:J.curAmount+N}:J.activity==="Sleep"?{...J,curAmount:J.curAmount+Ie}:J));try{for(const we of w)if(we.id){let J=0;we.activity==="Cardio Workouts"?J=j:we.activity==="Strength Workouts"?J=N:we.activity==="Sleep"&&(J=Ie),J>0&&await q1(we.id,we.curAmount+J)}}catch(we){console.error("Error updating fitness goals in database:",we)}},D=j=>{T(N=>[...N,j])},V=async j=>{try{await G1(j),T(N=>N.filter(Ie=>Ie.id!==j))}catch(N){console.error("Error deleting fitness goal:",N),m("Failed to delete goal. Please try again.")}};return l?b.jsx("div",{className:"container mt-4 d-flex flex-column align-items-center justify-content-center",style:{height:"100vh"},children:b.jsx("p",{className:"text-center",children:"Loading your health quest data..."})}):d?b.jsxs("div",{className:"container mt-4 d-flex flex-column align-items-center justify-content-center",style:{height:"100vh"},children:[b.jsx("div",{className:"alert alert-danger",role:"alert",children:d}),b.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Try Again"})]}):r?b.jsxs(b.Fragment,{children:[$&&b.jsx(tL,{setGoalModalOpen:B,addFoodQuest:M,addFitnessQuest:D}),R&&b.jsx(WV,{setFoodModalOpen:O,updateFoodMacros:te}),L&&b.jsx(F8,{setFitnessModalOpen:P,updateFitnessProgress:C}),b.jsxs("div",{className:"container mt-4 mb-5 pb-5",children:[b.jsx("div",{className:"card mb-4",children:b.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[b.jsx("h2",{className:"m-0",children:r.name}),b.jsx("img",{src:(e==null?void 0:e.avatarUrl)||"/health-quest/profile.png",alt:"Profile",className:"rounded-circle",width:35,height:35})]})}),b.jsxs("div",{className:"mb-2",children:[b.jsx("h4",{children:"Family Progress"}),b.jsx(T_,{bgColor:"#D85B6A",completed:X})]}),b.jsx("button",{onClick:()=>B(!0),className:"btn w-100 ms-1 mb-3",style:{backgroundColor:"#f0fcf4",color:"green"},children:"+ Add Goal"}),b.jsx("div",{children:b.jsxs("h4",{className:"d-flex align-items-center",style:{color:"#e65100"},children:[b.jsx(RN,{}),"   Nutrition"]})}),b.jsxs("div",{className:"card mb-2 p-2",children:[g.map((j,N)=>b.jsx(nL,{quest:j,onDelete:x},j.id||N)),b.jsx("button",{onClick:()=>O(!0),className:"btn me-1",style:{backgroundColor:"#fff6ed",color:"#e65100"},children:"+ Log Food"})]}),b.jsx("div",{children:b.jsxs("h4",{className:"d-flex align-items-center",style:{color:"#7b39ec"},children:[b.jsx(xN,{}),"  Fitness"]})}),b.jsxs("div",{className:"card mb-2 p-2",children:[w.map((j,N)=>b.jsx(j8,{quest:j,onDelete:V},j.id||N)),b.jsx("button",{onClick:()=>P(!0),className:"btn me-1",style:{backgroundColor:"#f0f4fc",color:"#3c82f6"},children:"+ Log Activity"})]})]})]}):b.jsxs("div",{className:"container mt-4 d-flex flex-column align-items-center justify-content-center",style:{height:"100vh"},children:[b.jsx("p",{className:"mb-3 text-center",style:{fontSize:"1.5rem"},children:"You are not in a group. Please join or create a group to see your tasks."}),b.jsx("button",{className:"btn btn-primary",onClick:Y,children:"Join a Group"})]})}function BC(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M328 112 184 256l144 144"},child:[]}]})(n)}function sL(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 400a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm128 256a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48zM128 272a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0-128a48 48 0 1 0 48 48 48 48 0 0 0-48-48z"},child:[]}]})(n)}function iL(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"80",height:"80",x:"336",y:"336",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"272",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"64",height:"64",x:"416",y:"416",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"432",y:"272",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"48",x:"272",y:"432",rx:"8",ry:"8"},child:[]},{tag:"path",attr:{d:"M448 32H304a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zM208 32H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8zm32 104H64a32 32 0 0 0-32 32v144a32 32 0 0 0 32 32h144a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32zm-32 136a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-64a8 8 0 0 1 8-8h64a8 8 0 0 1 8 8z"},child:[]}]})(n)}function zC(n){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"},child:[]}]})(n)}var fy={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var K1;function aL(){return K1||(K1=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var l="",c=0;c<arguments.length;c++){var d=arguments[c];d&&(l=a(l,r(d)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return t.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var c="";for(var d in l)e.call(l,d)&&l[d]&&(c=a(c,d));return c}function a(l,c){return c?l?l+" "+c:l+c:l}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(fy)),fy.exports}var oL=aL();const ct=Ll(oL),tu=!!(typeof window<"u"&&window.document&&window.document.createElement);var c_=!1,h_=!1;try{var dy={get passive(){return c_=!0},get once(){return h_=c_=!0}};tu&&(window.addEventListener("test",dy,dy),window.removeEventListener("test",dy,!0))}catch{}function HC(n,e,t,r){if(r&&typeof r!="boolean"&&!h_){var a=r.once,l=r.capture,c=t;!h_&&a&&(c=t.__once||function d(m){this.removeEventListener(e,d,l),t.call(this,m)},t.__once=c),n.addEventListener(e,c,c_?r:l)}n.addEventListener(e,t,r)}function Dm(n){return n&&n.ownerDocument||document}function f_(n,e,t,r){var a=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(e,t,a),t.__once&&n.removeEventListener(e,t.__once,a)}var $f;function Q1(n){if((!$f&&$f!==0||n)&&tu){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),$f=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return $f}function lL(){return I.useState(null)}function uL(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function d_(n){const e=uL(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const W1=n=>!n||typeof n=="function"?n:e=>{n.current=e};function cL(n,e){const t=W1(n),r=W1(e);return a=>{t&&t(a),r&&r(a)}}function $C(n,e){return I.useMemo(()=>cL(n,e),[n,e])}function hL(n){const e=I.useRef(n);return e.current=n,e}function fL(n){const e=hL(n);I.useEffect(()=>()=>e.current(),[])}function dL(n){var e=Dm(n);return e&&e.defaultView||window}function mL(n,e){return dL(n).getComputedStyle(n,e)}var pL=/([A-Z])/g;function gL(n){return n.replace(pL,"-$1").toLowerCase()}var yL=/^ms-/;function qf(n){return gL(n).replace(yL,"-ms-")}var _L=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function vL(n){return!!(n&&_L.test(n))}function io(n,e){var t="",r="";if(typeof e=="string")return n.style.getPropertyValue(qf(e))||mL(n).getPropertyValue(qf(e));Object.keys(e).forEach(function(a){var l=e[a];!l&&l!==0?n.style.removeProperty(qf(a)):vL(a)?r+=a+"("+l+") ":t+=qf(a)+": "+l+";"}),r&&(t+="transform: "+r+";"),n.style.cssText+=";"+t}function Bd(n,e,t,r){return HC(n,e,t,r),function(){f_(n,e,t,r)}}function EL(n,e,t,r){if(r===void 0&&(r=!0),n){var a=document.createEvent("HTMLEvents");a.initEvent(e,t,r),n.dispatchEvent(a)}}function wL(n){var e=io(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function bL(n,e,t){t===void 0&&(t=5);var r=!1,a=setTimeout(function(){r||EL(n,"transitionend",!0)},e+t),l=Bd(n,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(a),l()}}function qC(n,e,t,r){t==null&&(t=wL(n)||0);var a=bL(n,t,r),l=Bd(n,"transitionend",e);return function(){a(),l()}}function my(n){n===void 0&&(n=Dm());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function X1(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function TL(){const n=I.useRef(!0),e=I.useRef(()=>n.current);return I.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function AL(n){const e=I.useRef(n);return e.current=n,e}function SL(n){const e=AL(n);I.useEffect(()=>()=>e.current(),[])}function RL(n){const e=I.useRef(null);return I.useEffect(()=>{e.current=n}),e.current}function CL(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function Ja(n){const e=CL(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const IL="data-rr-ui-";function xL(n){return`${IL}${n}`}function NL(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const Y1=xL("modal-open");class o0{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:r=!1}={}){this.handleContainerOverflow=t,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return NL(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[r]:a.style[r]},e.scrollBarWidth&&(t[r]=`${parseInt(io(a,r)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(Y1,""),io(a,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Y1),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const GC=I.createContext(tu?window:void 0);GC.Provider;function l0(){return I.useContext(GC)}const py=(n,e)=>tu?n==null?(e||Dm()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function OL(n,e){const t=l0(),[r,a]=I.useState(()=>py(n,t==null?void 0:t.document));if(!r){const l=py(n);l&&a(l)}return I.useEffect(()=>{},[e,r]),I.useEffect(()=>{const l=py(n);l!==r&&a(l)},[n,r]),r}const J1=n=>!n||typeof n=="function"?n:e=>{n.current=e};function DL(n,e){const t=J1(n),r=J1(e);return a=>{t&&t(a),r&&r(a)}}function u0(n,e){return I.useMemo(()=>DL(n,e),[n,e])}const ML=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",kL=typeof document<"u",Z1=kL||ML?I.useLayoutEffect:I.useEffect;function PL(n){return n.code==="Escape"||n.keyCode===27}function VL(){const n=I.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function Mm(n){if(!n||typeof n=="function")return null;const{major:e}=VL();return e>=19?n.props.ref:n.ref}function LL({children:n,in:e,onExited:t,mountOnEnter:r,unmountOnExit:a}){const l=I.useRef(null),c=I.useRef(e),d=Ja(t);I.useEffect(()=>{e?c.current=!0:d(l.current)},[e,d]);const m=u0(l,Mm(n)),g=I.cloneElement(n,{ref:m});return e?g:a||!c.current&&r?null:g}const UL=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function jL(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function FL(n){let{onEnter:e,onEntering:t,onEntered:r,onExit:a,onExiting:l,onExited:c,addEndListener:d,children:m}=n,g=jL(n,UL);const _=I.useRef(null),w=u0(_,Mm(m)),T=X=>Y=>{X&&_.current&&X(_.current,Y)},R=I.useCallback(T(e),[e]),O=I.useCallback(T(t),[t]),L=I.useCallback(T(r),[r]),P=I.useCallback(T(a),[a]),$=I.useCallback(T(l),[l]),B=I.useCallback(T(c),[c]),G=I.useCallback(T(d),[d]);return Object.assign({},g,{nodeRef:_},e&&{onEnter:R},t&&{onEntering:O},r&&{onEntered:L},a&&{onExit:P},l&&{onExiting:$},c&&{onExited:B},d&&{addEndListener:G},{children:typeof m=="function"?(X,Y)=>m(X,Object.assign({},Y,{ref:w})):I.cloneElement(m,{ref:w})})}const BL=["component"];function zL(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}const HL=I.forwardRef((n,e)=>{let{component:t}=n,r=zL(n,BL);const a=FL(r);return b.jsx(t,Object.assign({ref:e},a))});function $L({in:n,onTransition:e}){const t=I.useRef(null),r=I.useRef(!0),a=Ja(e);return Z1(()=>{if(!t.current)return;let l=!1;return a({in:n,element:t.current,initial:r.current,isStale:()=>l}),()=>{l=!0}},[n,a]),Z1(()=>(r.current=!1,()=>{r.current=!0}),[]),t}function qL({children:n,in:e,onExited:t,onEntered:r,transition:a}){const[l,c]=I.useState(!e);e&&l&&c(!1);const d=$L({in:!!e,onTransition:g=>{const _=()=>{g.isStale()||(g.in?r==null||r(g.element,g.initial):(c(!0),t==null||t(g.element)))};Promise.resolve(a(g)).then(_,w=>{throw g.in||c(!0),w})}}),m=u0(d,Mm(n));return l&&!e?null:I.cloneElement(n,{ref:m})}function eA(n,e,t){return n?b.jsx(HL,Object.assign({},t,{component:n})):e?b.jsx(qL,Object.assign({},t,{transition:e})):b.jsx(LL,Object.assign({},t))}const GL=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function KL(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}let gy;function QL(n){return gy||(gy=new o0({ownerDocument:n==null?void 0:n.document})),gy}function WL(n){const e=l0(),t=n||QL(e),r=I.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>t.add(r.current),remove:()=>t.remove(r.current),isTopModal:()=>t.isTopModal(r.current),setDialogRef:I.useCallback(a=>{r.current.dialog=a},[]),setBackdropRef:I.useCallback(a=>{r.current.backdrop=a},[])})}const KC=I.forwardRef((n,e)=>{let{show:t=!1,role:r="dialog",className:a,style:l,children:c,backdrop:d=!0,keyboard:m=!0,onBackdropClick:g,onEscapeKeyDown:_,transition:w,runTransition:T,backdropTransition:R,runBackdropTransition:O,autoFocus:L=!0,enforceFocus:P=!0,restoreFocus:$=!0,restoreFocusOptions:B,renderDialog:G,renderBackdrop:X=je=>b.jsx("div",Object.assign({},je)),manager:Y,container:te,onShow:M,onHide:x=()=>{},onExit:C,onExited:D,onExiting:V,onEnter:j,onEntering:N,onEntered:Ie}=n,we=KL(n,GL);const J=l0(),ue=OL(te),he=WL(Y),Be=TL(),U=RL(t),[ie,fe]=I.useState(!t),ce=I.useRef(null);I.useImperativeHandle(e,()=>he,[he]),tu&&!U&&t&&(ce.current=my(J==null?void 0:J.document)),t&&ie&&fe(!1);const oe=Ja(()=>{if(he.add(),Ue.current=Bd(document,"keydown",Le),Ze.current=Bd(document,"focus",()=>setTimeout(Re),!0),M&&M(),L){var je,gn;const Dn=my((je=(gn=he.dialog)==null?void 0:gn.ownerDocument)!=null?je:J==null?void 0:J.document);he.dialog&&Dn&&!X1(he.dialog,Dn)&&(ce.current=Dn,he.dialog.focus())}}),be=Ja(()=>{if(he.remove(),Ue.current==null||Ue.current(),Ze.current==null||Ze.current(),$){var je;(je=ce.current)==null||je.focus==null||je.focus(B),ce.current=null}});I.useEffect(()=>{!t||!ue||oe()},[t,ue,oe]),I.useEffect(()=>{ie&&be()},[ie,be]),SL(()=>{be()});const Re=Ja(()=>{if(!P||!Be()||!he.isTopModal())return;const je=my(J==null?void 0:J.document);he.dialog&&je&&!X1(he.dialog,je)&&he.dialog.focus()}),it=Ja(je=>{je.target===je.currentTarget&&(g==null||g(je),d===!0&&x())}),Le=Ja(je=>{m&&PL(je)&&he.isTopModal()&&(_==null||_(je),je.defaultPrevented||x())}),Ze=I.useRef(),Ue=I.useRef(),dt=(...je)=>{fe(!0),D==null||D(...je)};if(!ue)return null;const Lt=Object.assign({role:r,ref:he.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},we,{style:l,className:a,tabIndex:-1});let Rt=G?G(Lt):b.jsx("div",Object.assign({},Lt,{children:I.cloneElement(c,{role:"document"})}));Rt=eA(w,T,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:C,onExiting:V,onExited:dt,onEnter:j,onEntering:N,onEntered:Ie,children:Rt});let Wt=null;return d&&(Wt=X({ref:he.setBackdropRef,onClick:it}),Wt=eA(R,O,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Wt})),b.jsx(b.Fragment,{children:_l.createPortal(b.jsxs(b.Fragment,{children:[Wt,Rt]}),ue)})});KC.displayName="Modal";const XL=Object.assign(KC,{Manager:o0});function YL(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function JL(n,e){n.classList?n.classList.add(e):YL(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}var ZL=Function.prototype.bind.call(Function.prototype.call,[].slice);function ul(n,e){return ZL(n.querySelectorAll(e))}function tA(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function e9(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=tA(n.className,e):n.setAttribute("class",tA(n.className&&n.className.baseVal||"",e))}const cl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class t9 extends o0{adjustAndStore(e,t,r){const a=t.style[e];t.dataset[e]=a,io(t,{[e]:`${parseFloat(io(t,e))+r}px`})}restore(e,t){const r=t.dataset[e];r!==void 0&&(delete t.dataset[e],io(t,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(JL(t,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";ul(t,cl.FIXED_CONTENT).forEach(l=>this.adjustAndStore(r,l,e.scrollBarWidth)),ul(t,cl.STICKY_CONTENT).forEach(l=>this.adjustAndStore(a,l,-e.scrollBarWidth)),ul(t,cl.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(a,l,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();e9(t,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";ul(t,cl.FIXED_CONTENT).forEach(l=>this.restore(r,l)),ul(t,cl.STICKY_CONTENT).forEach(l=>this.restore(a,l)),ul(t,cl.NAVBAR_TOGGLER).forEach(l=>this.restore(a,l))}}let yy;function n9(n){return yy||(yy=new t9(n)),yy}function r9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function m_(n,e){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},m_(n,e)}function s9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,m_(n,e)}var _y={exports:{}},vy,nA;function i9(){if(nA)return vy;nA=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return vy=n,vy}var Ey,rA;function a9(){if(rA)return Ey;rA=1;var n=i9();function e(){}function t(){}return t.resetWarningCache=e,Ey=function(){function r(c,d,m,g,_,w){if(w!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function a(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Ey}var sA;function o9(){return sA||(sA=1,_y.exports=a9()()),_y.exports}var l9=o9();const Js=Ll(l9),iA={disabled:!1},QC=Nn.createContext(null);var u9=function(e){return e.scrollTop},Ec="unmounted",Xa="exited",Wi="entering",Za="entered",p_="exiting",li=function(n){s9(e,n);function e(r,a){var l;l=n.call(this,r,a)||this;var c=a,d=c&&!c.isMounting?r.enter:r.appear,m;return l.appearStatus=null,r.in?d?(m=Xa,l.appearStatus=Wi):m=Za:r.unmountOnExit||r.mountOnEnter?m=Ec:m=Xa,l.state={status:m},l.nextCallback=null,l}e.getDerivedStateFromProps=function(a,l){var c=a.in;return c&&l.status===Ec?{status:Xa}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(a){var l=null;if(a!==this.props){var c=this.state.status;this.props.in?c!==Wi&&c!==Za&&(l=Wi):(c===Wi||c===Za)&&(l=p_)}this.updateStatus(!1,l)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var a=this.props.timeout,l,c,d;return l=c=d=a,a!=null&&typeof a!="number"&&(l=a.exit,c=a.enter,d=a.appear!==void 0?a.appear:c),{exit:l,enter:c,appear:d}},t.updateStatus=function(a,l){if(a===void 0&&(a=!1),l!==null)if(this.cancelNextCallback(),l===Wi){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:_l.findDOMNode(this);c&&u9(c)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Xa&&this.setState({status:Ec})},t.performEnter=function(a){var l=this,c=this.props.enter,d=this.context?this.context.isMounting:a,m=this.props.nodeRef?[d]:[_l.findDOMNode(this),d],g=m[0],_=m[1],w=this.getTimeouts(),T=d?w.appear:w.enter;if(!a&&!c||iA.disabled){this.safeSetState({status:Za},function(){l.props.onEntered(g)});return}this.props.onEnter(g,_),this.safeSetState({status:Wi},function(){l.props.onEntering(g,_),l.onTransitionEnd(T,function(){l.safeSetState({status:Za},function(){l.props.onEntered(g,_)})})})},t.performExit=function(){var a=this,l=this.props.exit,c=this.getTimeouts(),d=this.props.nodeRef?void 0:_l.findDOMNode(this);if(!l||iA.disabled){this.safeSetState({status:Xa},function(){a.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:p_},function(){a.props.onExiting(d),a.onTransitionEnd(c.exit,function(){a.safeSetState({status:Xa},function(){a.props.onExited(d)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(a,l){l=this.setNextCallback(l),this.setState(a,l)},t.setNextCallback=function(a){var l=this,c=!0;return this.nextCallback=function(d){c&&(c=!1,l.nextCallback=null,a(d))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},t.onTransitionEnd=function(a,l){this.setNextCallback(l);var c=this.props.nodeRef?this.props.nodeRef.current:_l.findDOMNode(this),d=a==null&&!this.props.addEndListener;if(!c||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],g=m[0],_=m[1];this.props.addEndListener(g,_)}a!=null&&setTimeout(this.nextCallback,a)},t.render=function(){var a=this.state.status;if(a===Ec)return null;var l=this.props,c=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var d=r9(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Nn.createElement(QC.Provider,{value:null},typeof c=="function"?c(a,d):Nn.cloneElement(Nn.Children.only(c),d))},e}(Nn.Component);li.contextType=QC;li.propTypes={};function hl(){}li.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:hl,onEntering:hl,onEntered:hl,onExit:hl,onExiting:hl,onExited:hl};li.UNMOUNTED=Ec;li.EXITED=Xa;li.ENTERING=Wi;li.ENTERED=Za;li.EXITING=p_;function aA(n,e){const t=io(n,e)||"",r=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*r}function c9(n,e){const t=aA(n,"transitionDuration"),r=aA(n,"transitionDelay"),a=qC(n,l=>{l.target===n&&(a(),e(l))},t+r)}function h9(n){n.offsetHeight}function f9(n){return n&&"setState"in n?_l.findDOMNode(n):n??null}const d9=Nn.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:r,onExiting:a,onExited:l,addEndListener:c,children:d,childRef:m,...g},_)=>{const w=I.useRef(null),T=$C(w,m),R=te=>{T(f9(te))},O=te=>M=>{te&&w.current&&te(w.current,M)},L=I.useCallback(O(n),[n]),P=I.useCallback(O(e),[e]),$=I.useCallback(O(t),[t]),B=I.useCallback(O(r),[r]),G=I.useCallback(O(a),[a]),X=I.useCallback(O(l),[l]),Y=I.useCallback(O(c),[c]);return b.jsx(li,{ref:_,...g,onEnter:L,onEntered:$,onEntering:P,onExit:B,onExited:X,onExiting:G,addEndListener:Y,nodeRef:w,children:typeof d=="function"?(te,M)=>d(te,{...M,ref:R}):Nn.cloneElement(d,{ref:R})})}),m9={[Wi]:"show",[Za]:"show"},c0=I.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:r,...a},l)=>{const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},d=I.useCallback((m,g)=>{h9(m),r==null||r(m,g)},[r]);return b.jsx(d9,{ref:l,addEndListener:c9,...c,onEnter:d,childRef:Mm(e),children:(m,g)=>I.cloneElement(e,{...g,className:ct("fade",n,e.props.className,m9[m],t[m])})})});c0.displayName="Fade";const p9=["xxl","xl","lg","md","sm","xs"],g9="xs",ah=I.createContext({prefixes:{},breakpoints:p9,minBreakpoint:g9}),{Consumer:hU,Provider:fU}=ah;function Qt(n,e){const{prefixes:t}=I.useContext(ah);return n||t[e]||e}function y9(){const{breakpoints:n}=I.useContext(ah);return n}function _9(){const{minBreakpoint:n}=I.useContext(ah);return n}function v9(){const{dir:n}=I.useContext(ah);return n==="rtl"}const WC=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},a)=>(e=Qt(e,"modal-body"),b.jsx(t,{ref:a,className:ct(n,e),...r})));WC.displayName="ModalBody";const XC=I.createContext({onHide(){}}),h0=I.forwardRef(({bsPrefix:n,className:e,contentClassName:t,centered:r,size:a,fullscreen:l,children:c,scrollable:d,...m},g)=>{n=Qt(n,"modal");const _=`${n}-dialog`,w=typeof l=="string"?`${n}-fullscreen-${l}`:`${n}-fullscreen`;return b.jsx("div",{...m,ref:g,className:ct(_,e,a&&`${n}-${a}`,r&&`${_}-centered`,d&&`${_}-scrollable`,l&&w),children:b.jsx("div",{className:ct(`${n}-content`,t),children:c})})});h0.displayName="ModalDialog";const YC=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},a)=>(e=Qt(e,"modal-footer"),b.jsx(t,{ref:a,className:ct(n,e),...r})));YC.displayName="ModalFooter";const E9={"aria-label":Js.string,onClick:Js.func,variant:Js.oneOf(["white"])},f0=I.forwardRef(({className:n,variant:e,"aria-label":t="Close",...r},a)=>b.jsx("button",{ref:a,type:"button",className:ct("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...r}));f0.displayName="CloseButton";f0.propTypes=E9;const w9=I.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:r,children:a,...l},c)=>{const d=I.useContext(XC),m=d_(()=>{d==null||d.onHide(),r==null||r()});return b.jsxs("div",{ref:c,...l,children:[a,t&&b.jsx(f0,{"aria-label":n,variant:e,onClick:m})]})}),JC=I.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:r=!1,...a},l)=>(n=Qt(n,"modal-header"),b.jsx(w9,{ref:l,...a,className:ct(e,n),closeLabel:t,closeButton:r})));JC.displayName="ModalHeader";const b9=n=>I.forwardRef((e,t)=>b.jsx("div",{...e,ref:t,className:ct(e.className,n)})),T9=b9("h4"),ZC=I.forwardRef(({className:n,bsPrefix:e,as:t=T9,...r},a)=>(e=Qt(e,"modal-title"),b.jsx(t,{ref:a,className:ct(n,e),...r})));ZC.displayName="ModalTitle";function A9(n){return b.jsx(c0,{...n,timeout:null})}function S9(n){return b.jsx(c0,{...n,timeout:null})}const eI=I.forwardRef(({bsPrefix:n,className:e,style:t,dialogClassName:r,contentClassName:a,children:l,dialogAs:c=h0,"data-bs-theme":d,"aria-labelledby":m,"aria-describedby":g,"aria-label":_,show:w=!1,animation:T=!0,backdrop:R=!0,keyboard:O=!0,onEscapeKeyDown:L,onShow:P,onHide:$,container:B,autoFocus:G=!0,enforceFocus:X=!0,restoreFocus:Y=!0,restoreFocusOptions:te,onEntered:M,onExit:x,onExiting:C,onEnter:D,onEntering:V,onExited:j,backdropClassName:N,manager:Ie,...we},J)=>{const[ue,he]=I.useState({}),[Be,U]=I.useState(!1),ie=I.useRef(!1),fe=I.useRef(!1),ce=I.useRef(null),[oe,be]=lL(),Re=$C(J,be),it=d_($),Le=v9();n=Qt(n,"modal");const Ze=I.useMemo(()=>({onHide:it}),[it]);function Ue(){return Ie||n9({isRTL:Le})}function dt(Ee){if(!tu)return;const at=Ue().getScrollbarWidth()>0,Mn=Ee.scrollHeight>Dm(Ee).documentElement.clientHeight;he({paddingRight:at&&!Mn?Q1():void 0,paddingLeft:!at&&Mn?Q1():void 0})}const Lt=d_(()=>{oe&&dt(oe.dialog)});fL(()=>{f_(window,"resize",Lt),ce.current==null||ce.current()});const Rt=()=>{ie.current=!0},Wt=Ee=>{ie.current&&oe&&Ee.target===oe.dialog&&(fe.current=!0),ie.current=!1},je=()=>{U(!0),ce.current=qC(oe.dialog,()=>{U(!1)})},gn=Ee=>{Ee.target===Ee.currentTarget&&je()},Dn=Ee=>{if(R==="static"){gn(Ee);return}if(fe.current||Ee.target!==Ee.currentTarget){fe.current=!1;return}$==null||$()},wr=Ee=>{O?L==null||L(Ee):(Ee.preventDefault(),R==="static"&&je())},Fr=(Ee,at)=>{Ee&&dt(Ee),D==null||D(Ee,at)},Bn=Ee=>{ce.current==null||ce.current(),x==null||x(Ee)},br=(Ee,at)=>{V==null||V(Ee,at),HC(window,"resize",Lt)},ya=Ee=>{Ee&&(Ee.style.display=""),j==null||j(Ee),f_(window,"resize",Lt)},_s=I.useCallback(Ee=>b.jsx("div",{...Ee,className:ct(`${n}-backdrop`,N,!T&&"show")}),[T,N,n]),Ut={...t,...ue};Ut.display="block";const ui=Ee=>b.jsx("div",{role:"dialog",...Ee,style:Ut,className:ct(e,n,Be&&`${n}-static`,!T&&"show"),onClick:R?Dn:void 0,onMouseUp:Wt,"data-bs-theme":d,"aria-label":_,"aria-labelledby":m,"aria-describedby":g,children:b.jsx(c,{...we,onMouseDown:Rt,className:r,contentClassName:a,children:l})});return b.jsx(XC.Provider,{value:Ze,children:b.jsx(XL,{show:w,ref:Re,backdrop:R,container:B,keyboard:!0,autoFocus:G,enforceFocus:X,restoreFocus:Y,restoreFocusOptions:te,onEscapeKeyDown:wr,onShow:P,onHide:$,onEnter:Fr,onEntering:br,onEntered:M,onExit:Bn,onExiting:C,onExited:ya,manager:Ue(),transition:T?A9:void 0,backdropTransition:T?S9:void 0,renderBackdrop:_s,renderDialog:ui})})});eI.displayName="Modal";const Gt=Object.assign(eI,{Body:WC,Header:JC,Title:ZC,Footer:YC,Dialog:h0,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),R9=["as","disabled"];function C9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function I9(n){return!n||n.trim()==="#"}function tI({tagName:n,disabled:e,href:t,target:r,rel:a,role:l,onClick:c,tabIndex:d=0,type:m}){n||(t!=null||r!=null||a!=null?n="a":n="button");const g={tagName:n};if(n==="button")return[{type:m||"button",disabled:e},g];const _=T=>{if((e||n==="a"&&I9(t))&&T.preventDefault(),e){T.stopPropagation();return}c==null||c(T)},w=T=>{T.key===" "&&(T.preventDefault(),_(T))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:l??"button",disabled:void 0,tabIndex:e?void 0:d,href:t,target:n==="a"?r:void 0,"aria-disabled":e||void 0,rel:n==="a"?a:void 0,onClick:_,onKeyDown:w},g]}const x9=I.forwardRef((n,e)=>{let{as:t,disabled:r}=n,a=C9(n,R9);const[l,{tagName:c}]=tI(Object.assign({tagName:t,disabled:r},a));return b.jsx(c,Object.assign({},a,l,{ref:e}))});x9.displayName="Button";const fa=I.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:r,active:a=!1,disabled:l=!1,className:c,...d},m)=>{const g=Qt(e,"btn"),[_,{tagName:w}]=tI({tagName:n,disabled:l,...d}),T=w;return b.jsx(T,{..._,...d,ref:m,disabled:l,className:ct(c,g,a&&"active",t&&`${g}-${t}`,r&&`${g}-${r}`,d.href&&l&&"disabled")})});fa.displayName="Button";function N9(){const{currentUser:n}=oi(),e=fo(),[t,r]=I.useState(""),[a,l]=I.useState(!1),[c,d]=I.useState(""),[m,g]=I.useState(""),[_,w]=I.useState(!1),[T,R]=I.useState(null),[O,L]=I.useState([]);I.useEffect(()=>{if(!n)return;(async()=>{try{const M=await vm(n.uid);L(M)}catch(M){console.error("Error loading groups:",M)}})()},[n]);const P=()=>{console.log("Camera opened (mock)")},$=()=>{l(!0),g(Math.random().toString(36).substring(2,8).toUpperCase())},B=async()=>{if(!(!n||!c.trim()))try{w(!0),R(null);const te=await I8(c,n.uid);localStorage.setItem("activeGroupId",te),l(!1),e("/health-quest/")}catch(te){console.error("Error creating group:",te),R("Failed to create group. Please try again.")}finally{w(!1)}},G=async()=>{if(!(!n||!t.trim()))try{w(!0),R(null);const te=await N8(t);if(!te){R("Invalid group code. Please check and try again.");return}if(te.members.includes(n.uid)){localStorage.setItem("activeGroupId",te.id),e("/health-quest/");return}await O8(te.id,n.uid),localStorage.setItem("activeGroupId",te.id),e("/health-quest/")}catch(te){console.error("Error joining group:",te),R("Failed to join group. Please try again.")}finally{w(!1)}},X=()=>{l(!1),d("")},Y=()=>{e("/health-quest/")};return b.jsxs("div",{className:"container mt-4 mb-5 pb-5",children:[b.jsx("div",{className:"card mb-4",children:b.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[b.jsx(BC,{size:24,className:"text-primary",style:{cursor:"pointer"},onClick:Y}),b.jsx("h2",{className:"m-0",children:"Join Group"}),b.jsx(zC,{size:24,className:"text-primary",style:{cursor:"pointer"}})]})}),T&&b.jsx("div",{className:"alert alert-danger mb-4",role:"alert",children:T}),O.length>0&&b.jsxs("div",{className:"card mb-4",children:[b.jsx("div",{className:"card-header bg-white",children:b.jsx("h5",{className:"mb-0",children:"Your Groups"})}),b.jsx("div",{className:"list-group list-group-flush",children:O.map(te=>b.jsxs("button",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:()=>{localStorage.setItem("activeGroupId",te.id),e("/health-quest/")},children:[b.jsx("span",{children:te.name}),b.jsxs("span",{className:"badge bg-primary rounded-pill",children:[te.members.length," members"]})]},te.id))})]}),b.jsx("div",{className:"card mb-4",children:b.jsx("div",{className:"card-body",children:b.jsxs("div",{className:"input-group",children:[b.jsx("span",{className:"input-group-text",children:b.jsx(sL,{className:"text-primary"})}),b.jsx("input",{type:"text",className:"form-control",placeholder:"Enter group code",value:t,onChange:te=>r(te.target.value)}),b.jsx("button",{className:"btn btn-primary",onClick:G,disabled:_||!t.trim(),children:_?"Joining...":"Submit"})]})})}),b.jsxs("div",{className:"position-relative text-center mb-4",children:[b.jsx("hr",{className:"position-absolute w-100 top-50"}),b.jsx("span",{className:"bg-white px-3 position-relative text-muted",children:"OR"})]}),b.jsx("div",{className:"card mb-4 text-center",children:b.jsxs("div",{className:"card-body",children:[b.jsx(iL,{size:100,className:"text-primary mb-3"}),b.jsx("h5",{children:"Scan QR Code"}),b.jsx("button",{className:"btn btn-primary w-100",onClick:P,children:"Open Camera"})]})}),b.jsx("div",{className:"card",children:b.jsxs("div",{className:"card-body text-center",children:[b.jsx("p",{className:"mb-3",children:"Don't have a group to join?"}),b.jsxs("button",{className:"btn btn-success w-100 d-flex align-items-center justify-content-center gap-2",onClick:$,disabled:_,children:[b.jsx(ON,{}),"Create New Group"]})]})}),b.jsxs(Gt,{show:a,onHide:X,children:[b.jsx(Gt.Header,{closeButton:!0,children:b.jsx(Gt.Title,{children:"Create New Group"})}),b.jsxs(Gt.Body,{children:[b.jsxs("div",{className:"mb-3",children:[b.jsx("label",{htmlFor:"groupName",className:"form-label",children:"Group Name"}),b.jsx("input",{type:"text",id:"groupName",className:"form-control",placeholder:"Enter group name",value:c,onChange:te=>d(te.target.value)})]}),b.jsxs("div",{className:"alert alert-info",children:[b.jsx("strong",{children:"Generated Group Code:"})," ",m,b.jsx("p",{className:"small mt-2 mb-0",children:"Share this code with others to let them join your group"})]})]}),b.jsxs(Gt.Footer,{children:[b.jsx(fa,{variant:"secondary",onClick:X,children:"Cancel"}),b.jsx(fa,{variant:"primary",onClick:B,disabled:_||!c.trim(),children:_?"Creating...":"Create Group"})]})]})]})}function O9(n){return St({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 0 0-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 0 0-44-44zM184 352V232h64v207.6a91.99 91.99 0 0 1-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"},child:[]}]})(n)}function D9(n,e){return I.Children.toArray(n).some(t=>I.isValidElement(t)&&t.type===e)}function M9({as:n,bsPrefix:e,className:t,...r}){e=Qt(e,"col");const a=y9(),l=_9(),c=[],d=[];return a.forEach(m=>{const g=r[m];delete r[m];let _,w,T;typeof g=="object"&&g!=null?{span:_,offset:w,order:T}=g:_=g;const R=m!==l?`-${m}`:"";_&&c.push(_===!0?`${e}${R}`:`${e}${R}-${_}`),T!=null&&d.push(`order${R}-${T}`),w!=null&&d.push(`offset${R}-${w}`)}),[{...r,className:ct(t,...c,...d)},{as:n,bsPrefix:e,spans:c}]}const nI=I.forwardRef((n,e)=>{const[{className:t,...r},{as:a="div",bsPrefix:l,spans:c}]=M9(n);return b.jsx(a,{...r,ref:e,className:ct(t,!c.length&&l)})});nI.displayName="Col";const k9={type:Js.string,tooltip:Js.bool,as:Js.elementType},km=I.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:r=!1,...a},l)=>b.jsx(n,{...a,ref:l,className:ct(e,`${t}-${r?"tooltip":"feedback"}`)}));km.displayName="Feedback";km.propTypes=k9;const ii=I.createContext({}),d0=I.forwardRef(({id:n,bsPrefix:e,className:t,type:r="checkbox",isValid:a=!1,isInvalid:l=!1,as:c="input",...d},m)=>{const{controlId:g}=I.useContext(ii);return e=Qt(e,"form-check-input"),b.jsx(c,{...d,ref:m,type:r,id:n||g,className:ct(t,e,a&&"is-valid",l&&"is-invalid")})});d0.displayName="FormCheckInput";const zd=I.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...r},a)=>{const{controlId:l}=I.useContext(ii);return n=Qt(n,"form-check-label"),b.jsx("label",{...r,ref:a,htmlFor:t||l,className:ct(e,n)})});zd.displayName="FormCheckLabel";const rI=I.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:r=!1,reverse:a=!1,disabled:l=!1,isValid:c=!1,isInvalid:d=!1,feedbackTooltip:m=!1,feedback:g,feedbackType:_,className:w,style:T,title:R="",type:O="checkbox",label:L,children:P,as:$="input",...B},G)=>{e=Qt(e,"form-check"),t=Qt(t,"form-switch");const{controlId:X}=I.useContext(ii),Y=I.useMemo(()=>({controlId:n||X}),[X,n]),te=!P&&L!=null&&L!==!1||D9(P,zd),M=b.jsx(d0,{...B,type:O==="switch"?"checkbox":O,ref:G,isValid:c,isInvalid:d,disabled:l,as:$});return b.jsx(ii.Provider,{value:Y,children:b.jsx("div",{style:T,className:ct(w,te&&e,r&&`${e}-inline`,a&&`${e}-reverse`,O==="switch"&&t),children:P||b.jsxs(b.Fragment,{children:[M,te&&b.jsx(zd,{title:R,children:L}),g&&b.jsx(km,{type:_,tooltip:m,children:g})]})})})});rI.displayName="FormCheck";const Hd=Object.assign(rI,{Input:d0,Label:zd}),sI=I.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:r,id:a,className:l,isValid:c=!1,isInvalid:d=!1,plaintext:m,readOnly:g,as:_="input",...w},T)=>{const{controlId:R}=I.useContext(ii);return n=Qt(n,"form-control"),b.jsx(_,{...w,type:e,size:r,ref:T,readOnly:g,id:a||R,className:ct(l,m?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,c&&"is-valid",d&&"is-invalid")})});sI.displayName="FormControl";const P9=Object.assign(sI,{Feedback:km}),iI=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...r},a)=>(e=Qt(e,"form-floating"),b.jsx(t,{ref:a,className:ct(n,e),...r})));iI.displayName="FormFloating";const m0=I.forwardRef(({controlId:n,as:e="div",...t},r)=>{const a=I.useMemo(()=>({controlId:n}),[n]);return b.jsx(ii.Provider,{value:a,children:b.jsx(e,{...t,ref:r})})});m0.displayName="FormGroup";const aI=I.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:r=!1,className:a,htmlFor:l,...c},d)=>{const{controlId:m}=I.useContext(ii);e=Qt(e,"form-label");let g="col-form-label";typeof t=="string"&&(g=`${g} ${g}-${t}`);const _=ct(a,e,r&&"visually-hidden",t&&g);return l=l||m,t?b.jsx(nI,{ref:d,as:"label",className:_,htmlFor:l,...c}):b.jsx(n,{ref:d,className:_,htmlFor:l,...c})});aI.displayName="FormLabel";const oI=I.forwardRef(({bsPrefix:n,className:e,id:t,...r},a)=>{const{controlId:l}=I.useContext(ii);return n=Qt(n,"form-range"),b.jsx("input",{...r,type:"range",ref:a,className:ct(e,n),id:t||l})});oI.displayName="FormRange";const lI=I.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:r,isValid:a=!1,isInvalid:l=!1,id:c,...d},m)=>{const{controlId:g}=I.useContext(ii);return n=Qt(n,"form-select"),b.jsx("select",{...d,size:t,ref:m,className:ct(r,n,e&&`${n}-${e}`,a&&"is-valid",l&&"is-invalid"),id:c||g})});lI.displayName="FormSelect";const uI=I.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:r,...a},l)=>(n=Qt(n,"form-text"),b.jsx(t,{...a,ref:l,className:ct(e,n,r&&"text-muted")})));uI.displayName="FormText";const cI=I.forwardRef((n,e)=>b.jsx(Hd,{...n,ref:e,type:"switch"}));cI.displayName="Switch";const V9=Object.assign(cI,{Input:Hd.Input,Label:Hd.Label}),hI=I.forwardRef(({bsPrefix:n,className:e,children:t,controlId:r,label:a,...l},c)=>(n=Qt(n,"form-floating"),b.jsxs(m0,{ref:c,className:ct(e,n),controlId:r,...l,children:[t,b.jsx("label",{htmlFor:r,children:a})]})));hI.displayName="FloatingLabel";const L9={_ref:Js.any,validated:Js.bool,as:Js.elementType},p0=I.forwardRef(({className:n,validated:e,as:t="form",...r},a)=>b.jsx(t,{...r,ref:a,className:ct(n,e&&"was-validated")}));p0.displayName="Form";p0.propTypes=L9;const qs=Object.assign(p0,{Group:m0,Control:P9,Floating:iI,Check:Hd,Switch:V9,Label:aI,Text:uI,Range:oI,Select:lI,FloatingLabel:hI});function Pm({size:n="md",color:e="primary"}){const t={sm:"spinner-border-sm",md:"",lg:"spinner-border-lg"};return b.jsx("div",{className:"d-flex justify-content-center align-items-center p-3",children:b.jsx("div",{className:`spinner-border text-${e} ${t[n]}`,role:"status",children:b.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}const U9=["/health-quest/avatars/fitness-woman1.jpg","/health-quest/avatars/fitness-man1.jpg","/health-quest/avatars/fitness-woman2.jpg","/health-quest/avatars/fitness-man2.jpg"];function j9({show:n,onHide:e,currentName:t,currentUsername:r,currentAvatar:a,onUpdate:l}){const{currentUser:c}=oi(),[d,m]=I.useState(t),[g,_]=I.useState(r),[w,T]=I.useState(a),[R,O]=I.useState(!1),[L,P]=I.useState(null),[$,B]=I.useState({});I.useEffect(()=>{n&&(m(t),_(r),T(a),P(null),B({}))},[n,t,r,a]);const G=()=>{const Y={};return d.trim()||(Y.name="Name is required"),g.trim()?g.length<3?Y.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(g)||(Y.username="Username can only contain letters, numbers, and underscores"):Y.username="Username is required",B(Y),Object.keys(Y).length===0},X=async()=>{if(c&&G())try{O(!0),P(null);const Y=sn(Nt,"users",c.uid);await jc(Y,{name:d.trim(),username:g.trim(),avatarUrl:w}),l(),e()}catch(Y){console.error("Error updating profile:",Y),P("Failed to update profile. Please try again.")}finally{O(!1)}};return b.jsxs(Gt,{show:n,onHide:e,centered:!0,children:[b.jsx(Gt.Header,{closeButton:!0,children:b.jsx(Gt.Title,{children:"Edit Profile"})}),b.jsxs(Gt.Body,{children:[L&&b.jsx("div",{className:"alert alert-danger mb-3",children:L}),b.jsxs(qs,{children:[b.jsxs("div",{className:"text-center mb-4",children:[b.jsx("h6",{className:"mb-3",children:"Choose an Avatar"}),b.jsx("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:U9.map((Y,te)=>b.jsx("div",{className:`avatar-option ${w===Y?"selected":""}`,onClick:()=>T(Y),style:{cursor:"pointer",border:w===Y?"3px solid #007bff":"3px solid transparent",borderRadius:"50%",padding:"2px",transition:"all 0.2s ease-in-out",transform:w===Y?"scale(1.1)":"scale(1)",boxShadow:w===Y?"0 0 10px rgba(0,123,255,0.5)":"none"},children:b.jsx("img",{src:Y,alt:`Avatar ${te+1}`,style:{width:"70px",height:"70px",borderRadius:"50%",objectFit:"cover",transition:"all 0.2s ease-in-out",filter:w===Y?"brightness(1.1)":"brightness(1)"}})},te))})]}),b.jsxs(qs.Group,{className:"mb-3",children:[b.jsx(qs.Label,{children:"Name"}),b.jsx(qs.Control,{type:"text",value:d,onChange:Y=>m(Y.target.value),placeholder:"Enter your name",isInvalid:!!$.name}),b.jsx(qs.Control.Feedback,{type:"invalid",children:$.name})]}),b.jsxs(qs.Group,{className:"mb-3",children:[b.jsx(qs.Label,{children:"Username"}),b.jsx(qs.Control,{type:"text",value:g,onChange:Y=>_(Y.target.value),placeholder:"Enter your username",isInvalid:!!$.username}),b.jsx(qs.Control.Feedback,{type:"invalid",children:$.username})]})]})]}),b.jsxs(Gt.Footer,{children:[b.jsx(fa,{variant:"secondary",onClick:e,children:"Cancel"}),b.jsx(fa,{variant:"primary",onClick:X,disabled:R,children:R?b.jsxs(b.Fragment,{children:[b.jsx(Pm,{size:"sm"})," Saving..."]}):"Save Changes"})]})]})}function F9({show:n,onHide:e}){const t=fo(),[r,a]=I.useState(!1),[l,c]=I.useState(null),d=async()=>{try{a(!0),c(null),await S2(),t("/health-quest/login")}catch(m){console.error("Error logging out:",m),c("Failed to log out. Please try again.")}finally{a(!1)}};return b.jsxs(Gt,{show:n,onHide:e,centered:!0,children:[b.jsx(Gt.Header,{closeButton:!0,children:b.jsx(Gt.Title,{children:"Settings"})}),b.jsxs(Gt.Body,{children:[l&&b.jsx("div",{className:"alert alert-danger mb-3",children:l}),b.jsx("div",{className:"d-grid gap-2",children:b.jsx(fa,{variant:"outline-danger",onClick:d,disabled:r,children:r?b.jsxs(b.Fragment,{children:[b.jsx(Pm,{size:"sm"})," Logging out..."]}):"Logout"})})]})]})}const B9=async(n,e)=>{try{const t=await Zc(sn(Nt,"healthStats",`${n}_${e}`));return t.exists()?t.data():null}catch(t){throw console.error("Error getting health stats:",t),t}},z9=async n=>{try{const e=await Zc(sn(Nt,"userStats",n));return e.exists()?e.data():null}catch(e){throw console.error("Error getting user stats:",e),e}},H9=n=>{const{healthyFats:e=0,veggies:t=0,cardio:r=0,strength:a=0,customGoals:l={}}=n,c=e+t+r+a,d=(e!==void 0?12:0)+(t!==void 0?16:0)+(r!==void 0?3:0)+(a!==void 0?3:0),m=Object.values(l).reduce((T,R)=>T+(R.current||0),0),g=Object.values(l).reduce((T,R)=>T+R.target,0),_=c+m,w=d+g;return w===0?0:Math.round(_/w*100)};function $9(){const{userData:n,currentUser:e}=oi(),[t,r]=I.useState(!1),[a,l]=I.useState(!1),[c,d]=I.useState(null),[m,g]=I.useState([]),[_,w]=I.useState(!0);return I.useEffect(()=>{(async()=>{if(e)try{w(!0);const R=await z9(e.uid),O=await vm(e.uid);let L=0,P=0;for(const B of O){const G=await B9(e.uid,B.id);if(G){L+=H9(G);const X=[G.healthyFats!==void 0,G.veggies!==void 0,G.cardio!==void 0,G.strength!==void 0].filter(Boolean).length,Y=Object.keys(G.customGoals||{}).length;P+=X+Y}}const $=O.length>0?Math.round(L/O.length):0;R&&d({...R,activeGoals:P,completion:$}),g(O)}catch(R){console.error("Error loading user data:",R)}finally{w(!1)}})()},[e]),!n||!c?null:_?b.jsx(Pm,{size:"lg"}):b.jsxs("div",{className:"container mt-4 mb-5 pb-5",children:[b.jsx("div",{className:"card mb-4",children:b.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[b.jsx(BC,{size:24,className:"text-primary",style:{cursor:"pointer"}}),b.jsx("h2",{className:"m-0",children:"Profile"}),b.jsx(zC,{size:24,className:"text-primary",style:{cursor:"pointer"},onClick:()=>l(!0)})]})}),b.jsx("div",{className:"card mb-4",children:b.jsxs("div",{className:"card-body text-center position-relative",children:[b.jsx("button",{className:"btn btn-link position-absolute top-0 end-0 mt-2 me-2",onClick:()=>r(!0),children:"Edit"}),b.jsx("img",{src:n.avatarUrl,alt:"Profile",className:"rounded-circle mb-3",width:100,height:100}),b.jsx("h3",{className:"mb-1",children:n.name}),b.jsx("p",{className:"text-primary",children:n.username})]})}),b.jsxs("div",{className:"row mb-4 g-3",children:[b.jsx("div",{className:"col-4",children:b.jsx("div",{className:"card h-100",children:b.jsxs("div",{className:"card-body text-center",children:[b.jsx("h3",{className:"text-success mb-2",children:c.activeGoals}),b.jsx("div",{className:"text-muted small",children:"Active Goals"})]})})}),b.jsx("div",{className:"col-4",children:b.jsx("div",{className:"card h-100",children:b.jsxs("div",{className:"card-body text-center",children:[b.jsxs("h3",{className:"text-primary mb-2",children:[c.completion,"%"]}),b.jsx("div",{className:"text-muted small",children:"Completion"})]})})}),b.jsx("div",{className:"col-4",children:b.jsx("div",{className:"card h-100",children:b.jsxs("div",{className:"card-body text-center",children:[b.jsx("h3",{className:"text-warning mb-2",children:c.totalGroups}),b.jsx("div",{className:"text-muted small",children:"Groups"})]})})})]}),b.jsxs("div",{className:"card mb-4",children:[b.jsx("div",{className:"card-header bg-white",children:b.jsx("h5",{className:"mb-0",children:"My Groups"})}),b.jsx("div",{className:"list-group list-group-flush",children:m.map(T=>b.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[b.jsxs("div",{className:"d-flex align-items-center",children:[T.icon==="family"?b.jsx(CN,{size:24,className:"text-primary me-2"}):b.jsx(V8,{size:24,className:"text-danger me-2"}),b.jsx("span",{children:T.name})]}),b.jsxs("div",{children:[b.jsxs("span",{className:"badge bg-primary me-2",children:[T.members.length," members"]}),b.jsx("span",{className:"badge bg-success",children:T.status})]})]},T.id))})]}),b.jsxs("div",{className:"card",children:[b.jsx("div",{className:"card-header bg-white",children:b.jsx("h5",{className:"mb-0",children:"Lifetime Stats"})}),b.jsxs("div",{className:"list-group list-group-flush",children:[b.jsxs("div",{className:"list-group-item d-flex align-items-center",children:[b.jsx(O9,{className:"text-warning me-3",size:28}),b.jsxs("div",{children:[b.jsx("div",{className:"fw-bold",children:"Goals Completed"}),b.jsx("div",{className:"text-success",children:c.goalsCompleted})]})]}),b.jsxs("div",{className:"list-group-item d-flex align-items-center",children:[b.jsx(U8,{className:"text-danger me-3",size:28}),b.jsxs("div",{children:[b.jsx("div",{className:"fw-bold",children:"Workout Sessions"}),b.jsx("div",{className:"text-success",children:c.workoutSessions})]})]}),b.jsxs("div",{className:"list-group-item d-flex align-items-center",children:[b.jsx(D8,{className:"text-primary me-3",size:28}),b.jsxs("div",{children:[b.jsx("div",{className:"fw-bold",children:"Healthy Meals"}),b.jsx("div",{className:"text-success",children:c.healthyMeals})]})]})]})]}),b.jsx(j9,{show:t,onHide:()=>r(!1),currentName:n.name,currentUsername:n.username,currentAvatar:n.avatarUrl,onUpdate:()=>{window.location.reload()}}),b.jsx(F9,{show:a,onHide:()=>l(!1)})]})}function q9(n){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"},child:[]},{tag:"line",attr:{x1:"4",x2:"4",y1:"22",y2:"15"},child:[]}]})(n)}function G9(n){return St({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M12,13 C14.209139,13 16,11.209139 16,9 C16,6.790861 14.209139,5 12,5 C9.790861,5 8,6.790861 8,9 C8,11.209139 9.790861,13 12,13 Z M6,22 L6,19 C6,15.6862915 8.6862915,13 12,13 C15.3137085,13 18,15.6862915 18,19 L18,22 M13,5 C13.4037285,3.33566165 15.0151447,2 17,2 C19.172216,2 20.98052,3.790861 21,6 C20.98052,8.209139 19.172216,10 17,10 L16,10 L17,10 C20.287544,10 23,12.6862915 23,16 L23,18 M11,5 C10.5962715,3.33566165 8.98485529,2 7,2 C4.82778404,2 3.01948003,3.790861 3,6 C3.01948003,8.209139 4.82778404,10 7,10 L8,10 L7,10 C3.71245602,10 1,12.6862915 1,16 L1,18"},child:[]}]})(n)}function K9(n){return St({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"},child:[]}]})(n)}function Q9({show:n,onHide:e,onConfirm:t}){return b.jsxs(Gt,{show:n,onHide:e,centered:!0,children:[b.jsx(Gt.Header,{closeButton:!0,children:b.jsx(Gt.Title,{children:"Confirm Logout"})}),b.jsx(Gt.Body,{children:"Are you sure you want to log out?"}),b.jsxs(Gt.Footer,{children:[b.jsx(fa,{variant:"secondary",onClick:e,children:"Cancel"}),b.jsx(fa,{variant:"primary",onClick:t,children:"Logout"})]})]})}function W9(){var c,d;const[n,e]=I.useState(!1),t=fo(),r=ai(),a=/\/health-quest\/(\w+)/,l=async()=>{try{await S2(),t("/health-quest/login")}catch(m){console.error("Error logging out:",m)}};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"container ms-3",style:{paddingLeft:0,paddingRight:0},children:b.jsxs("div",{className:"row navbar",children:[b.jsx("div",{className:"col-4 text-center navbar-icon-container",style:{borderRight:"2px solid lightgray",color:((c=r.pathname.match(a))==null?void 0:c[1])=="profile"?"green":"black"},children:b.jsx(K9,{onClick:()=>{t("/health-quest/profile")},className:"navbar-icon"})}),b.jsx("div",{className:"col-4 text-center navbar-icon-container",style:{borderRight:"2px solid lightgray",color:r.pathname=="/health-quest/"?"green":"black"},children:b.jsx(q9,{onClick:()=>{t("/health-quest/")},className:"navbar-icon"})}),b.jsx("div",{className:"col-4 text-center navbar-icon-container",style:{color:((d=r.pathname.match(a))==null?void 0:d[1])=="group"?"green":"black"},children:b.jsx(G9,{onClick:()=>{t("/health-quest/group")},className:"navbar-icon"})})]})}),b.jsx(Q9,{show:n,onHide:()=>e(!1),onConfirm:()=>{l(),e(!1)}})]})}function X9(){const n=fo(),[e,t]=I.useState(null),[r,a]=I.useState(!1),{isAuthenticated:l}=oi();I.useEffect(()=>{l&&n("/health-quest/")},[l,n]);const c=async()=>{try{t(null),a(!0),await A8()}catch(d){console.error("Error logging in:",d),t("Failed to sign in. Please try again.")}finally{a(!1)}};return b.jsx("div",{className:"container mt-5",children:b.jsx("div",{className:"row justify-content-center",children:b.jsxs("div",{className:"col-md-6 text-center",children:[b.jsx("h2",{className:"mb-4",children:"Welcome to Health Quest"}),e&&b.jsx("div",{className:"alert alert-danger mb-3",role:"alert",children:e}),b.jsx("button",{className:"btn btn-primary",onClick:c,disabled:r,children:r?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing in..."]}):"Sign in with Google"})]})})})}function wy({children:n}){const{isAuthenticated:e,loading:t}=oi();return t?b.jsx(Pm,{size:"lg"}):e?b.jsx(b.Fragment,{children:n}):b.jsx(k4,{to:"/health-quest/login"})}function Y9(){const{currentUser:n,loading:e}=oi();return e?b.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:b.jsx("div",{className:"spinner-border text-primary",role:"status",children:b.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):b.jsx(ZV,{children:b.jsxs(iN,{children:[b.jsx("div",{style:{height:"90vh",overflowY:"scroll"},children:b.jsxs(V4,{children:[b.jsx(uc,{path:"/health-quest/login",element:b.jsx(X9,{})}),b.jsx(uc,{path:"/health-quest/",element:b.jsx(wy,{children:b.jsx(rL,{})})}),b.jsx(uc,{path:"/health-quest/profile",element:b.jsx(wy,{children:b.jsx($9,{})})}),b.jsx(uc,{path:"/health-quest/group",element:b.jsx(wy,{children:b.jsx(N9,{})})})]})}),n&&b.jsx(W9,{})]})})}qx.createRoot(document.getElementById("root")).render(b.jsx(Nn.StrictMode,{children:b.jsx(R8,{children:b.jsx(Y9,{})})}));
